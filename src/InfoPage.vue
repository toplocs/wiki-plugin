<template>
  <PluginInfoPage
    :plugin-config="pluginConfig"
    icon="ğŸ“–"
    :about="about"
    :features="features"
    :endpoints="endpoints"
    :development="development"
    :slot-descriptions="slotDescriptions"
  />
</template>

<script setup lang="ts">
import { PluginInfoPage } from '@toplocs/plugin-sdk'
import pluginConfig from './index'

const about = `
The Wiki Plugin brings collaborative wiki functionality to TopLocs spheres, enabling communities to create, share, and organize knowledge collectively. Built on TipTap for rich text editing and Gun.js for P2P data sync, it provides a decentralized knowledge management system.
`

const features = [
  {
    icon: 'ğŸ“',
    title: 'Rich Text Editing',
    description: 'Create wikis with rich formatting including headings, lists, links, code blocks, and text alignment using TipTap editor'
  },
  {
    icon: 'ğŸ”',
    title: 'Wiki Organization',
    description: 'Browse, search, and organize wikis within each sphere with an intuitive interface'
  },
  {
    icon: 'ğŸ”',
    title: 'Sphere-Scoped Wikis',
    description: 'Each sphere maintains its own wiki collection, ensuring proper content separation and privacy'
  },
  {
    icon: 'ğŸ”„',
    title: 'Real-time Sync',
    description: 'P2P synchronization ensures wikis are available across all sphere members instantly'
  },
  {
    icon: 'ğŸ‘¥',
    title: 'Community Collaboration',
    description: 'Multiple members can contribute to sphere wikis, building knowledge together'
  },
  {
    icon: 'âš™ï¸',
    title: 'Sphere Settings',
    description: 'Configure wiki preferences and permissions at the sphere level'
  }
]

// Compute base URL from current location
const baseUrl = window.location.origin + window.location.pathname.replace(/\/[^/]*$/, '')
const isDevelopment = window.location.hostname === 'localhost'

const endpoints = {
  plugin: `${baseUrl}/assets/plugin.js`,
  landing: baseUrl,
  demo: 'https://toplocs.github.io/tribelike/'
}

const development = {
  stack: ['Vue 3', 'TypeScript', 'TipTap', 'Gun.js', 'Tailwind CSS'],
  setup: `pnpm install && pnpm dev`,
  urls: [
    { label: 'GitHub Repository', url: 'https://github.com/toplocs/wiki-plugin' },
    { label: isDevelopment ? 'Local Development' : 'Plugin Landing Page', url: baseUrl }
  ]
}

const slotDescriptions = {
  'Topic â†’ Info â†’ Content': 'MainView: Displays wikis associated with the current topic',
  'Topic â†’ Info â†’ Sidebar': 'SidebarView: Shows wiki-related actions and quick access',
  'Topic â†’ Settings â†’ Content': 'SettingsView: Wiki configuration options for the sphere'
}
</script>