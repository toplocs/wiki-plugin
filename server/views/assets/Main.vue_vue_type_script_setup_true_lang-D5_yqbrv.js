import{importShared as b,__tla as R}from"./__federation_fn_import-ofDdBDNE.js";import{_ as X,b as ee,c as j,d as te,a as z,__tla as ae}from"./WikiEdit.vue_vue_type_script_setup_true_lang-BXYALVrq.js";import{_ as le,__tla as re}from"./Title.vue_vue_type_script_setup_true_lang-kwpKaj4B.js";let A,ie=Promise.all([(()=>{try{return R}catch{}})(),(()=>{try{return ae}catch{}})(),(()=>{try{return re}catch{}})()]).then(async()=>{let h,c,v,p,y,m,k,e,t,s,l,u,g,x,N,S,V,C,I,E,M,T,B,L,D,o,G,F;({defineComponent:h}=await b("vue")),{toDisplayString:c,createTextVNode:v,withCtx:p,createVNode:y,renderList:m,Fragment:k,openBlock:e,createElementBlock:t,createBlock:s,createElementVNode:l,createCommentVNode:u,withModifiers:g}=await b("vue"),x={class:"p-6 border rounded-lg bg-gray-50 border-gray-300 dark:bg-gray-900 dark:border-gray-600 dark:text-white"},N={key:0},S={key:0},V={class:"mt-2 flex flex-wrap gap-2"},C={key:1},I={class:"mt-2 flex flex-wrap gap-2"},E={key:2,class:"mt-4 wiki-editor"},M=["value"],T={class:"mt-2 space-x-2"},B={key:3,class:"wiki-display"},L=["innerHTML"],D={key:1},{ref:o,computed:G,watchEffect:F}=await b("vue"),A=h({__name:"Main",props:{wikiId:{type:String,required:!0}},setup(H){const J=H,O=o(null),w=o(""),_=o(""),f=o(!1),i=o(null),d=o(null),K=()=>{f.value=!0},Y=()=>{f.value=!1},Z=async a=>{try{return(await z.get(`/api/wiki/byId/${a}`)).data}catch(n){console.error(n)}},Q=async()=>{try{const a=new FormData(O.value??void 0);a.append("content",JSON.stringify(d.value));const n=await z.put("/api/wiki",a);return w.value="Wiki content was saved successfully!",n.data}catch(a){console.error(a),_.value=a.response.data}};return F(async()=>{var a;J.wikiId&&(i.value=await Z(J.wikiId)),d.value=JSON.parse(((a=i.value)==null?void 0:a.content)||"{}")}),(a,n)=>{var W,q,P,U,$;return e(),t("div",x,[y(le,null,{default:p(()=>{var r;return[v(c((r=i.value)==null?void 0:r.title),1)]}),_:1}),H.wikiId?(e(),t("div",N,[(W=i.value)!=null&&W.interests.length?(e(),t("div",S,[l("div",V,[(e(!0),t(k,null,m((q=i.value)==null?void 0:q.interests,r=>(e(),t("span",null,[(e(),s(X,{key:r.id,title:r.title},null,8,["title"]))]))),256))])])):u("",!0),(P=i.value)!=null&&P.locations.length?(e(),t("div",C,[l("div",I,[(e(!0),t(k,null,m((U=i.value)==null?void 0:U.locations,r=>(e(),t("span",null,[(e(),s(ee,{key:r.id,title:r.title},null,8,["title"]))]))),256))])])):u("",!0),f.value?(e(),t("div",E,[w.value?(e(),s(j,{key:0,color:"green"},{default:p(()=>[v(c(w.value),1)]),_:1})):u("",!0),_.value?(e(),s(j,{key:1,color:"red"},{default:p(()=>[v(c(_.value),1)]),_:1})):u("",!0),l("form",{ref_key:"form",ref:O,onSubmit:g(Q,["prevent"])},[l("input",{type:"hidden",name:"wikiId",value:($=i.value)==null?void 0:$.id},null,8,M),y(te,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=r=>d.value=r)},null,8,["modelValue"]),l("div",T,[n[1]||(n[1]=l("button",{type:"submit",class:"px-4 py-2 rounded font-semibold transition-colors duration-200 bg-green-500 hover:bg-green-600 text-white"}," Save ",-1)),l("button",{type:"button",class:"px-4 py-2 rounded font-semibold transition-colors duration-200 bg-gray-500 hover:bg-gray-600 text-white",onClick:g(Y,["prevent"])}," Cancel ")])],544)])):(e(),t("div",B,[l("div",{innerHTML:d.value,className:"mt-4 custom-editor"},null,8,L),l("button",{class:"mt-4 px-4 py-2 rounded font-semibold transition-colors duration-200 bg-green-500 hover:bg-green-600 text-white",onClick:K}," Edit the Wiki ")]))])):(e(),t("span",D,"There is no wiki yet"))])}}})});export{A as _,ie as __tla};
