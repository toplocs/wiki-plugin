import{importShared as b,__tla as K}from"./__federation_fn_import-ofDdBDNE.js";import{_ as Q,b as Y,c as U,d as Z,a as $,__tla as ee}from"./WikiEdit.vue_vue_type_script_setup_true_lang-BXYALVrq.js";import{_ as te,__tla as ae}from"./Title.vue_vue_type_script_setup_true_lang-kwpKaj4B.js";let j,le=Promise.all([(()=>{try{return K}catch{}})(),(()=>{try{return ee}catch{}})(),(()=>{try{return ae}catch{}})()]).then(async()=>{let h,c,v,p,m,y,g,e,a,u,l,s,k,x,N,S,V,C,I,E,M,B,L,o,z,T;({defineComponent:h}=await b("vue")),{toDisplayString:c,createTextVNode:v,withCtx:p,createVNode:m,renderList:y,Fragment:g,openBlock:e,createElementBlock:a,createBlock:u,createElementVNode:l,createCommentVNode:s,withModifiers:k}=await b("vue"),x={class:"p-6 border rounded-lg bg-gray-50 border-gray-300 dark:bg-gray-900 dark:border-gray-600 dark:text-white"},N={key:0},S={class:"mt-2 flex flex-wrap gap-2"},V={key:1},C={class:"mt-2 flex flex-wrap gap-2"},I={key:2,class:"mt-4 wiki-editor"},E=["value"],M={class:"mt-2 space-x-2"},B={key:3,class:"wiki-display"},L=["innerHTML"],{ref:o,computed:z,watchEffect:T}=await b("vue"),j=h({__name:"Main",props:{wikiId:{type:String,required:!0}},setup(A){const D=A,F=o(null),_=o(""),w=o(""),f=o(!1),n=o(null),d=o(null),G=()=>{f.value=!0},P=()=>{f.value=!1},R=async t=>{try{return(await $.get(`/api/wiki/byId/${t}`)).data}catch(i){console.error(i)}},X=async()=>{try{const t=new FormData(F.value??void 0);t.append("content",JSON.stringify(d.value));const i=await $.put("/api/wiki",t);return _.value="Wiki content was saved successfully!",i.data}catch(t){console.error(t),w.value=t.response.data}};return T(async()=>{var t;D.wikiId&&(n.value=await R(D.wikiId)),d.value=JSON.parse(((t=n.value)==null?void 0:t.content)||"{}")}),(t,i)=>{var H,J,O,W,q;return e(),a("div",x,[m(te,null,{default:p(()=>{var r;return[v(c((r=n.value)==null?void 0:r.title),1)]}),_:1}),(H=n.value)!=null&&H.interests.length?(e(),a("div",N,[l("div",S,[(e(!0),a(g,null,y((J=n.value)==null?void 0:J.interests,r=>(e(),a("span",null,[(e(),u(Q,{key:r,title:r},null,8,["title"]))]))),256))])])):s("",!0),(O=n.value)!=null&&O.locations.length?(e(),a("div",V,[l("div",C,[(e(!0),a(g,null,y((W=n.value)==null?void 0:W.locations,r=>(e(),a("span",null,[(e(),u(Y,{key:r,title:r},null,8,["title"]))]))),256))])])):s("",!0),f.value?(e(),a("div",I,[_.value?(e(),u(U,{key:0,color:"green"},{default:p(()=>[v(c(_.value),1)]),_:1})):s("",!0),w.value?(e(),u(U,{key:1,color:"red"},{default:p(()=>[v(c(w.value),1)]),_:1})):s("",!0),l("form",{ref_key:"form",ref:F,onSubmit:k(X,["prevent"])},[l("input",{type:"hidden",name:"wikiId",value:(q=n.value)==null?void 0:q.id},null,8,E),m(Z,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=r=>d.value=r)},null,8,["modelValue"]),l("div",M,[i[1]||(i[1]=l("button",{type:"submit",class:"px-4 py-2 rounded font-semibold transition-colors duration-200 bg-green-500 hover:bg-green-600 text-white"}," Save ",-1)),l("button",{type:"button",class:"px-4 py-2 rounded font-semibold transition-colors duration-200 bg-gray-500 hover:bg-gray-600 text-white",onClick:k(P,["prevent"])}," Cancel ")])],544)])):(e(),a("div",B,[l("div",{innerHTML:d.value,className:"mt-4 custom-editor"},null,8,L),l("button",{class:"mt-4 px-4 py-2 rounded font-semibold transition-colors duration-200 bg-green-500 hover:bg-green-600 text-white",onClick:G}," Edit the Wiki ")]))])}}})});export{j as _,le as __tla};
