import{importShared as X,__tla as bt}from"./__federation_fn_import-ofDdBDNE.js";let ut,F,ct,ft,wt=Promise.all([(()=>{try{return bt}catch{}})()]).then(async()=>{let Z,tt,nt,et,rt;({defineComponent:Z}=await X("vue")),{renderSlot:tt,normalizeClass:nt,openBlock:et,createElementBlock:rt}=await X("vue"),ut=Z({__name:"Title",props:{float:{type:String,default:"left",required:!1}},setup(K){return(b,J)=>(et(),rt("h3",{class:nt(`my-auto text-${K.float} text-lg text-gray-800 dark:text-gray-100 font-semibold`)},[tt(b.$slots,"default")],2))}});var B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lt(K){return K&&K.__esModule&&Object.prototype.hasOwnProperty.call(K,"default")?K.default:K}function ot(K){throw new Error('Could not dynamically require "'+K+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var z={exports:{}};z.exports,function(K){(function(){function b(x,o){return o?ot(x):x.slice?b[i(x)]:function(c,y){x(c={exports:{}}),b[i(y)]=c.exports};function i(c){return c.split("/").slice(-1).toString().replace(".js","")}}var J=K;b(function(x){String.random=function(i,c){var y="";for(i=i||24,c=c||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";i-- >0;)y+=c.charAt(Math.floor(Math.random()*c.length));return y},String.match=function(i,c){var y,p;return typeof i!="string"?!1:(typeof c=="string"&&(c={"=":c}),c=c||{},y=c["="]||c["*"]||c[">"]||c["<"],i===y?!0:p!==c["="]?!1:(y=c["*"]||c[">"],i.slice(0,(y||"").length)===y?!0:p!==c["*"]?!1:p!==c[">"]&&p!==c["<"]?i>=c[">"]&&i<=c["<"]:p!==c[">"]&&i>=c[">"]||p!==c["<"]&&i<=c["<"]))},String.hash=function(i,c){if(typeof i=="string"){if(c=c||0,!i.length)return c;for(var y=0,p=i.length,e;y<p;++y)e=i.charCodeAt(y),c=(c<<5)-c+e,c|=0;return c}};var o=Object.prototype.hasOwnProperty;Object.plain=function(i){return i?i instanceof Object&&i.constructor===Object||Object.prototype.toString.call(i).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(i,c){for(var y in i)if(o.call(i,y)&&(!c||c.indexOf(y)==-1))return!1;return!0},Object.keys=Object.keys||function(i){var c=[];for(var y in i)o.call(i,y)&&c.push(y);return c},function(){var i,c=setTimeout,y=0,p=0,e=typeof setImmediate!=""+i&&setImmediate||function(u,g){return typeof MessageChannel==""+i?c:((u=new MessageChannel).port1.onmessage=function(w){w.data==""&&g()},function(w){g=w,u.port2.postMessage("")})}(),s=c.check=c.check||typeof performance!=""+i&&performance||{now:function(){return+new Date}};c.hold=c.hold||9,c.poll=c.poll||function(u){if(c.hold>=s.now()-y&&p++<3333){u();return}e(function(){y=s.now(),u()},p=0)}}(),function(){var i=setTimeout,c=i.turn=i.turn||function(g){y.push(g)==1&&p(u)},y=c.s=[],p=i.poll,e=0,s,u=function(){(s=y[e++])&&s(),(e==y.length||e==99)&&(y=c.s=y.slice(e),e=0),y.length&&p(u)}}(),function(){var i,c=setTimeout,y=c.turn;(c.each=c.each||function(p,e,s,u){u=u||9,function g(w,t,h){if(t=(w=(p||[]).splice(0,u)).length){for(var v=0;v<t&&i===(h=e(w[v]));v++);if(i===h){y(g);return}}s&&s(h)}()})()}()})(b,"./shim"),b(function(x){x.exports=function o(s,c,y){if(!s)return{to:o};var p,e=typeof c=="function",s=(this.tag||(this.tag={}))[s]||e&&(this.tag[s]={tag:s,to:o._={next:function(g){var w;(w=this.to)&&w.next(g)}}});if(e){var u={off:o.off||(o.off=function(){if(this.next===o._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=o._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:o._,next:c,the:s,on:this,as:y};return(u.back=s.last||s).to=u,s.last=u}return(s=s.to)&&p!==c&&s.next(c),s}})(b,"./onto"),b(function(x){x.exports=function(o){return o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"&&o!=1/0&&o!=-1/0&&o===o||!!o&&typeof o["#"]=="string"&&Object.keys(o).length===1&&o["#"]}})(b,"./valid"),b(function(x){b("./shim");function o(){var s=+new Date;return p<s?(c=0,p=s+o.drift):p=s+(c+=1)/y+o.drift}o.drift=0;var i=-1/0,c=0,y=999,p=i,e;o.is=function(s,u,g){var w=u&&s&&s._&&s._[">"]||g;if(w)return typeof(w=w[u])=="number"?w:i},o.ify=function(s,u,g,w,t){(s=s||{})._=s._||{},t&&(s._["#"]=t);var h=s._[">"]||(s._[">"]={});return e!==u&&u!=="_"&&(typeof g=="number"&&(h[u]=g),e!==w&&(s[u]=w)),s},x.exports=o})(b,"./state"),b(function(x){b("./shim");function o(i){var c={s:{}},y=c.s;i=i||{max:999,age:1e3*9},c.check=function(e){return y[e]?p(e):!1};var p=c.track=function(e){var s=y[e]||(y[e]={});return s.was=c.now=+new Date,c.to||(c.to=setTimeout(c.drop,i.age+9)),p.ed&&p.ed(e),s};return c.drop=function(e){c.to=null,c.now=+new Date;var s=Object.keys(y);console.STAT&&console.STAT(c.now,+new Date-c.now,"dup drop keys"),setTimeout.each(s,function(u){var g=y[u];g&&(e||i.age)>c.now-g.was||delete y[u]},0,99)},c}x.exports=o})(b,"./dup"),b(function(x){b("./onto"),x.exports=function(i,c){if(this.on){var y=(this.opt||{}).lack||9e3;if(typeof i!="function"){if(!i)return;var e=i["#"]||i,p=(this.tag||"")[e];return p?(c&&(p=this.on(e,c),clearTimeout(p.err),p.err=setTimeout(function(){p.off()},y)),!0):void 0}var e=c&&c["#"]||o(9);if(!i)return e;var s=this.on(e,i,c);return s.err=s.err||setTimeout(function(){s.off(),s.next({err:"Error: No ACK yet.",lack:!0})},y),e}};var o=String.random||function(){return Math.random().toString(36).slice(2)}})(b,"./ask"),b(function(x){function o(t){return t instanceof o?(this._={$:this}).$:this instanceof o?o.create(this._={$:this,opt:t}):new o(t)}o.is=function(t){return t instanceof o||t&&t._&&t===t._.$||!1},o.version=.202,o.chain=o.prototype,o.chain.toJSON=function(){},b("./shim"),o.valid=b("./valid"),o.state=b("./state"),o.on=b("./onto"),o.dup=b("./dup"),o.ask=b("./ask"),function(){o.create=function(r){r.root=r.root||r,r.graph=r.graph||{},r.on=r.on||o.on,r.ask=r.ask||o.ask,r.dup=r.dup||o.dup();var m=r.$.opt(r.opt);return r.once||(r.on("in",t,r),r.on("out",t,r),r.on("put",k,r),o.on("create",r),r.on("create",r)),r.once=1,m};function t(r){if(r){if(r.out===t){this.to.next(r);return}var m=this,_=m.as,A=_.at||_,T=A.$,D=A.dup,E,C=r.DBG;if((E=r["#"])||(E=r["#"]=c(9)),!D.check(E)){if(D.track(E),E=r._,r._=typeof E=="function"?E:function(){},r.$&&r.$===(r.$._||"").$||(r.$=T),r["@"]&&!r.put&&n(r),!A.ask(r["@"],r))if(C&&(C.u=+new Date),r.put){h(r);return}else r.get&&o.on.get(r,T);C&&(C.uc=+new Date),m.to.next(r),C&&(C.ua=+new Date),!(r.nts||r.NTS)&&(r.out=t,A.on("out",r),C&&(C.ue=+new Date))}}}function h(r){if(r){var m=r._||"",_=m.root=((m.$=r.$||"")._||"").root;if(r["@"]&&m.faith&&!m.miss){r.out=t,_.on("out",r);return}m.latch=_.hatch,m.match=_.hatch=[];var A=r.put,T=m.DBG=r.DBG,D=+new Date;if(N=N||D,!(A["#"]&&A["."])){T&&(T.p=D),m["#"]=r["#"],m.msg=r,m.all=0,m.stun=1;var E=Object.keys(A);console.STAT&&console.STAT(D,((T||m).pk=+new Date)-D,"put sort");var C=0,P,I,M,G,R,H,L;(function W(Y){if(P!=C){if(P=C,!(M=E[C])){console.STAT&&console.STAT(D,((T||m).pd=+new Date)-D,"put"),a(m);return}(G=A[M])?(L=G._)?M!==L["#"]?H=l+S(M)+"soul not same.":(R=L[">"])||(H=l+S(M)+"no state."):H=l+S(M)+"no meta.":H=l+S(M)+"no node.",I=Object.keys(G||{})}if(H){r.err=m.err=H,a(m);return}var at=0,q;for(Y=Y||0;Y++<9&&(q=I[at++]);)if(q!=="_"){var V=G[q],st=R[q];if(u===st){H=l+S(q)+"on"+S(M)+"no state.";break}if(!p(V)){H=l+S(q)+"on"+S(M)+"bad "+typeof V+S(V);break}v(V,q,M,st,r),++U}if((I=I.slice(at)).length){y(W);return}++C,I=null,W(Y)})()}}}o.on.put=h;function v(r,m,_,A,T){var D=T._||"",E=D.root,C=E.graph,P,I=C[_]||g,M=e(I,m,1),G=I[m],R=D.DBG;(P=console.STAT)&&(!C[_]||!G)&&(P.has=(P.has||0)+1);var H=O();if(A>H){setTimeout(function(){v(r,m,_,A,T)},(P=A-H)>j?j:P),console.STAT&&console.STAT((R||D).Hf=+new Date,P,"future");return}if(!(A<M)&&!(!D.faith&&A===M&&(r===G||d(r)<=d(G))&&!D.miss)){D.stun++;var L=T["#"]+D.all++,W={toString:function(){return L},_:D};W.toJSON=W.toString,E.dup.track(W)["#"]=T["#"],R&&(R.ph=R.ph||+new Date),E.on("put",{"#":W,"@":T["@"],put:{"#":_,".":m,":":r,">":A},ok:T.ok,_:D})}}function k(r){var m;(m=(r._||"").DBG)&&(m.pa=+new Date,m.pm=m.pm||+new Date);var _=this,A=_.as,T=A.graph,D=r._,E=r.put,C=E["#"],P=E["."],I=E[":"],M=E[">"];r["#"];var G;(G=D.msg)&&(G=G.put)&&(G=G[C])&&s(G,P,M,I,C),T[C]=s(T[C],P,M,I,C),(G=(A.next||"")[C])&&G.on("in",r),a(D),_.to.next(r)}function a(r,m){var _;if(!r.stop&&!(!r.err&&0<--r.stun)&&(r.stop=1,!!(_=r.root))){var A=r.match;A.end=1,A===_.hatch&&(!(A=r.latch)||A.end?delete _.hatch:_.hatch=A),r.hatch&&r.hatch(),setTimeout.each(r.match,function(T){T&&T()}),!(!(m=r.msg)||r.err||m.err)&&(m.out=t,r.root.on("out",m),$())}}function n(r){var m=r["@"]||"",_;if(!(_=m._)){var A=(A=r.$)&&(A=A._)&&(A=A.root)&&(A=A.dup);if(!(A=A.check(m)))return;r["@"]=A["#"]||r["@"];return}_.acks=(_.acks||0)+1,(_.err=r.err)&&(r["@"]=_["#"],a(_)),_.ok=r.ok||_.ok,!_.stop&&!_.crack&&(_.crack=_.match&&_.match.push(function(){f(_)})),f(_)}function f(r){!r||!r.root||r.stun||r.acks!==r.all||r.root.on("in",{"@":r["#"],err:r.err,ok:r.err?u:r.ok||{"":1}})}var l="Error: Invalid graph!",S=function(r){return" '"+(""+r).slice(0,9)+"...' "},d=JSON.stringify,j=2147483647,O=o.state,U=0,N,$=function(){U>999&&U/-(N-(N=+new Date))>1&&(o.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),$=function(){U=0})}}(),function(){o.on.get=function(h,v){var k=v._,a=h.get,n=a["#"],f=k.graph[n],l=a["."],S=k.next||(k.next={}),d=S[n],j=h._||{},O=j.DBG=h.DBG;if(O&&(O.g=+new Date),!f)return k.on("get",h);if(l){if((typeof l!="string"||u===f[l])&&!((d||"").next||"")[l]){k.on("get",h);return}f=s({},l,e(f,l),f[l],n)}f&&t(h,f),k.on("get",h)};function t(h,v){var k=+new Date,a=h._||{},n=a.DBG=h.DBG,f=h["#"],l=c(9),S=Object.keys(v||"").sort(),d=((v||"")._||"")["#"];S.length;var j=h.$._.root,O=v===j.graph[d];console.STAT&&console.STAT(k,((n||a).gk=+new Date)-k,"got keys"),v&&function U(){k=+new Date;for(var N=0,$,r={},m;N<9&&($=S[N++]);)s(r,$,e(v,$),v[$],d);S=S.slice(N),(m={})[d]=r,r=m;var _;O&&(_=function(){},_.ram=_.faith=!0),m=S.length,console.STAT&&console.STAT(k,-(k-(k=+new Date)),"got copied some"),n&&(n.ga=+new Date),j.on("in",{"@":f,"#":l,put:r,"%":m?l=c(9):u,$:j.$,_,DBG:n,FOO:1}),console.STAT&&console.STAT(k,+new Date-k,"got in"),m&&setTimeout.turn(U)}(),v||j.on("in",{"@":h["#"]})}o.on.get.ack=t}(),function(){o.chain.opt=function(t){t=t||{};var h=this,v=h._,k=t.peers||t;return Object.plain(t)||(t={}),Object.plain(v.opt)||(v.opt=t),typeof k=="string"&&(k=[k]),Object.plain(v.opt.peers)||(v.opt.peers={}),k instanceof Array&&(t.peers={},k.forEach(function(a){var n={};n.id=n.url=a,t.peers[a]=v.opt.peers[a]=v.opt.peers[a]||n})),i(t,function a(n){var f=this[n];if(this&&this.hasOwnProperty(n)||typeof f=="string"||Object.empty(f)){this[n]=f;return}f&&f.constructor!==Object&&!(f instanceof Array)||i(f,a)}),v.opt.from=t,o.on("opt",v),v.opt.uuid=v.opt.uuid||function(a){return o.state().toString(36).replace(".","")+String.random(a||12)},h}}();var i=function(t,h){Object.keys(t).forEach(h,t)},c=String.random,y=setTimeout.turn,p=o.valid,e=o.state.is,s=o.state.ify,u,g={},w;o.log=function(){return!o.log.off&&w.log.apply(w,arguments),[].slice.call(arguments).join(" ")},o.log.once=function(t,h,v){return(v=o.log.once)[t]=v[t]||0,v[t]++||o.log(h)},typeof window<"u"&&((window.GUN=window.Gun=o).window=window);try{typeof J<"u"&&(J.exports=o)}catch{}x.exports=o,(o.window||{}).console=(o.window||{}).console||{log:function(){}},(w=console).only=function(t,h){return w.only.i&&t===w.only.i&&w.only.i++&&(w.log.apply(w,arguments)||h)},o.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(b,"./root"),b(function(x){var o=b("./root");o.chain.back=function(y,p){var e;if(y=y||1,y===-1||y===1/0)return this._.root.$;if(y===1)return(this._.back||this._).$;var s=this,u=s._;if(typeof y=="string"&&(y=y.split(".")),y instanceof Array){var g=0,w=y.length,e=u;for(g;g<w;g++)e=(e||i)[y[g]];return c!==e?p?s:e:(e=u.back)?e.$.back(y,p):void 0}if(typeof y=="function"){for(var t,e={back:u};(e=e.back)&&c===(t=y(e,p)););return t}return typeof y=="number"?(u.back||u).$.back(y-1):this};var i={},c})(b,"./back"),b(function(x){var o=b("./root");o.chain.chain=function(a){var n=this,f=n._,l=new(a||n).constructor(n),S=l._,d;return S.root=d=f.root,S.id=++d.once,S.back=n._,S.on=o.on,S.on("in",o.on.in,S),S.on("out",o.on.out,S),l};function i(a){var n,f=this.as,l=f.back,S=f.root,d;if(a.$||(a.$=f.$),this.to.next(a),f.err){f.on("in",{put:f.put=u,$:f.$});return}if(n=a.get){if(S.pass&&(S.pass[f.id]=f),f.lex&&Object.keys(f.lex).forEach(function(j){d[j]=f.lex[j]},d=a.get=a.get||{}),n["#"]||f.soul){if(n["#"]=n["#"]||f.soul,a["#"]||(a["#"]=g(9)),l=S.$.get(n["#"])._,n=n["."]){if(t(l.put,n)&&(d=l.ask&&l.ask[n],(l.ask||(l.ask={}))[n]=l.$.get(n)._,l.on("in",{get:n,put:{"#":l.soul,".":n,":":l.put[n],">":v(S.graph[l.soul],n)}}),d))return}else{if(d=l.ask&&l.ask[""],(l.ask||(l.ask={}))[""]=l,u!==l.put&&(l.on("in",l),d))return;a.$=l.$}return S.ask(e,a),S.on("in",a)}if(n["."])return f.get?(a={get:{".":f.get},$:f.$},(l.ask||(l.ask={}))[f.get]=a.$._,l.on("out",a)):(a={get:f.lex?a.get:{},$:f.$},l.on("out",a));if((f.ask||(f.ask={}))[""]=f,f.get)return n["."]=f.get,(l.ask||(l.ask={}))[f.get]=a.$._,l.on("out",a)}return l.on("out",a)}o.on.out=i;function c(a,n){n=n||this.as;var f=n.root,l=a.$||(a.$=n.$),S=(l||"")._||s,d=a.put||"",j=d["#"],O=d["."],U=u!==d["="]?d["="]:d[":"],N=d[">"]||-1/0,$;if(u!==a.put&&(u===d["#"]||u===d["."]||u===d[":"]&&u===d["="]||u===d[">"])){if(!w(d)){if(!(j=((d||"")._||"")["#"])){console.log("chain not yet supported for",d,"...",a,n);return}return l=n.root.$.get(j),setTimeout.each(Object.keys(d).sort(),function(r){r=="_"||u===(N=v(d,r))||n.on("in",{$:l,put:{"#":j,".":r,"=":d[r],">":N},VIA:a})})}n.on("in",{$:S.back.$,put:{"#":j=S.back.soul,".":O=S.has||S.get,"=":d,">":v(S.back.put,O)},via:a});return}(a.seen||"")[n.id]||((a.seen||(a.seen=function(){}))[n.id]=n,n!==S&&(Object.keys(a).forEach(function(r){d[r]=a[r]},d={}),d.get=n.get||d.get,!n.soul&&!n.has?d.$$$=d.$$$||n.$:S.soul&&(d.$=n.$,d.$$=d.$$||S.$),a=d),p(a,n),(n.soul||a.$$)&&N>=v(f.graph[j],O)&&((d=f.$.get(j)._).put=k(d.put,O,N,U,j)),!S.soul&&N>=v(f.graph[j],O)&&($=(f.$.get(j)._.next||"")[O])&&($.put=U,typeof(d=w(U))=="string"&&($.put=f.$.get(d)._.put||U)),this.to&&this.to.next(a),n.any&&setTimeout.each(Object.keys(n.any),function(r){(r=n.any[r])&&r(a)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(r){(r=n.echo[r])&&r.on("in",a)},0,99),((a.$$||"")._||S).soul&&($=n.next)&&($=$[O])&&(d={},Object.keys(a).forEach(function(r){d[r]=a[r]}),d.$=(a.$$||a.$).get(d.get=O),delete d.$$,delete d.$$$,$.on("in",d)),y(a,n))}o.on.in=c;function y(a,n){if(n=n||this.as||a.$._,!(a.$$&&this!==o.on)&&!(!a.put||n.soul)){var f=a.put||"",l=f["="]||f[":"],S,d=n.root,j=d.$.get(f["#"]).get(f["."])._;if(typeof(l=w(l))!="string"){this===o.on&&((j.echo||(j.echo={}))[n.id]=n);return}if(!((j.echo||(j.echo={}))[n.id]&&!(d.pass||"")[n.id])){if(S=d.pass){if(S[l+n.id])return;S[l+n.id]=1}(j.echo||(j.echo={}))[n.id]=n,n.has&&(n.link=l);var O=d.$.get(j.link=l)._;(O.echo||(O.echo={}))[j.id]=j;var S=n.ask||"";(S[""]||n.lex)&&O.on("out",{get:{"#":l}}),setTimeout.each(Object.keys(S),function(N,$){!N||!($=S[N])||$.on("out",{get:{"#":l,".":N}})},0,99)}}}o.on.link=y;function p(a,n){var f=a.put||"",l=u!==f["="]?f["="]:f[":"],S=n.root,d,j;if(u===l){if(n.soul&&u!==n.put||(j=(a.$$||a.$||"")._||"",a["@"]&&(u!==j.put||u!==n.put)))return;(d=n.link||a.linked)&&delete(S.$.get(d)._.echo||"")[n.id],n.has&&(n.link=null),n.put=u,setTimeout.each(Object.keys(n.next||""),function(O,U){(U=n.next[O])&&(d&&delete(S.$.get(d).get(O)._.echo||"")[U.id],U.on("in",{get:O,put:u,$:U.$}))},0,99);return}n.soul||a.$$||(d=w(l),j=a.$._||"",!((d===j.link||n.has&&!j.link)&&!((S.pass||"")[n.id]&&typeof d!="string"))&&(delete(j.echo||"")[n.id],p({get:n.get,put:u,$:a.$,linked:a.linked=a.linked||j.link},n)))}o.on.unlink=p;function e(a,n){var f=this.as,l=f.$._;l.root;var S=f.get||"",d=(a.put||"")[S["#"]]||"";if(!a.put||typeof S["."]=="string"&&u===d[S["."]]){if(u!==l.put||!l.soul&&!l.has)return;l.ack=(l.ack||0)+1,l.on("in",{get:l.get,put:l.put=u,$:l.$,"@":a["@"]});return}(a._||{}).miss=1,o.on.put(a)}var s={},u,g=String.random,w=o.valid,t=function(a,n){return a&&Object.prototype.hasOwnProperty.call(a,n)},h=o.state,v=h.is,k=h.ify})(b,"./chain"),b(function(x){var o=b("./root");o.chain.get=function(u,g,w){var t,h;if(typeof u=="string"){if(u.length==0)return(t=this.chain())._.err={err:o.log("0 length key!",u)},g&&g.call(t,t._.err),t;var v=this,k=v._,a=k.next||p;(t=a[u])||(t=u&&i(u,v)),t=t&&t.$}else if(typeof u=="function"){let d=function(O,U,N){if(!d.stun&&!((T=f.pass)&&!T[l])){var $=O.$._,r=(O.$$||"")._,m=(r||$).put,_=!$.has&&!$.soul,A={},T;if((_||s===m)&&(m=s===((T=O.put)||"")["="]?s===(T||"")[":"]?T:T[":"]:T["="]),typeof(T=o.valid(m))=="string"&&(m=s===(T=f.$.get(T)._.put)?n.not?s:m:T),!(n.not&&s===m)){if(s===n.stun){if((T=f.stun)&&T.on&&(k.$.back(function(D){if(T.on(""+D.id,A={}),(A.run||0)<d.id)return A}),!A.run&&T.on(""+$.id,A={}),!A.run&&r&&T.on(""+r.id,A={}),d.id>A.run&&((!A.stun||A.stun.end)&&(A.stun=T.on("stun"),A.stun=A.stun&&A.stun.last),A.stun&&!A.stun.end))){(A.stun.add||(A.stun.add={}))[l]=function(){d(O,U,1)};return}if(s===m&&(N=0),(T=f.hatch)&&!T.end&&s===n.hatch&&!N){if(S[$.$._.id])return;S[$.$._.id]=1,T.push(function(){d(O,U,1)});return}S={}}if(f.pass){if(f.pass[l+$.id])return;f.pass[l+$.id]=1}if(n.on){n.ok.call($.$,m,$.get,O,U||d);return}if(n.v2020){n.ok(O,U||d);return}Object.keys(O).forEach(function(D){T[D]=O[D]},T={}),O=T,O.put=m,n.ok.call(n.as,O,U||d)}}};if(g===!0)return c(this,u,g,w),this;t=this;var k=t._,n=g||{},f=k.root,l;n.at=k,n.ok=u;var S={};return d.at=k,(k.any||(k.any={}))[l=String.random(7)]=d,d.off=function(){d.stun=1,k.any&&delete k.any[l]},d.rid=y,d.id=n.run||++f.once,h=f.pass,(f.pass={})[l]=1,n.out=n.out||{get:{}},k.on("out",n.out),f.pass=h,t}else{if(typeof u=="number")return this.get(""+u,g,w);if(typeof(h=e(u))=="string")return this.get(h,g,w);(h=this.get.next)&&(t=h(this,u))}return t?(g&&typeof g=="function"&&t.get(g,w),t):((t=this.chain())._.err={err:o.log("Invalid get request!",u)},g&&g.call(t,t._.err),t)};function i(u,g){var w=g._,t=w.next,h=g.chain(),v=h._;return t||(t=w.next={}),t[v.get=u]=v,g===w.root.$?v.soul=u:(w.soul||w.has)&&(v.has=u),v}function c(u,g,w,t){var h=u._,v=0,k;return(k=h.soul||h.link)?g(k,t,h):h.jam?h.jam.push([g,t]):(h.jam=[[g,t]],u.get(function(a,n){if(!(s===a.put&&!h.root.opt.super&&(k=Object.keys(h.root.opt.peers).length)&&++v<=k)){n.rid(a);var f=(f=a.$)&&f._||{},l=0,S;for(k=h.jam,delete h.jam;S=k[l++];){var d=S[0];S=S[1],d&&d(f.link||f.soul||o.valid(a.put)||((a.put||{})._||{})["#"],S,a,n)}}},{out:{get:{".":!0}}}),u)}function y(u){var g=this.at||this.on;if(!u||g.soul||g.has)return this.off();if(u=(u=(u=u.$||u)._||u).id){g.map;var w;if((w=this.seen||(this.seen={}))[u])return!0;w[u]=!0}}var p={},e=o.valid,s})(b,"./get"),b(function(x){var o=b("./root");o.chain.put=function(t,h,v){var k=this,a=k._,n=a.root;v=v||{},v.root=a.root,v.run||(v.run=n.once),i(v,a.id),v.ack=v.ack||h,v.via=v.via||k,v.data=v.data||t,v.soul||(v.soul=a.soul||typeof h=="string"&&h);var f=v.state=v.state||o.state();return typeof t=="function"?(t(function(l){v.data=l,k.put(e,e,v)}),k):v.soul?(v.$=n.$.get(v.soul),v.todo=[{it:v.data,ref:v.$}],v.turn=v.turn||u,v.ran=v.ran||c,function l(){var S=v.todo,d=S.pop(),j=d.it;d.ref&&d.ref._.id;var O,U,N,$,r;if(i(v,d.ref),($=d.todo)&&(U=$.pop(),j=j[U],$.length&&S.push(d)),U&&(S.path||(S.path=[])).push(U),!(O=g(j))&&!(r=o.is(j))){if(!Object.plain(j)){c.err(v,"Invalid data: "+p(j)+" at "+(v.via.back(function(T){T.get&&$.push(T.get)},$=[])||$.join("."))+"."+(S.path||[]).join("."));return}for(var m=v.seen||(v.seen=[]),_=m.length;_--;)if(j===($=m[_]).it){O=j=$.link;break}}if(U&&O)d.node=w(d.node,U,f,j);else{let T=function(D,E){var C=N.link["#"];E&&(E.off(),E.rid(D));var P=C||D.soul||($=(D.$$||D.$)._||"").soul||$.link||(($=$.put||"")._||"")["#"]||$["#"]||(($=D.put||"")&&D.$$?$["#"]:($["="]||$[":"]||"")["#"]);if(!C&&i(v,D.$),!P&&!d.link["#"]){(d.wait||(d.wait=[])).push(function(){T(D,E)});return}P||(P=[],(D.$$||D.$).back(function(I){if($=I.soul||I.link)return P.push($);P.push(I.get)}),P=P.reverse().join("/")),N.link["#"]=P,!r&&(((v.graph||(v.graph={}))[P]=N.node||(N.node={_:{}}))._["#"]=P),delete v.wait[A],N.wait&&setTimeout.each(N.wait,function(I){I&&I()}),v.ran(v)};if(!v.seen){c.err(v,"Data at root of graph must be a node (an object).");return}v.seen.push(N={it:j,link:{},todo:r?[]:Object.keys(j).sort().reverse(),path:(S.path||[]).slice(),up:d}),d.node=w(d.node,U,f,N.link),!r&&N.todo.length&&S.push(N);var A=v.seen.length;(v.wait||(v.wait={}))[A]="",$=(N.ref=r?j:U?d.ref.get(U):d.ref)._,($=j&&(j._||"")["#"]||$.soul||$.link)?T({soul:$}):N.ref.get(T,{run:v.run,v2020:1,out:{get:{".":" "}}})}if(!S.length)return v.ran(v);v.turn(l)}(),k):(y(v),k)};function i(t,h){if(h){h=(h._||"").id||h;var v=t.root.stun||(t.root.stun={on:o.on}),k={},a;t.stun||(t.stun=v.on("stun",function(){})),(a=v.on(""+h))&&a.the.last.next(k),!(k.run>=t.run)&&v.on(""+h,function(n){if(t.stun.end){this.off(),this.to.next(n);return}n.run=n.run||t.run,n.stun=n.stun||t.stun})}}function c(t){if(t.err){c.end(t.stun,t.root);return}if(!(t.todo.length||t.end||!Object.empty(t.wait))){t.end=1;var h=t.$.back(-1)._,v=h.root,k=h.ask(function(l){v.on("ack",l),l.err&&!l.lack&&o.log(l),++a>(t.acks||0)&&this.off(),t.ack&&t.ack(l,this)},t.opt),a=0,n=t.stun,f;(f=function(){n&&(c.end(n,v),setTimeout.each(Object.keys(n=n.add||""),function(l){(l=n[l])&&l()}))}).hatch=f,t.ack&&!t.ok&&(t.ok=t.acks||9),t.via._.on("out",{put:t.out=t.graph,ok:t.ok&&{"@":t.ok+1},opt:t.opt,"#":k,_:f})}}c.end=function(t,h){t.end=s,t.the.to===t&&t===t.the.last&&delete h.stun,t.off()},c.err=function(t,h){(t.ack||s).call(t,t.out={err:t.err=o.log(h)}),t.ran(t)};function y(t){var h=t.via._,v;t.via=t.via.back(function(k){if(k.soul||!k.get)return k.$;v=t.data,(t.data={})[k.get]=v}),(!t.via||!t.via._.soul)&&(t.via=h.root.$.get(((t.data||"")._||"")["#"]||h.$.back("opt.uuid")())),t.via.put(t.data,t.ack,t)}function p(t,h){return t&&(h=t.constructor)&&h.name||typeof t}var e,s=function(){},u=setTimeout.turn,g=o.valid,w=o.state.ify})(b,"./put"),b(function(x){var o=b("./root");b("./chain"),b("./back"),b("./put"),b("./get"),x.exports=o})(b,"./index"),b(function(x){var o=b("./index");o.chain.on=function(y,p,e,s){var u=this,g=u._;g.root;var w;if(typeof y=="string")return p?(w=g.on(y,p,e||g,s),e&&e.$&&(e.subs||(e.subs=[])).push(w),u):g.on(y);var t=p;return(t=t===!0?{change:!0}:t||{}).not=1,t.on=1,u.get(y,t),u},o.chain.once=function(y,p){if(p=p||{},!y)return i(this);var e=this,s=e._,u=s.root;s.put;var g=String.random(7),w;return e.get(function(t,h,v,k){var a=this,n=a._,f=n.one||(n.one={});if(k.stun||f[g]==="")return;if((w=o.valid(t))===!0){l();return}if(typeof w=="string")return;clearTimeout((s.one||"")[g]),clearTimeout(f[g]),f[g]=setTimeout(l,p.wait||99);function l(S){if(!n.has&&!n.soul&&(n={put:t,get:h}),c===(w=n.put)&&(w=((v.$$||"")._||"").put),typeof o.valid(w)=="string"&&(w=u.$.get(w)._.put,w===c&&!S)){f[g]=setTimeout(function(){l(1)},p.wait||99);return}k.stun||f[g]!==""&&(f[g]="",(s.soul||s.has)&&k.off(),y.call(a,w,n.get),clearTimeout(f[g]))}},{on:1}),e};function i(y,p,e){return o.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(e=y.chain())._.nix=y.once(function(s,u){e._.on("in",this._)}),e._.lex=y._.lex,e}o.chain.off=function(){var y=this,p=y._,e,s=p.back;if(s)return p.ack=0,(e=s.next)&&e[p.get]&&delete e[p.get],(e=s.any)&&(delete s.any,s.any={}),(e=s.ask)&&delete e[p.get],(e=s.put)&&delete e[p.get],(e=p.soul)&&delete s.root.graph[e],(e=p.map)&&Object.keys(e).forEach(function(u,g){g=e[u],g.link&&s.root.$.get(g.link).off()}),(e=p.next)&&Object.keys(e).forEach(function(u,g){g=e[u],g.$.off()}),p.on("off",{}),y};var c})(b,"./on"),b(function(x){var o=b("./index"),i=o.chain.get.next;o.chain.get.next=function(e,s){var u;return Object.plain(s)?(u=((u=s["#"])||"")["="]||u)?e.get(u):((u=e.chain()._).lex=s,e.on("in",function(g){String.match(g.get||(g.put||"")["."],s["."]||s["#"]||s)&&u.on("in",g),this.to.next(g)}),u.$):(i||y)(e,s)},o.chain.map=function(e,s,u){var g=this,w=g._,t,h;return Object.plain(e)&&(t=e["."]?e:{".":e},e=p),e?(o.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),h=g.chain(),g.map().on(function(v,k,a,n){var f=(e||y).call(this,v,k,a,n);if(p!==f){if(v===f)return h._.on("in",a);if(o.is(f))return h._.on("in",f._);var l={};Object.keys(a.put).forEach(function(S){l[S]=a.put[S]},l),l["="]=f,h._.on("in",{get:k,put:l})}}),h):((h=w.each)||((w.each=h=g.chain())._.lex=t||h._.lex||w.lex,h._.nix=g.back("nix"),g.on("in",c,h._)),h)};function c(e){this.to.next(e);var s=this.as,u=e.$,g=u._,w=e.put,t;!g.soul&&!e.$$||(t=s.lex)&&!String.match(e.get||(w||"")["."],t["."]||t["#"]||t)||o.on.link(e,s)}var y=function(){},p})(b,"./map"),b(function(x){var o=b("./index");o.chain.set=function(i,c,y){var p=this,e=p.back(-1),s,u;return c=c||function(){},y=y||{},y.item=y.item||i,(s=((i||"")._||"")["#"])&&((i={})["#"]=s),typeof(u=o.valid(i))=="string"?p.get(s=u).put(i,c,y):o.is(i)?(p.put(function(g){i.get(function(w,t,h){if(!w)return c.call(p,{err:o.log('Only a node can be linked! Not "'+h.put+'"!')});(u={})[w]={"#":w},g(u)},!0)}),i):(Object.plain(i)&&(i=e.get(s=p.back("opt.uuid")()).put(i)),p.get(s||e.back("opt.uuid")(7)).put(i,c,y))}})(b,"./set"),b(function(x){b("./shim");var o=function(){},i=JSON.parseAsync||function(e,s,u){var g,w=+new Date;try{s(g,JSON.parse(e,u),c.sucks(+new Date-w))}catch(t){s(t)}},c=JSON.stringifyAsync||function(e,s,u,g){var w,t=+new Date;try{s(w,JSON.stringify(e,u,g),c.sucks(+new Date-t))}catch(h){s(h)}};c.sucks=function(e){e>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),c.sucks=o)};function y(e){var s=function(){},u=e.opt||{};u.log=u.log||console.log,u.gap=u.gap||u.wait||0,u.max=u.max||(u.memory?u.memory*999*999:3e8)*.3,u.pack=u.pack||u.max*.01*.01,u.puff=u.puff||9;var g=setTimeout.turn||setTimeout,w=e.dup,t=w.check,h=w.track,v=s.hear=function(n,f){if(n){if(u.max<=n.length)return s.say({dam:"!",err:"Message too big!"},f);s===this&&(v.d+=n.length||0,++v.c);var l=f.SH=+new Date,S=n[0],d;if(S==="["){i(n,function(j,O){if(j||!O)return s.say({dam:"!",err:"DAM JSON parse error."},f);console.STAT&&console.STAT(+new Date,O.length,"# on hear batch");var U=u.puff;(function N(){for(var $=+new Date,r=0,m;r<U&&(m=O[r++]);)s.hear(m,f);O=O.slice(r),console.STAT&&console.STAT($,+new Date-$,"hear loop"),k(f),O.length&&g(N,0)})()}),n="";return}if(S==="{"||(n["#"]||Object.plain(n))&&(d=n)){if(d)return v.one(d,f,l);i(n,function(j,O){if(j||!O)return s.say({dam:"!",err:"DAM JSON parse error."},f);v.one(O,f,l)});return}}};v.one=function(n,f,l){var S,d,j,O,U;if(n.DBG&&(n.DBG=U={DBG:n.DBG}),U&&(U.h=l),U&&(U.hp=+new Date),(S=n["#"])||(S=n["#"]=String.random(9)),!(j=t(S))&&(d=n["##"],!(d&&(j=n["@"]||n.get&&S)&&w.check(O=j+d)))){if((n._=function(){}).via=s.leap=f,(j=n["><"])&&typeof j=="string"&&j.slice(0,99).split(",").forEach(function($){this[$]=1},n._.yo={}),j=n.dam){(j=s.hear[j])&&j(n,f,e),h(S);return}(j=n.ok)&&(n._.near=j["/"]);var l=+new Date;U&&(U.is=l),f.SI=S,h.ed=function($){S===$&&(h.ed=0,($=w.s[S])&&($.via=f,n.get&&($.it=n)))},e.on("in",s.last=n),U&&(U.hd=+new Date),console.STAT&&console.STAT(l,+new Date-l,n.get?"msg get":n.put?"msg put":"msg"),h(S),O&&h(O),s.leap=s.last=null}},v.c=v.d=0,function(){var n=0,f;s.hash=function(d,j){var O,U,N,$=+new Date;c(d.put,function r(m,_){var A=(U||(U=N=_||"")).slice(0,32768);if(O=String.hash(A,O),U=U.slice(32768),U){g(r,0);return}console.STAT&&console.STAT($,+new Date-$,"say json+hash"),d._.$put=N,d["##"]=O,s.say(d,j),delete d._.$put},l)};function l(d,j){var O;return j instanceof Object?(Object.keys(j).sort().forEach(S,{to:O={},on:j}),O):j}function S(d){this.to[d]=this.on[d]}s.say=function(d,j){var O;if((O=this)&&(O=O.to)&&O.next&&O.next(d),!d)return!1;var U,N,$,r=d["@"],m=d._||(d._=function(){}),_=d.DBG,A=+new Date;if(m.y=m.y||A,j||_&&(_.y=A),(U=d["#"])||(U=d["#"]=String.random(9)),!f&&h(U),!(N=d["##"])&&p!==d.put&&!m.via&&r){s.hash(d,j);return}if(!j&&r&&(j=(O=w.s[r])&&(O.via||(O=O.it)&&(O=O._)&&O.via)||(O=s.last)&&r===O["#"]&&s.leap),!j&&r)return w.s[r]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(r&&!d.put&&!N&&((w.s[r]||"").it||"")["##"])return!1;if(!j&&s.way)return s.way(d);if(_&&(_.yh=+new Date),!($=m.raw)){s.raw(d,j);return}if(_&&(_.yr=+new Date),!j||!j.id){if(!Object.plain(j||u.peers))return!1;var A=+new Date;u.puff;var T=u.peers,D=Object.keys(j||u.peers||{});console.STAT&&console.STAT(A,+new Date-A,"peer keys"),function P(){var I=+new Date;f=1;var M=m.raw;m.raw=$;for(var G=0,R;G<9&&(R=(D||"")[G++]);)(R=T[R]||(j||"")[R])&&s.say(d,R);m.raw=M,f=0,D=D.slice(G),console.STAT&&console.STAT(I,+new Date-I,"say loop"),D.length&&(g(P,0),r&&h(r))}();return}if(!j.wire&&s.wire&&s.wire(j),U!==j.last){if(j.last=U,j===m.via||(O=m.yo)&&(O[j.url]||O[j.pid]||O[j.id]))return!1;if(console.STAT&&console.STAT(A,((_||m).yp=+new Date)-(m.y||A),"say prep"),!f&&r&&h(r),j.batch){if(j.tail=(O=j.tail||0)+$.length,j.tail<=u.pack){j.batch+=(O?",":"")+$;return}k(j)}j.batch="[";var E=+new Date;setTimeout(function(){console.STAT&&console.STAT(E,+new Date-E,"0ms TO"),k(j)},u.gap),a($,j),console.STAT&&r===j.SI&&console.STAT(A,+new Date-j.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(d,j){if(!d)return"";var O=d._||{},U,N;if(N=O.raw)return N;if(typeof d=="string")return d;var $=d["##"],r=d["@"];if($&&r){if(!O.via&&t(r+$))return!1;if(N=(w.s[r]||"").it){if($===N["##"])return!1;N["##"]||(N["##"]=$)}}if(!d.dam&&!d["@"]){var m=0,_=[];N=u.peers;for(var A in N){var T=N[A];if(_.push(T.url||T.pid||T.id),++m>6)break}m>1&&(d["><"]=_.join())}if(d.put&&(N=d.ok)&&(d.ok={"@":(N["@"]||1)-1,"/":N["/"]==d._.near?s.near:N["/"]}),U=O.$put){N={},Object.keys(d).forEach(function(E){N[E]=d[E]}),N.put=":])([:",c(N,function(E,C){if(!E){var P=+new Date;N=C.indexOf('"put":":])([:"'),D(p,C=C.slice(0,N+6)+U+C.slice(N+14)),console.STAT&&console.STAT(P,+new Date-P,"say slice")}});return}c(d,D);function D(E,C){E||(O.raw=C,s.say(d,j))}}}();function k(n){var f=n.batch,l=typeof f=="string";if(l&&(f+="]"),n.batch=n.tail=null,!!f&&!(l?3>f.length:!f.length)){if(!l)try{f=f.length===1?f[0]:JSON.stringify(f)}catch(S){return u.log("DAM JSON stringify error",S)}f&&a(f,n)}}function a(n,f){try{var l=f.wire;f.say?f.say(n):l.send&&l.send(n),s.say.d+=n.length||0,++s.say.c}catch{(f.queue=f.queue||[]).push(n)}}return s.near=0,s.hi=function(n){var f=n.wire,l;if(!f){s.wire(n.length&&{url:n,id:n}||n);return}n.id?u.peers[n.url||n.id]=n:(l=n.id=n.id||n.url||String.random(9),s.say({dam:"?",pid:e.opt.pid},u.peers[l]=n),delete w.s[n.last]),n.met||(s.near++,n.met=+new Date,e.on("hi",n)),l=n.queue,n.queue=[],setTimeout.each(l||[],function(S){a(S,n)},0,9)},s.bye=function(n){n.met&&--s.near,delete n.met,e.on("bye",n);var f=+new Date;f=f-(n.met||f),s.bye.time=((s.bye.time||f)+f)/2},s.hear["!"]=function(n,f){u.log("Error:",n.err)},s.hear["?"]=function(n,f){n.pid&&(f.pid||(f.pid=n.pid),n["@"])||(s.say({dam:"?",pid:u.pid,"@":n["#"]},f),delete w.s[f.last])},s.hear.mob=function(n,f){if(n.peers){var l=Object.keys(n.peers),S=l[Math.random()*l.length>>0];S&&(s.bye(f),s.hi(S))}},e.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",s.say)}),e.on("bye",function(n,f){n=u.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(f=n.wire)&&f.close&&f.close(),delete u.peers[n.id],n.wire=null}),e.on("bye",function(n,f){this.to.next(n),(f=console.STAT)&&(f.peers=s.near),(f=n.url)&&setTimeout(function(){},u.lack||9e3)}),e.on("hi",function(n,f){if(this.to.next(n),(f=console.STAT)&&(f.peers=s.near),!u.super){var l=Object.keys(e.next||"");l.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(l,function(S){var d=e.next[S];if(u.super||(d.ask||"")[""]){s.say({get:{"#":S}},n);return}setTimeout.each(Object.keys(d.ask||""),function(j){j&&s.say({"##":String.hash((e.graph[S]||"")[j]),get:{"#":S,".":j}},n)})})}}),s}var p;try{x.exports=y}catch{}})(b,"./mesh"),b(function(x){var o=b("./index");o.Mesh=b("./mesh"),o.on("opt",function(c){if(this.to.next(c),c.once)return;var y=c.opt;if(y.WebSocket===!1)return;var p=o.window||{},e=y.WebSocket||p.WebSocket||p.webkitWebSocket||p.mozWebSocket;if(!e)return;y.WebSocket=e;var s=y.mesh=y.mesh||o.Mesh(c);s.wire||y.wire,s.wire=y.wire=u;function u(h){try{if(!h||!h.url)return k&&k(h);var v=h.url.replace(/^http/,"ws"),k=h.wire=new y.WebSocket(v);return k.onclose=function(){w(h),y.mesh.bye(h)},k.onerror=function(a){w(h)},k.onopen=function(){y.mesh.hi(h)},k.onmessage=function(a){a&&y.mesh.hear(a.data||a,h)},k}catch{y.mesh.bye(h)}}setTimeout(function(){!y.super&&c.on("out",{dam:"hi"})},1);var g=2*999;function w(h){clearTimeout(h.defer),y.peers[h.url]&&(t&&h.retry<=0||(h.retry=(h.retry||y.retry+1||60)-(-h.tried+(h.tried=+new Date)<g*4?1:0),h.defer=setTimeout(function v(){if(t&&t.hidden)return setTimeout(v,g);u(h)},g)))}var t=""+i!=typeof document&&document});var i})(b,"./websocket"),b(function(x){if(!(typeof Gun>"u")){var o=function(){},i;try{i=(Gun.window||o).localStorage}catch{}i||(Gun.log("Warning: No localStorage exists to persist data to!"),i={setItem:function(y,p){this[y]=p},removeItem:function(y){delete this[y]},getItem:function(y){return this[y]}});var c=JSON.stringifyAsync||function(y,p,e,s){var u;try{p(u,JSON.stringify(y,e,s))}catch(g){p(g)}};Gun.on("create",function y(p){this.to.next(p);var e=p.opt;p.graph;var s=[],u,g,w,t;if(e.localStorage===!1)return;e.prefix=e.file||"gun/";try{u=y[e.prefix]=y[e.prefix]||JSON.parse(w=i.getItem(e.prefix))||{}}catch{u=y[e.prefix]={}}w=(w||"").length,p.on("get",function(v){this.to.next(v);var k=v.get,a,n,f,l;!k||!(a=k["#"])||(n=u[a]||l,n&&(f=k["."])&&!Object.plain(f)&&(n=Gun.state.ify({},f,Gun.state.is(n,f),n[f],a)),Gun.on.get.ack(v,n))}),p.on("put",function(v){this.to.next(v);var k=v.put,a=k["#"],n=k["."],f=v["#"],l=v.ok||"";if(u[a]=Gun.state.ify(u[a],n,k[">"],k[":"],a),t&&w>4999880){p.on("in",{"@":f,err:"localStorage max!"});return}!v["@"]&&(!v._.via||Math.random()<l["@"]/l["/"])&&s.push(f),!g&&(g=setTimeout(h,9+w/333))});function h(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(h,99);return}var v=s;clearTimeout(g),g=!1,s=[],c(u,function(k,a){try{!k&&i.setItem(e.prefix,a)}catch(n){k=t=n||"localStorage failure"}k&&(Gun.log(k+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),p.on("localStorage:error",{err:k,get:e.prefix,put:u})),w=a.length,setTimeout.each(v,function(n){p.on("in",{"@":n,err:k,ok:0})},0,99)})}})}})(b,"./localStorage")})(),function(){var b;if(""+b!=typeof Gun){var J=function(r){console.warn("Warning! Deprecated internal utility will break in next version:",r)},x=Gun;x.fn=x.fn||{is:function(r){return J("fn"),!!r&&typeof r=="function"}},x.bi=x.bi||{is:function(r){return J("bi"),r instanceof Boolean||typeof r=="boolean"}},x.num=x.num||{is:function(r){return J("num"),!o(r)&&(r-parseFloat(r)+1>=0||r===1/0||r===-1/0)}},x.text=x.text||{is:function(r){return J("text"),typeof r=="string"}},x.text.ify=x.text.ify||function(r){return J("text.ify"),x.text.is(r)?r:typeof JSON<"u"?JSON.stringify(r):r&&r.toString?r.toString():r},x.text.random=x.text.random||function(r,m){J("text.random");var _="";for(r=r||24,m=m||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";r>0;)_+=m.charAt(Math.floor(Math.random()*m.length)),r--;return _},x.text.match=x.text.match||function(r,m){var _,A;return J("text.match"),typeof r!="string"?!1:(typeof m=="string"&&(m={"=":m}),m=m||{},_=m["="]||m["*"]||m[">"]||m["<"],r===_?!0:A!==m["="]?!1:(_=m["*"]||m[">"]||m["<"],r.slice(0,(_||"").length)===_?!0:A!==m["*"]?!1:A!==m[">"]&&A!==m["<"]?r>=m[">"]&&r<=m["<"]:A!==m[">"]&&r>=m[">"]||A!==m["<"]&&r<=m["<"]))},x.text.hash=x.text.hash||function(r,m){if(J("text.hash"),typeof r=="string"){if(m=m||0,!r.length)return m;for(var _=0,A=r.length,T;_<A;++_)T=r.charCodeAt(_),m=(m<<5)-m+T,m|=0;return m}},x.list=x.list||{is:function(r){return J("list"),r instanceof Array}},x.list.slit=x.list.slit||Array.prototype.slice,x.list.sort=x.list.sort||function(r){return J("list.sort"),function(m,_){return!m||!_?0:(m=m[r],_=_[r],m<_?-1:m>_?1:0)}},x.list.map=x.list.map||function(r,m,_){return J("list.map"),U(r,m,_)},x.list.index=1,x.obj=x.boj||{is:function(r){return J("obj"),r?r instanceof Object&&r.constructor===Object||Object.prototype.toString.call(r).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},x.obj.put=x.obj.put||function(r,m,_){return J("obj.put"),(r||{})[m]=_,r},x.obj.has=x.obj.has||function(r,m){return J("obj.has"),r&&Object.prototype.hasOwnProperty.call(r,m)},x.obj.del=x.obj.del||function(r,m){if(J("obj.del"),!!r)return r[m]=null,delete r[m],r},x.obj.as=x.obj.as||function(r,m,_,A){return J("obj.as"),r[m]=r[m]||(A===_?{}:_)},x.obj.ify=x.obj.ify||function(r){if(J("obj.ify"),l(r))return r;try{r=JSON.parse(r)}catch{r={}}return r},function(){var r;function m(_,A){d(this,A)&&r!==this[A]||(this[A]=_)}x.obj.to=x.obj.to||function(_,A){return J("obj.to"),A=A||{},U(_,m,A),A}}(),x.obj.copy=x.obj.copy||function(r){return J("obj.copy"),r&&JSON.parse(JSON.stringify(r))},function(){function r(m,_){var A=this.n,T;if(!(A&&(_===A||l(A)&&d(A,_)))&&T!==_)return!0}x.obj.empty=x.obj.empty||function(m,_){return J("obj.empty"),m?!U(m,r,{n:_}):!0}}(),function(){function r(A,T){if(arguments.length===2){r.r=r.r||{},r.r[A]=T;return}r.r=r.r||[],r.r.push(A)}var m=Object.keys,_;Object.keys=Object.keys||function(A){return _(A,function(T,D,E){E(D)})},x.obj.map=_=x.obj.map||function(A,T,D){J("obj.map");var E,C=0,P,I,M,G,R=typeof T=="function";if(r.r=E,m&&l(A)&&(M=m(A),G=!0),D=D||{},o(A)||M)for(P=(M||A).length;C<P;C++){var H=C+x.list.index;if(R){if(I=G?T.call(D,A[M[C]],M[C],r):T.call(D,A[C],H,r),I!==E)return I}else if(T===A[G?M[C]:C])return M?M[C]:H}else for(C in A)if(R){if(d(A,C)&&(I=D?T.call(D,A[C],C,r):T(A[C],C,r),I!==E))return I}else if(T===A[C])return C;return R?r.r:x.list.index?0:-1}}(),x.time=x.time||{},x.time.is=x.time.is||function(r){return J("time"),r?r instanceof Date:+new Date().getTime()};var n=x.fn.is,o=x.list.is,f=x.obj,l=f.is,d=f.has,U=f.map,i={};i.is=function(r){return J("val.is"),r===b?!1:r===null?!0:r===1/0?!1:p(r)||y(r)||h(r)?!0:i.link.is(r)||!1},i.link=i.rel={_:"#"},function(){i.link.is=function(m){if(J("val.link.is"),m&&m[c]&&!m._&&l(m)){var _={};if(U(m,r,_),_.id)return _.id}return!1};function r(m,_){var A=this;if(A.id)return A.id=!1;if(_==c&&p(m))A.id=m;else return A.id=!1}}(),i.link.ify=function(r){return J("val.link.ify"),O({},c,r)},x.obj.has._=".";var c=i.link._,b,y=x.bi.is,h=x.num.is,p=x.text.is,f=x.obj,l=f.is,O=f.put,U=f.map;x.val=x.val||i;var e={_:"_"};e.soul=function(r,m){return J("node.soul"),r&&r._&&r._[m||g]},e.soul.ify=function(r,m){return J("node.soul.ify"),m=typeof m=="string"?{soul:m}:m||{},r=r||{},r._=r._||{},r._[g]=m.soul||r._[g]||u(),r},e.soul._=i.link._,function(){e.is=function(m,_,A){J("node.is");var T;return l(m)&&(T=e.soul(m))?!U(m,r,{as:A,cb:_,s:T,n:m}):!1};function r(m,_){if(_!==e._){if(!i.is(m))return!0;this.cb&&this.cb.call(this.as,m,_,this.n,this.s)}}}(),function(){e.ify=function(m,_,A){return J("node.ify"),_?typeof _=="string"?_={soul:_}:typeof _=="function"&&(_={map:_}):_={},_.map&&(_.node=_.map.call(A,m,b,_.node||{})),(_.node=e.soul.ify(_.node||{},_))&&U(m,r,{o:_,as:A}),_.node};function r(m,_){var A=this.o,T,D;if(A.map){T=A.map.call(this.as,m,""+_,A.node),D===T?S(A.node,_):A.node&&(A.node[_]=T);return}i.is(m)&&(A.node[_]=m)}}();var f=x.obj,l=f.is,S=f.del,U=f.map,s=x.text,u=s.random,g=e.soul._,b;x.node=x.node||e;var w=x.state;w.lex=function(){return J("state.lex"),w().toString(36).replace(".","")},w.to=function(r,m,_){J("state.to");var A=(r||{})[m];return l(A)&&(A=N(A)),w.ify(_,m,w.is(r,m),A,e.soul(r))},function(){w.map=function(m,_,A){J("state.map");var T,D=l(D=m||_)?D:null;return m=n(m=m||_)?m:null,D&&!m?(_=h(_)?_:w(),D[k]=D[k]||{},U(D,r,{o:D,s:_}),D):(A=A||l(_)?_:T,_=h(_)?_:w(),function(E,C,P,I){if(!m)return r.call({o:P,s:_},E,C),E;m.call(A||this||{},E,C,P,I),!(d(P,C)&&T===P[C])&&r.call({o:P,s:_},E,C)})};function r(m,_){k!==_&&w.ify(this.o,_,this.s)}}();var f=x.obj;f.as;var d=f.has,l=f.is,U=f.map,N=f.copy,t=x.num,h=t.is,v=x.fn,n=v.is,k=e._,b,a={};(function(){a.is=function(_,A,T,D){return J("graph.is"),!_||!l(_)||j(_)?!1:!U(_,r,{cb:A,fn:T,as:D})};function r(_,A){if(!_||A!==e.soul(_)||!e.is(_,this.fn,this.as))return!0;this.cb&&(m.n=_,m.as=this.as,this.cb.call(m.as,_,A,m))}function m(_){_&&e.is(m.n,_,m.as)}})(),function(){a.ify=function(D,E,C){J("graph.ify");var P={path:[],obj:D};return E?typeof E=="string"?E={soul:E}:typeof E=="function"&&(E.map=E):E={},typeof C=="string"&&(E.soul=E.soul||C,C=b),E.soul&&(P.link=i.link.ify(E.soul)),E.shell=(C||{}).shell,E.graph=E.graph||{},E.seen=E.seen||[],E.as=E.as||C,r(E,P),E.root=P.node,E.graph};function r(D,E){var C;return(C=T(D,E))?C:(E.env=D,E.soul=_,e.ify(E.obj,m,E)&&(E.link=E.link||i.link.ify(e.soul(E.node)),E.obj!==D.shell&&(D.graph[i.link.is(E.link)]=E.node)),E)}function m(D,E,C){var P=this,I=P.env,M,G;if(e._===E&&d(D,i.link._))return C._;if(M=A(D,E,C,P,I)){if(E||(P.node=P.node||C||{},d(D,e._)&&e.soul(D)&&(P.node._=N(D._)),P.node=e.soul.ify(P.node,i.link.is(P.link)),P.link=P.link||i.link.ify(e.soul(P.node))),(G=I.map)&&(G.call(I.as||{},D,E,C,P),d(C,E))){if(D=C[E],b===D){S(C,E);return}if(!(M=A(D,E,C,P,I)))return}if(!E)return P.node;if(M===!0)return D;if(G=r(I,{obj:D,path:P.path.concat(E)}),!!G.node)return G.link}}function _(D){var E=this,C=i.link.is(E.link),P=E.env.graph;E.link=E.link||i.link.ify(D),E.link[i.link._]=D,E.node&&E.node[e._]&&(E.node[e._][i.link._]=D),d(P,C)&&(P[D]=P[C],S(P,C))}function A(D,E,C,P,I){var M;if(i.is(D))return!0;if(l(D))return 1;if(M=I.invalid)return D=M.call(I.as||{},D,E,C),A(D,E,C,P,I);I.err="Invalid value at '"+P.path.concat(E).join(".")+"'!",x.list.is(D)&&(I.err+=" Use `.set(item)` instead of an Array.")}function T(D,E){for(var C=D.seen,P=C.length,I;P--;)if(I=C[P],E.obj===I.obj)return I;C.push(E)}}(),a.node=function(r){J("graph.node");var m=e.soul(r);if(m)return O({},m,r)},function(){a.to=function(m,_,A){if(J("graph.to"),!!m){var T={};return A=A||{seen:{}},U(m[_],r,{obj:T,graph:m,opt:A}),T}};function r(m,_){var A,T;if(e._===_){if(j(m,i.link._))return;this.obj[_]=N(m);return}if(!(A=i.link.is(m))){this.obj[_]=m;return}if(T=this.opt.seen[A]){this.obj[_]=T;return}this.obj[_]=this.opt.seen[A]=a.to(this.graph,A,this.opt)}}();var n=x.fn.is,f=x.obj,l=f.is,S=f.del,d=f.has,j=f.empty,O=f.put,U=f.map,N=f.copy,b;x.graph=x.graph||a}}()}(z);var pt=z.exports,ht=pt;const yt=lt(ht);var Q={exports:{}};Q.exports,function(K){(function(){function b(x,o){return o?ot(x):x.slice?b[i(x)]:function(c,y){x(c={exports:{}}),b[i(y)]=c.exports};function i(c){return c.split("/").slice(-1).toString().replace(".js","")}}var J=K;b(function(x){typeof self<"u"&&(x.window=self),typeof window<"u"&&(x.window=window);var o=x.window||x,i,c=o.SEA||{};(c.window=x.window)&&(c.window.SEA=c);try{i+""!=typeof J&&(J.exports=c)}catch{}x.exports=c})(b,"./root"),b(function(x){var o=b("./root");try{o.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(b,"./https"),b(function(x){var o;if(o+""==typeof btoa){if(o+""==typeof Buffer)try{B.Buffer=b("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}B.btoa=function(i){return Buffer.from(i,"binary").toString("base64")},B.atob=function(i){return Buffer.from(i,"base64").toString("binary")}}})(b,"./base64"),b(function(x){b("./base64");function o(){}Object.assign(o,{from:Array.from}),o.prototype=Object.create(Array.prototype),o.prototype.toString=function(i,c,y){i=i||"utf8",c=c||0;const p=this.length;if(i==="hex"){const e=new Uint8Array(this);return[...Array((y&&y+1||p)-c).keys()].map(s=>e[s+c].toString(16).padStart(2,"0")).join("")}if(i==="utf8")return Array.from({length:(y||p)-c},(e,s)=>String.fromCharCode(this[s+c])).join("");if(i==="base64")return btoa(this)},x.exports=o})(b,"./array"),b(function(x){b("./base64");var o=b("./array");function i(...c){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),i.from(...c)}i.prototype=Object.create(Array.prototype),Object.assign(i,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const c=arguments[0];let y;if(typeof c=="string"){const p=arguments[1]||"utf8";if(p==="hex"){const e=c.match(/([\da-fA-F]{2})/g).map(s=>parseInt(s,16));if(!e||!e.length)throw new TypeError("Invalid first argument for type 'hex'.");y=o.from(e)}else if(p==="utf8"||p==="binary"){const e=c.length,s=new Uint16Array(e);Array.from({length:e},(u,g)=>s[g]=c.charCodeAt(g)),y=o.from(s)}else if(p==="base64"){const e=atob(c),s=e.length,u=new Uint8Array(s);Array.from({length:s},(g,w)=>u[w]=e.charCodeAt(w)),y=o.from(u)}else p==="binary"?y=o.from(c):console.info("SafeBuffer.from unknown encoding: "+p);return y}if(c.byteLength,c.byteLength?c.byteLength:c.length){let p;return c instanceof ArrayBuffer&&(p=new Uint8Array(c)),o.from(p||c)}},alloc(c,y=0){return o.from(new Uint8Array(Array.from({length:c},()=>y)))},allocUnsafe(c){return o.from(new Uint8Array(Array.from({length:c})))},concat(c){if(!Array.isArray(c))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return o.from(c.reduce((y,p)=>y.concat(Array.from(p)),[]))}}),i.prototype.from=i.from,i.prototype.toString=o.prototype.toString,x.exports=i})(b,"./buffer"),b(function(x){const o=b("./root"),i={Buffer:b("./buffer")};var c={},y;if(JSON.parseAsync=JSON.parseAsync||function(e,s,u){var g;try{s(g,JSON.parse(e,u))}catch(w){s(w)}},JSON.stringifyAsync=JSON.stringifyAsync||function(e,s,u,g){var w;try{s(w,JSON.stringify(e,u,g))}catch(t){s(t)}},i.parse=function(e,s){return new Promise(function(u,g){JSON.parseAsync(e,function(w,t){w?g(w):u(t)},s)})},i.stringify=function(e,s,u){return new Promise(function(g,w){JSON.stringifyAsync(e,function(t,h){t?w(t):g(h)},s,u)})},o.window&&(i.crypto=o.window.crypto||o.window.msCrypto,i.subtle=(i.crypto||c).subtle||(i.crypto||c).webkitSubtle,i.TextEncoder=o.window.TextEncoder,i.TextDecoder=o.window.TextDecoder,i.random=e=>i.Buffer.from(i.crypto.getRandomValues(new Uint8Array(i.Buffer.alloc(e))))),!i.TextDecoder){const{TextEncoder:e,TextDecoder:s}=b((y+""==typeof J?".":"")+"./lib/text-encoding",1);i.TextDecoder=s,i.TextEncoder=e}if(!i.crypto)try{var p=b("crypto",1);Object.assign(i,{crypto:p,random:s=>i.Buffer.from(p.randomBytes(s))});const{Crypto:e}=b("@peculiar/webcrypto",1);i.ossl=i.subtle=new e({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}x.exports=i})(b,"./shim"),b(function(x){var o=b("./root"),i=b("./shim"),c={};c.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},c.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},c.ecdh={name:"ECDH",namedCurve:"P-256"},c.jwk=function(y,p){y=y.split(".");var e=y[0],s=y[1],u={kty:"EC",crv:"P-256",x:e,y:s,ext:!0};return u.key_ops=p?["sign"]:["verify"],p&&(u.d=p),u},c.keyToJwk=function(y){return{kty:"oct",k:y.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""),ext:!1,alg:"A256GCM"}},c.recall={validity:12*60*60,hook:function(y){return y}},c.check=function(y){return typeof y=="string"&&y.slice(0,4)==="SEA{"},c.parse=async function(y){try{var p=typeof y=="string";return p&&y.slice(0,4)==="SEA{"&&(y=y.slice(3)),p?await i.parse(y):y}catch{}return y},o.opt=c,x.exports=c})(b,"./settings"),b(function(x){var o=b("./shim");x.exports=async function(i,c){var y=typeof i=="string"?i:await o.stringify(i),p=await o.subtle.digest({name:c||"SHA-256"},new o.TextEncoder().encode(y));return o.Buffer.from(p)}})(b,"./sha256"),b(function(x){const o=b("./shim"),i=o.subtle,c=o.ossl?o.ossl:i,y=p=>c.digest({name:"SHA-1"},new ArrayBuffer(p));x.exports=y})(b,"./sha1"),b(function(x){var o=b("./root"),i=b("./shim"),c=b("./settings"),y=b("./sha256"),p;o.work=o.work||(async(e,s,u,g)=>{try{var w=(s||{}).epub||s;if(g=g||{},w instanceof Function&&(u=w,w=p),e=typeof e=="string"?e:await i.stringify(e),(g.name||"").toLowerCase().slice(0,3)==="sha"){var t=i.Buffer.from(await y(e,g.name),"binary").toString(g.encode||"base64");if(u)try{u(t)}catch(a){console.log(a)}return t}w=w||i.random(9);var h=await(i.ossl||i.subtle).importKey("raw",new i.TextEncoder().encode(e),{name:g.name||"PBKDF2"},!1,["deriveBits"]),v=await(i.ossl||i.subtle).deriveBits({name:g.name||"PBKDF2",iterations:g.iterations||c.pbkdf2.iter,salt:new i.TextEncoder().encode(g.salt||w),hash:g.hash||c.pbkdf2.hash},h,g.length||c.pbkdf2.ks*8);e=i.random(e.length);var k=i.Buffer.from(v,"binary").toString(g.encode||"base64");if(u)try{u(k)}catch(a){console.log(a)}return k}catch(a){if(console.log(a),o.err=a,o.throw)throw a;u&&u();return}}),x.exports=o.work})(b,"./work"),b(function(x){var o=b("./root"),i=b("./shim");b("./settings"),o.name=o.name||(async(c,y)=>{try{if(c)try{c()}catch(p){console.log(p)}return}catch(p){if(console.log(p),o.err=p,o.throw)throw p;c&&c();return}}),o.pair=o.pair||(async(c,y)=>{try{var p=i.ossl||i.subtle,e=await i.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async g=>{var w={};w.priv=(await i.subtle.exportKey("jwk",g.privateKey)).d;var t=await i.subtle.exportKey("jwk",g.publicKey);return w.pub=t.x+"."+t.y,w});try{var s=await p.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async g=>{var w={};w.epriv=(await p.exportKey("jwk",g.privateKey)).d;var t=await p.exportKey("jwk",g.publicKey);return w.epub=t.x+"."+t.y,w})}catch(g){if(o.window)throw g;if(g=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw g}s=s||{};var u={pub:e.pub,priv:e.priv,epub:s.epub,epriv:s.epriv};if(c)try{c(u)}catch(g){console.log(g)}return u}catch(g){if(console.log(g),o.err=g,o.throw)throw g;c&&c();return}}),x.exports=o.pair})(b,"./pair"),b(function(x){var o=b("./root"),i=b("./shim"),c=b("./settings"),y=b("./sha256"),p;o.sign=o.sign||(async(e,s,u,g)=>{try{if(g=g||{},!(s||g).priv){if(!o.I)throw"No signing key.";s=await o.I(null,{what:e,how:"sign",why:g.why})}if(p===e)throw"`undefined` not allowed.";var w=await c.parse(e),t=g.check=g.check||w;if(o.verify&&(o.opt.check(t)||t&&t.s&&t.m)&&p!==await o.verify(t,s)){var f=await c.parse(t);if(g.raw||(f="SEA"+await i.stringify(f)),u)try{u(f)}catch(S){console.log(S)}return f}var h=s.pub,v=s.priv,k=c.jwk(h,v),a=await y(w),n=await(i.ossl||i.subtle).importKey("jwk",k,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(l=>(i.ossl||i.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},l,new Uint8Array(a))),f={m:w,s:i.Buffer.from(n,"binary").toString(g.encode||"base64")};if(g.raw||(f="SEA"+await i.stringify(f)),u)try{u(f)}catch(l){console.log(l)}return f}catch(l){if(console.log(l),o.err=l,o.throw)throw l;u&&u();return}}),x.exports=o.sign})(b,"./sign"),b(function(x){var o=b("./root"),i=b("./shim"),c=b("./settings"),y=b("./sha256"),p;o.verify=o.verify||(async(u,g,w,t)=>{try{var h=await c.parse(u);if(g===!1){var v=await c.parse(h.m);if(w)try{w(v)}catch(O){console.log(O)}return v}t=t||{};var k=g.pub||g,a=o.opt.slow_leak?await o.opt.slow_leak(k):await(i.ossl||i.subtle).importKey("jwk",c.jwk(k),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),n=await y(h.m),f,l,S,d;try{if(f=i.Buffer.from(h.s,t.encode||"base64"),l=new Uint8Array(f),S=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},a,l,new Uint8Array(n)),!S)throw"Signature did not match."}catch{if(o.opt.fallback)return await o.opt.fall_verify(u,g,w,t)}var j=S?await c.parse(h.m):p;if(w)try{w(j)}catch(O){console.log(O)}return j}catch(O){if(console.log(O),o.err=O,o.throw)throw O;w&&w();return}}),x.exports=o.verify;var e={};o.opt.slow_leak=u=>{if(e[u])return e[u];var g=c.jwk(u);return e[u]=(i.ossl||i.subtle).importKey("jwk",g,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),e[u]};var s=o.opt;o.opt.fall_verify=async function(u,g,w,t,h){if(h===o.opt.fallback)throw"Signature did not match";h=h||1;var v=u||"";u=o.opt.unpack(u)||u;var k=await c.parse(u),a=g.pub||g,n=await o.opt.slow_leak(a),f=h<=o.opt.fallback?i.Buffer.from(await i.subtle.digest({name:"SHA-256"},new i.TextEncoder().encode(await c.parse(k.m)))):await y(k.m),l,S,d;try{if(l=i.Buffer.from(k.s,t.encode||"base64"),S=new Uint8Array(l),d=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,S,new Uint8Array(f)),!d)throw"Signature did not match."}catch{try{l=i.Buffer.from(k.s,"utf8"),S=new Uint8Array(l),d=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,S,new Uint8Array(f))}catch{if(!d)throw"Signature did not match."}}var j=d?await c.parse(k.m):p;if(s.fall_soul=v["#"],s.fall_key=v["."],s.fall_val=u,s.fall_state=v[">"],w)try{w(j)}catch(O){console.log(O)}return j},o.opt.fallback=2})(b,"./verify"),b(function(x){var o=b("./shim"),i=b("./settings"),c=b("./sha256");const y=async(p,e,s)=>{const u=p+(e||o.random(8)).toString("utf8"),g=o.Buffer.from(await c(u),"binary"),w=i.keyToJwk(g);return await o.subtle.importKey("jwk",w,{name:"AES-GCM"},!1,["encrypt","decrypt"])};x.exports=y})(b,"./aeskey"),b(function(x){var o=b("./root"),i=b("./shim");b("./settings");var c=b("./aeskey"),y;o.encrypt=o.encrypt||(async(p,e,s,u)=>{try{u=u||{};var g=(e||u).epriv||e;if(y===p)throw"`undefined` not allowed.";if(!g){if(!o.I)throw"No encryption key.";e=await o.I(null,{what:p,how:"encrypt",why:u.why}),g=e.epriv||e}var w=typeof p=="string"?p:await i.stringify(p),t={s:i.random(9),iv:i.random(15)},h=await c(g,t.s,u).then(k=>i.subtle.encrypt({name:u.name||"AES-GCM",iv:new Uint8Array(t.iv)},k,new i.TextEncoder().encode(w))),v={ct:i.Buffer.from(h,"binary").toString(u.encode||"base64"),iv:t.iv.toString(u.encode||"base64"),s:t.s.toString(u.encode||"base64")};if(u.raw||(v="SEA"+await i.stringify(v)),s)try{s(v)}catch(k){console.log(k)}return v}catch(k){if(console.log(k),o.err=k,o.throw)throw k;s&&s();return}}),x.exports=o.encrypt})(b,"./encrypt"),b(function(x){var o=b("./root"),i=b("./shim"),c=b("./settings"),y=b("./aeskey");o.decrypt=o.decrypt||(async(p,e,s,u)=>{try{u=u||{};var g=(e||u).epriv||e;if(!g){if(!o.I)throw"No decryption key.";e=await o.I(null,{what:p,how:"decrypt",why:u.why}),g=e.epriv||e}var w=await c.parse(p),t,h,v;try{t=i.Buffer.from(w.s,u.encode||"base64"),h=i.Buffer.from(w.iv,u.encode||"base64"),v=i.Buffer.from(w.ct,u.encode||"base64");var k=await y(g,t,u).then(n=>i.subtle.decrypt({name:u.name||"AES-GCM",iv:new Uint8Array(h),tagLength:128},n,new Uint8Array(v)))}catch{if(u.encode==="utf8")throw"Could not decrypt";if(o.opt.fallback)return u.encode="utf8",await o.decrypt(p,e,s,u)}var a=await c.parse(new i.TextDecoder("utf8").decode(k));if(s)try{s(a)}catch(n){console.log(n)}return a}catch(n){if(console.log(n),o.err=n,o.throw)throw n;s&&s();return}}),x.exports=o.decrypt})(b,"./decrypt"),b(function(x){var o=b("./root"),i=b("./shim");b("./settings"),o.secret=o.secret||(async(y,p,e,s)=>{try{if(s=s||{},!p||!p.epriv||!p.epub){if(!o.I)throw"No secret mix.";p=await o.I(null,{what:y,how:"secret",why:s.why})}var u=y.epub||y,g=p.epub,w=p.epriv,t=i.ossl||i.subtle,h=c(u),v=Object.assign({public:await t.importKey(...h,!0,[])},{name:"ECDH",namedCurve:"P-256"}),k=c(g,w),a=await t.importKey(...k,!1,["deriveBits"]).then(async f=>{var l=await t.deriveBits(v,f,256),S=new Uint8Array(l),d=await t.importKey("raw",S,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return t.exportKey("jwk",d).then(({k:j})=>j)}),n=a;if(e)try{e(n)}catch(f){console.log(f)}return n}catch(f){if(console.log(f),o.err=f,o.throw)throw f;e&&e();return}});var c=(y,p)=>{var[e,s]=y.split("."),u=p?{d:p}:{};return["jwk",Object.assign(u,{x:e,y:s,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};x.exports=o.secret})(b,"./secret"),b(function(x){var o=b("./root");o.certify=o.certify||(async(i,c={},y,p,e={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),i=(()=>{var a=[];if(i){if((typeof i=="string"||Array.isArray(i))&&i.indexOf("*")>-1)return"*";if(typeof i=="string")return i;if(Array.isArray(i)){if(i.length===1&&i[0])return typeof i[0]=="object"&&i[0].pub?i[0].pub:typeof i[0]=="string"?i[0]:null;i.map(n=>{typeof n=="string"?a.push(n):typeof n=="object"&&n.pub&&a.push(n.pub)})}return typeof i=="object"&&i.pub?i.pub:a.length>0?a:null}})(),!i)return console.log("No certificant found.");const u=e.expiry&&(typeof e.expiry=="number"||typeof e.expiry=="string")?parseFloat(e.expiry):null,g=(c||{}).read?c.read:null,w=(c||{}).write?c.write:typeof c=="string"||Array.isArray(c)||c["+"]||c["#"]||c["."]||c["="]||c["*"]||c[">"]||c["<"]?c:null,t=(e||{}).block||(e||{}).blacklist||(e||{}).ban||{},h=t.read&&(typeof t.read=="string"||(t.read||{})["#"])?t.read:null,v=typeof t=="string"?t:t.write&&(typeof t.write=="string"||t.write["#"])?t.write:null;if(!g&&!w)return console.log("No policy found.");const k=JSON.stringify({c:i,...u?{e:u}:{},...g?{r:g}:{},...w?{w}:{},...h?{rb:h}:{},...v?{wb:v}:{}});var s=await o.sign(k,y,null,{raw:1});if(e.raw||(s="SEA"+JSON.stringify(s)),p)try{p(s)}catch(a){console.log(a)}return s}catch(u){if(o.err=u,o.throw)throw u;p&&p();return}}),x.exports=o.certify})(b,"./certify"),b(function(x){var o=b("./shim"),i=b("./root");i.work=b("./work"),i.sign=b("./sign"),i.verify=b("./verify"),i.encrypt=b("./encrypt"),i.decrypt=b("./decrypt"),i.certify=b("./certify"),i.random=i.random||o.random,i.Buffer=i.Buffer||b("./buffer"),i.keyid=i.keyid||(async c=>{try{const y=o.Buffer.concat(c.replace(/-/g,"+").replace(/_/g,"/").split(".").map(u=>o.Buffer.from(u,"base64"))),p=o.Buffer.concat([o.Buffer.from([153,y.length/256,y.length%256]),y]),e=await sha1hash(p),s=o.Buffer.from(e,"binary");return s.toString("hex",s.length-8)}catch(y){throw console.log(y),y}}),((i.window||{}).GUN||{}).SEA=i,x.exports=i})(b,"./sea"),b(function(x){var o=b("./sea"),i,c;o.window?i=o.window.GUN||{chain:{}}:i=b((c+""==typeof J?".":"")+"./gun",1),o.GUN=i;function y(e){this._={$:this}}y.prototype=function(){function e(){}return e.prototype=i.chain,new e}(),y.prototype.constructor=y,i.chain.user=function(e){var s=this,g=s.back(-1),u;if(e)return e=o.opt.pub((e._||"")["#"])||e,g.get("~"+e);if(u=g.back("user"))return u;var g=g._,w=g,t=w.opt.uuid||p;return(w=(u=w.user=s.chain(new y))._).opt={},w.opt.uuid=function(h){var v=t(),k=g.user;return!k||!(k=k.is)||!(k=k.pub)||(v="~"+k+"/"+v,h&&h.call&&h(null,v)),v},u};function p(){return i.state().toString(36).replace(".","")}i.User=y,y.GUN=i,y.SEA=i.SEA=o,x.exports=y})(b,"./user"),b(function(x){var o,i=""+o!=typeof GUN?GUN||{chain:{}}:b((""+o==typeof J?".":"")+"./gun",1);i.chain.then=function(c,y){var p=this,e=new Promise(function(s,u){p.once(s,y)});return c?e.then(c):e}})(b,"./then"),b(function(x){var o=b("./user"),i=o.SEA,c=o.GUN,y=function(){};o.prototype.create=function(...p){var e=typeof p[0]=="object"&&(p[0].pub||p[0].epub)?p[0]:typeof p[1]=="object"&&(p[1].pub||p[1].epub)?p[1]:null,s=e&&(e.pub||e.epub)?e.pub:typeof p[0]=="string"?p[0]:null,u=e&&(e.pub||e.epub)?e:s&&typeof p[1]=="string"?p[1]:null,g=p.filter(n=>typeof n=="function")[0]||null,w=p&&p.length>1&&typeof p[p.length-1]=="object"?p[p.length-1]:{},t=this,h=t._,v=t.back(-1);if(g=g||y,w=w||{},w.check!==!1){var k;if(s||(k="No user."),(u||"").length<8&&(k="Password too short!"),k)return g({err:c.log(k)}),t}if(h.ing)return(g||y)({err:c.log("User is already being created or authenticated!"),wait:!0}),t;h.ing=!0;var a={};return a.a=function(n){if(a.pubs=n,n&&!w.already){var f={err:c.log("User already created!")};h.ing=!1,(g||y)(f),t.leave();return}a.salt=String.random(64),i.work(u,a.salt,a.b)},a.b=function(n){a.proof=n,e?a.c(e):i.pair(a.c)},a.c=function(n){var f;a.pair=n||{},(f=h.root.user)&&(f._.sea=n,f.is={pub:n.pub,epub:n.epub,alias:s}),a.data={pub:n.pub},a.d()},a.d=function(){a.data.alias=s,a.e()},a.e=function(){a.data.epub=a.pair.epub,i.encrypt({priv:a.pair.priv,epriv:a.pair.epriv},a.proof,a.f,{raw:1})},a.f=function(n){a.data.auth=JSON.stringify({ek:n,s:a.salt}),a.g(a.data.auth)},a.g=function(n){var f;a.data.auth=a.data.auth||n,v.get(f="~"+a.pair.pub).put(a.data).on(a.h);var l={};l[f]={"#":f},v.get("~@"+s).put(l).get(f).on(a.i)},a.h=function(n,f,l,S){S.off(),a.h.ok=1,a.i()},a.i=function(n,f,l,S){S&&(a.i.ok=1,S.off()),!(!a.h.ok||!a.i.ok)&&(h.ing=!1,g({ok:0,pub:a.pair.pub}),y===g&&(e?t.auth(e):t.auth(s,u)))},v.get("~@"+s).once(a.a),t},o.prototype.leave=function(p,e){var s=this,u=s.back(-1)._.user;if(u&&(delete u.is,delete u._.is,delete u._.sea),i.window)try{var g={};g=i.window.sessionStorage,delete g.recall,delete g.pair}catch{}return s}})(b,"./create"),b(function(x){var o=b("./user"),i=o.SEA,c=o.GUN,y=function(){};o.prototype.auth=function(...e){var s=typeof e[0]=="object"&&(e[0].pub||e[0].epub)?e[0]:typeof e[1]=="object"&&(e[1].pub||e[1].epub)?e[1]:null,u=!s&&typeof e[0]=="string"?e[0]:null,g=(u||s&&!(s.priv&&s.epriv))&&typeof e[1]=="string"?e[1]:null,w=e.filter(l=>typeof l=="function")[0]||null,t=e&&e.length>1&&typeof e[e.length-1]=="object"?e[e.length-1]:{},h=this,v=h._,k=h.back(-1);if(v.ing)return(w||y)({err:c.log("User is already being created or authenticated!"),wait:!0}),h;v.ing=!0;var a={},n,f=9;return a.a=function(l){if(!l)return a.b();if(!l.pub){var S=[];return Object.keys(l).forEach(function(d){d!="_"&&S.push(l[d])}),a.b(S)}if(a.name)return a.f(l);a.c((a.data=l).auth)},a.b=function(l){var S=(a.list=(a.list||[]).concat(l||[])).shift();if(n===S){if(a.name)return a.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.");if(u&&f--){k.get("~@"+u).once(a.a);return}return a.err("Wrong user or password.")}k.get(S).once(a.a)},a.c=function(l){if(n===l)return a.b();if(typeof l=="string")return a.c(p(l));i.work(g,(a.auth=l).s,a.d,a.enc)},a.d=function(l){i.decrypt(a.auth.ek,l,a.e,a.enc)},a.e=function(l){if(n===l)return a.enc?(a.enc=null,a.b()):(a.enc={encode:"utf8"},a.c(a.auth));a.half=l,a.f(a.data)},a.f=function(l){var S=a.half||{},d=a.data||{};a.g(a.lol={pub:l.pub||d.pub,epub:l.epub||d.epub,priv:l.priv||S.priv,epriv:l.epriv||S.epriv})},a.g=function(l){if(!l||!l.pub||!l.epub)return a.b();a.pair=l;var S=k._.user,d=S._;d.tag;var j=d.opt;d=S._=k.get("~"+l.pub)._,d.opt=j,S.is={pub:l.pub,epub:l.epub,alias:u||l.pub},d.sea=a.pair,v.ing=!1;try{g&&n==(p(v.root.graph["~"+l.pub].auth)||"")[":"]&&(t.shuffle=t.change=g)}catch{}if(t.change?a.z():(w||y)(d),i.window&&(h.back("user")._.opt||t).remember)try{var O={};O=i.window.sessionStorage,O.recall=!0,O.pair=JSON.stringify(l)}catch{}try{k._.tag.auth?k._.on("auth",d):setTimeout(function(){k._.on("auth",d)},1)}catch(U){c.log("Your 'auth' callback crashed with:",U)}},a.h=function(l){if(!l)return a.b();if(u=l.alias,u||(u=l.alias="~"+s.pub),!l.auth)return a.g(s);s=null,a.c((a.data=l).auth)},a.z=function(){a.salt=String.random(64),i.work(t.change,a.salt,a.y)},a.y=function(l){i.encrypt({priv:a.pair.priv,epriv:a.pair.epriv},l,a.x,{raw:1})},a.x=function(l){a.w(JSON.stringify({ek:l,s:a.salt}))},a.w=function(l){if(t.shuffle){console.log("migrate core account from UTF8 & shuffle");var S={};Object.keys(a.data).forEach(function(d){S[d]=a.data[d]}),delete S._,S.auth=l,k.get("~"+a.pair.pub).put(S)}k.get("~"+a.pair.pub).get("auth").put(l,w||y)},a.err=function(l){var S={err:c.log(l||"User cannot be found!")};v.ing=!1,(w||y)(S)},a.plugin=function(l){if(!(a.name=l))return a.err();var S=[l];l[0]!=="~"&&(S[1]="~"+l,S[2]="~@"+l),a.b(S)},s?s.priv&&s.epriv?a.g(s):k.get("~"+s.pub).once(a.h):u?k.get("~@"+u).once(a.a):!u&&!g&&i.name(a.plugin),h};function p(e){if(typeof e!="string")return e;try{e=JSON.parse(e)}catch{e={}}return e}})(b,"./auth"),b(function(x){var o=b("./user"),i=o.SEA;o.GUN,o.prototype.recall=function(c,y){var p=this,e=p.back(-1);if(c=c||{},c&&c.sessionStorage){if(i.window)try{var s={};s=i.window.sessionStorage,s&&(e._.opt.remember=!0,(p.back("user")._.opt||c).remember=!0,(s.recall||s.pair)&&e.user().auth(JSON.parse(s.pair),y))}catch{}return p}return p}})(b,"./recall"),b(function(x){var o=b("./user"),i=o.SEA,c=o.GUN,y=function(){};o.prototype.pair=function(){var p=this,e;try{e=new Proxy({DANGER:"\u2620"},{get:function(s,u,g){if(!(!p.is||!(p._||"").sea))return p._.sea[u]}})}catch{}return e},o.prototype.delete=async function(p,e,s){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var u=this;u.back(-1);var g=u.back("user");try{g.auth(p,e,function(w){var t=(g.is||{}).pub;g.map().once(function(){this.put(null)}),g.leave(),(s||y)({ok:0})})}catch(w){c.log("User.delete failed! Error:",w)}return u},o.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const p=this.back(-1);try{return await authRecall(p),p._.user._}catch{const e="No session!";throw c.log(e),{err:e}}},o.prototype.trust=async function(p){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),c.is(p)&&p.get("pub").get((e,s)=>{console.log(e,s)}),p.get("trust").get(path).put(theirPubkey)},o.prototype.grant=function(p,e){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var s=this,u=s.back(-1).user(),g=u._.sea,w="";return s.back(function(t){t.is||(w+=t.get||"")}),async function(){var t,h=await u.get("grant").get(g.pub).get(w).then();h=await i.decrypt(h,g),h||(h=i.random(16).toString(),t=await i.encrypt(h,g),u.get("grant").get(g.pub).get(w).put(t));var v=p.get("pub").then(),k=p.get("epub").then();v=await v,k=await k;var a=await i.secret(k,g);t=await i.encrypt(h,a),u.get("grant").get(v).get(w).put(t,e)}(),s},o.prototype.secret=function(p,e){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var s=this,u=s.back(-1).user(),g=u.pair(),w="";return s.back(function(t){t.is||(w+=t.get||"")}),async function(){var t,h=await u.get("trust").get(g.pub).get(w).then();h=await i.decrypt(h,g),h||(h=i.random(16).toString(),t=await i.encrypt(h,g),u.get("trust").get(g.pub).get(w).put(t)),t=await i.encrypt(p,h),s.put(t,e)}(),s},x.exports=o})(b,"./share"),b(function(x){var o=b("./sea"),i=b("./settings"),c,y=(o.window||"").GUN||b((""+c==typeof J?".":"")+"./gun",1);y.on("opt",function(t){t.sea||(t.sea={own:{}},t.on("put",p,t)),this.to.next(t)});function p(t){var h=this,v=h.as,k=t.put,a=k["#"],n=k["."],f=k[":"],l=k[">"],S=t["#"],d;if(!(!a||!n)){if((t._||"").faith&&(v.opt||"").faith&&typeof t._=="function"){o.opt.pack(k,function(O){o.verify(O,!1,function(U){k["="]=o.opt.unpack(U),h.to.next(t)})});return}var j=function(O){v.on("in",{"@":S,err:t.err=O})};if((t._||"").DBG&&((t._||"").DBG.c=+new Date),0<=a.indexOf("<?")&&(d=parseFloat(a.split("<?")[1]||""),d&&l<y.state()-d*1e3)){(d=t._)&&d.stun&&d.stun--;return}if(a==="~@"){p.alias(h,t,f,n,a,v,j);return}if(a.slice(0,2)==="~@"){p.pubs(h,t,f,n,a,v,j);return}if(d=o.opt.pub(a)){p.pub(h,t,f,n,a,v,j,v.user||"",d);return}if(0<=a.indexOf("#")){p.hash(h,t,f,n,a,v,j);return}p.any(h,t,f,n,a,v,j,v.user||"")}}p.hash=function(t,h,v,k,a,n,f){o.work(v,null,function(l){function S(d){let j="";for(let O=0;O<d.length;O++)j+=O-1&1?"":String.fromCharCode(parseInt(d.substring(O-1,O+1),16));return btoa(j)}if(l&&l===k.split("#").slice(-1)[0]||l&&l===S(k.split("#").slice(-1)[0]))return t.to.next(h);f("Data hash not same as hash!")},{name:"SHA-256"})},p.alias=function(t,h,v,k,a,n,f){if(!v)return f("Data must exist!");if("~@"+k===s(v))return t.to.next(h);f("Alias not same!")},p.pubs=function(t,h,v,k,a,n,f){if(!v)return f("Alias must exist!");if(k===s(v))return t.to.next(h);f("Alias not same!")},p.pub=async function(t,h,v,k,a,n,f,l,S){var d;const j=await i.parse(v)||{},O=(U,N,$)=>{if(U.m&&U.s&&N&&S)return o.verify(U,S,r=>{if(c!==r&&c!==r.e&&h.put[">"]&&h.put[">"]>parseFloat(r.e))return f("Certificate expired.");if(c!==r&&r.c&&r.w&&(r.c===N||r.c.indexOf("*")>-1)){let _=a.indexOf("/")>-1?a.replace(a.substring(0,a.indexOf("/")+1),""):"";String.match=String.match||y.text.match;const A=Array.isArray(r.w)?r.w:typeof r.w=="object"||typeof r.w=="string"?[r.w]:[];for(const T of A)if(String.match(_,T["#"])&&String.match(k,T["."])||!T["."]&&String.match(_,T["#"])||!T["#"]&&String.match(k,T["."])||String.match(_?_+"/"+k:k,T["#"]||T)){if(T["+"]&&T["+"].indexOf("*")>-1&&_&&_.indexOf(N)==-1&&k.indexOf(N)==-1)return f(`Path "${_}" or key "${k}" must contain string "${N}".`);if(r.wb&&(typeof r.wb=="string"||(r.wb||{})["#"])){var m=t.as.root.$.back(-1);return typeof r.wb=="string"&&r.wb.slice(0,1)!=="~"&&(m=m.get("~"+S)),m.get(r.wb).get(N).once(D=>D&&(D===1||D===!0)?f(`Certificant ${N} blocked.`):$(r))}return $(r)}return f("Certificate verification fail.")}})};if(k==="pub"&&"~"+S===a)return v===S?t.to.next(h):f("Account not same!");if((d=l.is)&&d.pub&&!j["*"]&&!j["+"]&&(S===d.pub||S!==d.pub&&((h._.msg||{}).opt||{}).cert)){o.opt.pack(h.put,U=>{o.sign(U,l._.sea,async function(N){if(c===N)return f(o.err||"Signature fail.");if(h.put[":"]={":":d=o.opt.unpack(N.m),"~":N.s},h.put["="]=d,S===l.is.pub){(d=s(v))&&((n.sea.own[d]=n.sea.own[d]||{})[S]=1),JSON.stringifyAsync(h.put[":"],function($,r){return $?f($||"Stringify error."):(h.put[":"]=r,t.to.next(h))});return}if(S!==l.is.pub&&((h._.msg||{}).opt||{}).cert){const $=await i.parse(h._.msg.opt.cert);$&&$.m&&$.s&&O($,l.is.pub,r=>{h.put[":"]["+"]=$,h.put[":"]["*"]=l.is.pub,JSON.stringifyAsync(h.put[":"],function(m,_){return m?f(m||"Stringify error."):(h.put[":"]=_,t.to.next(h))})})}},{raw:1})});return}o.opt.pack(h.put,U=>{o.verify(U,j["*"]||S,function(N){var $;if(N=o.opt.unpack(N),c===N)return f("Unverified data.");if(($=s(N))&&S===o.opt.pub($)&&((n.sea.own[$]=n.sea.own[$]||{})[S]=1),j["+"]&&j["+"].m&&j["+"].s&&j["*"])O(j["+"],j["*"],r=>(h.put["="]=N,t.to.next(h)));else return h.put["="]=N,t.to.next(h)})})},p.any=function(t,h,v,k,a,n,f,l){if(n.opt.secure)return f("Soul missing public key at '"+k+"'.");n.on("secure",function(S){if(this.off(),!n.opt.secure)return t.to.next(S);f("Data cannot be changed.")}).on.on("secure",h)};var e=y.valid,s=function(t,h){return typeof(h=e(t))=="string"&&h};(y.state||"").ify;var u=/[^\w_-]/;o.opt.pub=function(t){if(t&&(t=t.split("~"),!(!t||!(t=t[1]))&&(t=t.split(u).slice(0,2),!(!t||t.length!=2)&&(t[0]||"")[0]!=="@")))return t=t.slice(0,2).join("."),t},o.opt.stringy=function(t){},o.opt.pack=function(t,h,v,k,a){var n,f;if(o.opt.check(t))return h(t);t&&t["#"]&&t["."]&&t[">"]&&(n=t[":"],f=1),JSON.parseAsync(f?n:t,function(l,S){var d=c!==(S||"")[":"]&&(S||"")["~"];if(!d){h(t);return}h({m:{"#":a||t["#"],".":v||t["."],":":(S||"")[":"],">":t[">"]||y.state.is(k,v)},s:d})})};var g=o.opt;o.opt.unpack=function(t,h,v){var k;if(c!==t){if(t&&c!==(k=t[":"]))return k;if(h=h||g.fall_key,!v&&g.fall_val&&(v={},v[h]=g.fall_val),!(!h||!v)){if(t===v[h]||!o.opt.check(v[h]))return t;var a=v&&v._&&v._["#"]||g.fall_soul,n=y.state.is(v,h)||g.fall_state;if(t&&t.length===4&&a===t[0]&&h===t[1]&&w(n)===w(t[3]))return t[2];if(n<o.opt.shuffle_attack)return t}}},o.opt.shuffle_attack=15463296e5;var w=Math.floor})(b,"./index")})()}(Q),Q.exports,F=yt(["http://localhost:3000/gun"]),F.clear=function(){localStorage.clear(),sessionStorage.clear(),indexedDB.databases().then(K=>{for(let b of K)indexedDB.deleteDatabase(b.name)}),console.log("Local data cleared")},F.lookup=async function(K,b){var i;const J=await F.get(K).get(b).then(),x=((i=J==null?void 0:J._)==null?void 0:i[">"])&&Object.keys(J._[">"])[0];if(!x)return null;const o=await F.get(x).then();return o?{id:b,...o}:null};const{ref:it,inject:gt,provide:dt,computed:vt,onMounted:mt,onUnmounted:kt}=await X("vue");ft=function(K){const b=it(null),J=it([]),x=vt(()=>J.value.length),o=async p=>{const e=Object.fromEntries(p.entries());J.value.push({page:x.value,...e});const s=F.get(`wiki-plugin/${K}/${x.value}`).put({page:x.value,...e});return F.get("wikis").get(K).set(s),console.log(x.value),s},i=async p=>(b.value=J.value.find(e=>e.page===p),page.value),c=async p=>(b.value=p,b.value),y=async p=>{const e=F.get(`wiki/${K}/${p}`);e.then(()=>{F.get("wikis").get(p).unset(e),b.value=null})};mt(()=>{F.get("wikis").get(K).map().once(p=>{p&&J.value.push(p)})}),dt("wiki",{wiki:b,pages:J,createPage:o,setPage:i,editPage:c,removePage:y})},ct=function(){const K=gt("wiki");if(!K)throw new Error("Composable must have an wiki provider.");return K}});export{ut as _,wt as __tla,F as g,ct as u,ft as w};
