import{importShared as Z,__tla as St}from"./__federation_fn_import-ofDdBDNE.js";let lt,H,pt,ht,xt=Promise.all([(()=>{try{return St}catch{}})()]).then(async()=>{let tt,nt,et,rt,ot;({defineComponent:tt}=await Z("vue")),{renderSlot:nt,normalizeClass:et,openBlock:rt,createElementBlock:ot}=await Z("vue"),lt=tt({__name:"Title",props:{float:{type:String,default:"left",required:!1}},setup(M){return(w,P)=>(rt(),ot("h3",{class:et(`my-auto text-${M.float} text-lg text-gray-800 dark:text-gray-100 font-semibold`)},[nt(w.$slots,"default")],2))}});var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yt(M){return M&&M.__esModule&&Object.prototype.hasOwnProperty.call(M,"default")?M.default:M}function it(M){throw new Error('Could not dynamically require "'+M+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Q={exports:{}};Q.exports,function(M){(function(){function w(x,o){return o?it(x):x.slice?w[i(x)]:function(c,y){x(c={exports:{}}),w[i(y)]=c.exports};function i(c){return c.split("/").slice(-1).toString().replace(".js","")}}var P=M;w(function(x){String.random=function(i,c){var y="";for(i=i||24,c=c||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";i-- >0;)y+=c.charAt(Math.floor(Math.random()*c.length));return y},String.match=function(i,c){var y,p;return typeof i!="string"?!1:(typeof c=="string"&&(c={"=":c}),c=c||{},y=c["="]||c["*"]||c[">"]||c["<"],i===y?!0:p!==c["="]?!1:(y=c["*"]||c[">"],i.slice(0,(y||"").length)===y?!0:p!==c["*"]?!1:p!==c[">"]&&p!==c["<"]?i>=c[">"]&&i<=c["<"]:p!==c[">"]&&i>=c[">"]||p!==c["<"]&&i<=c["<"]))},String.hash=function(i,c){if(typeof i=="string"){if(c=c||0,!i.length)return c;for(var y=0,p=i.length,e;y<p;++y)e=i.charCodeAt(y),c=(c<<5)-c+e,c|=0;return c}};var o=Object.prototype.hasOwnProperty;Object.plain=function(i){return i?i instanceof Object&&i.constructor===Object||Object.prototype.toString.call(i).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(i,c){for(var y in i)if(o.call(i,y)&&(!c||c.indexOf(y)==-1))return!1;return!0},Object.keys=Object.keys||function(i){var c=[];for(var y in i)o.call(i,y)&&c.push(y);return c},function(){var i,c=setTimeout,y=0,p=0,e=typeof setImmediate!=""+i&&setImmediate||function(u,g){return typeof MessageChannel==""+i?c:((u=new MessageChannel).port1.onmessage=function(b){b.data==""&&g()},function(b){g=b,u.port2.postMessage("")})}(),s=c.check=c.check||typeof performance!=""+i&&performance||{now:function(){return+new Date}};c.hold=c.hold||9,c.poll=c.poll||function(u){if(c.hold>=s.now()-y&&p++<3333){u();return}e(function(){y=s.now(),u()},p=0)}}(),function(){var i=setTimeout,c=i.turn=i.turn||function(g){y.push(g)==1&&p(u)},y=c.s=[],p=i.poll,e=0,s,u=function(){(s=y[e++])&&s(),(e==y.length||e==99)&&(y=c.s=y.slice(e),e=0),y.length&&p(u)}}(),function(){var i,c=setTimeout,y=c.turn;(c.each=c.each||function(p,e,s,u){u=u||9,function g(b,t,h){if(t=(b=(p||[]).splice(0,u)).length){for(var m=0;m<t&&i===(h=e(b[m]));m++);if(i===h){y(g);return}}s&&s(h)}()})()}()})(w,"./shim"),w(function(x){x.exports=function o(s,c,y){if(!s)return{to:o};var p,e=typeof c=="function",s=(this.tag||(this.tag={}))[s]||e&&(this.tag[s]={tag:s,to:o._={next:function(g){var b;(b=this.to)&&b.next(g)}}});if(e){var u={off:o.off||(o.off=function(){if(this.next===o._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=o._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:o._,next:c,the:s,on:this,as:y};return(u.back=s.last||s).to=u,s.last=u}return(s=s.to)&&p!==c&&s.next(c),s}})(w,"./onto"),w(function(x){x.exports=function(o){return o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"&&o!=1/0&&o!=-1/0&&o===o||!!o&&typeof o["#"]=="string"&&Object.keys(o).length===1&&o["#"]}})(w,"./valid"),w(function(x){w("./shim");function o(){var s=+new Date;return p<s?(c=0,p=s+o.drift):p=s+(c+=1)/y+o.drift}o.drift=0;var i=-1/0,c=0,y=999,p=i,e;o.is=function(s,u,g){var b=u&&s&&s._&&s._[">"]||g;if(b)return typeof(b=b[u])=="number"?b:i},o.ify=function(s,u,g,b,t){(s=s||{})._=s._||{},t&&(s._["#"]=t);var h=s._[">"]||(s._[">"]={});return e!==u&&u!=="_"&&(typeof g=="number"&&(h[u]=g),e!==b&&(s[u]=b)),s},x.exports=o})(w,"./state"),w(function(x){w("./shim");function o(i){var c={s:{}},y=c.s;i=i||{max:999,age:1e3*9},c.check=function(e){return y[e]?p(e):!1};var p=c.track=function(e){var s=y[e]||(y[e]={});return s.was=c.now=+new Date,c.to||(c.to=setTimeout(c.drop,i.age+9)),p.ed&&p.ed(e),s};return c.drop=function(e){c.to=null,c.now=+new Date;var s=Object.keys(y);console.STAT&&console.STAT(c.now,+new Date-c.now,"dup drop keys"),setTimeout.each(s,function(u){var g=y[u];g&&(e||i.age)>c.now-g.was||delete y[u]},0,99)},c}x.exports=o})(w,"./dup"),w(function(x){w("./onto"),x.exports=function(i,c){if(this.on){var y=(this.opt||{}).lack||9e3;if(typeof i!="function"){if(!i)return;var e=i["#"]||i,p=(this.tag||"")[e];return p?(c&&(p=this.on(e,c),clearTimeout(p.err),p.err=setTimeout(function(){p.off()},y)),!0):void 0}var e=c&&c["#"]||o(9);if(!i)return e;var s=this.on(e,i,c);return s.err=s.err||setTimeout(function(){s.off(),s.next({err:"Error: No ACK yet.",lack:!0})},y),e}};var o=String.random||function(){return Math.random().toString(36).slice(2)}})(w,"./ask"),w(function(x){function o(t){return t instanceof o?(this._={$:this}).$:this instanceof o?o.create(this._={$:this,opt:t}):new o(t)}o.is=function(t){return t instanceof o||t&&t._&&t===t._.$||!1},o.version=.202,o.chain=o.prototype,o.chain.toJSON=function(){},w("./shim"),o.valid=w("./valid"),o.state=w("./state"),o.on=w("./onto"),o.dup=w("./dup"),o.ask=w("./ask"),function(){o.create=function(r){r.root=r.root||r,r.graph=r.graph||{},r.on=r.on||o.on,r.ask=r.ask||o.ask,r.dup=r.dup||o.dup();var v=r.$.opt(r.opt);return r.once||(r.on("in",t,r),r.on("out",t,r),r.on("put",k,r),o.on("create",r),r.on("create",r)),r.once=1,v};function t(r){if(r){if(r.out===t){this.to.next(r);return}var v=this,_=v.as,A=_.at||_,$=A.$,T=A.dup,D,N=r.DBG;if((D=r["#"])||(D=r["#"]=c(9)),!T.check(D)){if(T.track(D),D=r._,r._=typeof D=="function"?D:function(){},r.$&&r.$===(r.$._||"").$||(r.$=$),r["@"]&&!r.put&&n(r),!A.ask(r["@"],r))if(N&&(N.u=+new Date),r.put){h(r);return}else r.get&&o.on.get(r,$);N&&(N.uc=+new Date),v.to.next(r),N&&(N.ua=+new Date),!(r.nts||r.NTS)&&(r.out=t,A.on("out",r),N&&(N.ue=+new Date))}}}function h(r){if(r){var v=r._||"",_=v.root=((v.$=r.$||"")._||"").root;if(r["@"]&&v.faith&&!v.miss){r.out=t,_.on("out",r);return}v.latch=_.hatch,v.match=_.hatch=[];var A=r.put,$=v.DBG=r.DBG,T=+new Date;if(O=O||T,!(A["#"]&&A["."])){$&&($.p=T),v["#"]=r["#"],v.msg=r,v.all=0,v.stun=1;var D=Object.keys(A);console.STAT&&console.STAT(T,(($||v).pk=+new Date)-T,"put sort");var N=0,U,J,G,I,K,R,L;(function q(V){if(U!=N){if(U=N,!(G=D[N])){console.STAT&&console.STAT(T,(($||v).pd=+new Date)-T,"put"),a(v);return}(I=A[G])?(L=I._)?G!==L["#"]?R=l+S(G)+"soul not same.":(K=L[">"])||(R=l+S(G)+"no state."):R=l+S(G)+"no meta.":R=l+S(G)+"no node.",J=Object.keys(I||{})}if(R){r.err=v.err=R,a(v);return}var ct=0,F;for(V=V||0;V++<9&&(F=J[ct++]);)if(F!=="_"){var z=I[F],ft=K[F];if(u===ft){R=l+S(F)+"on"+S(G)+"no state.";break}if(!p(z)){R=l+S(F)+"on"+S(G)+"bad "+typeof z+S(z);break}m(z,F,G,ft,r),++C}if((J=J.slice(ct)).length){y(q);return}++N,J=null,q(V)})()}}}o.on.put=h;function m(r,v,_,A,$){var T=$._||"",D=T.root,N=D.graph,U,J=N[_]||g,G=e(J,v,1),I=J[v],K=T.DBG;(U=console.STAT)&&(!N[_]||!I)&&(U.has=(U.has||0)+1);var R=E();if(A>R){setTimeout(function(){m(r,v,_,A,$)},(U=A-R)>j?j:U),console.STAT&&console.STAT((K||T).Hf=+new Date,U,"future");return}if(!(A<G)&&!(!T.faith&&A===G&&(r===I||d(r)<=d(I))&&!T.miss)){T.stun++;var L=$["#"]+T.all++,q={toString:function(){return L},_:T};q.toJSON=q.toString,D.dup.track(q)["#"]=$["#"],K&&(K.ph=K.ph||+new Date),D.on("put",{"#":q,"@":$["@"],put:{"#":_,".":v,":":r,">":A},ok:$.ok,_:T})}}function k(r){var v;(v=(r._||"").DBG)&&(v.pa=+new Date,v.pm=v.pm||+new Date);var _=this,A=_.as,$=A.graph,T=r._,D=r.put,N=D["#"],U=D["."],J=D[":"],G=D[">"];r["#"];var I;(I=T.msg)&&(I=I.put)&&(I=I[N])&&s(I,U,G,J,N),$[N]=s($[N],U,G,J,N),(I=(A.next||"")[N])&&I.on("in",r),a(T),_.to.next(r)}function a(r,v){var _;if(!r.stop&&!(!r.err&&0<--r.stun)&&(r.stop=1,!!(_=r.root))){var A=r.match;A.end=1,A===_.hatch&&(!(A=r.latch)||A.end?delete _.hatch:_.hatch=A),r.hatch&&r.hatch(),setTimeout.each(r.match,function($){$&&$()}),!(!(v=r.msg)||r.err||v.err)&&(v.out=t,r.root.on("out",v),B())}}function n(r){var v=r["@"]||"",_;if(!(_=v._)){var A=(A=r.$)&&(A=A._)&&(A=A.root)&&(A=A.dup);if(!(A=A.check(v)))return;r["@"]=A["#"]||r["@"];return}_.acks=(_.acks||0)+1,(_.err=r.err)&&(r["@"]=_["#"],a(_)),_.ok=r.ok||_.ok,!_.stop&&!_.crack&&(_.crack=_.match&&_.match.push(function(){f(_)})),f(_)}function f(r){!r||!r.root||r.stun||r.acks!==r.all||r.root.on("in",{"@":r["#"],err:r.err,ok:r.err?u:r.ok||{"":1}})}var l="Error: Invalid graph!",S=function(r){return" '"+(""+r).slice(0,9)+"...' "},d=JSON.stringify,j=2147483647,E=o.state,C=0,O,B=function(){C>999&&C/-(O-(O=+new Date))>1&&(o.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),B=function(){C=0})}}(),function(){o.on.get=function(h,m){var k=m._,a=h.get,n=a["#"],f=k.graph[n],l=a["."],S=k.next||(k.next={}),d=S[n],j=h._||{},E=j.DBG=h.DBG;if(E&&(E.g=+new Date),!f)return k.on("get",h);if(l){if((typeof l!="string"||u===f[l])&&!((d||"").next||"")[l]){k.on("get",h);return}f=s({},l,e(f,l),f[l],n)}f&&t(h,f),k.on("get",h)};function t(h,m){var k=+new Date,a=h._||{},n=a.DBG=h.DBG,f=h["#"],l=c(9),S=Object.keys(m||"").sort(),d=((m||"")._||"")["#"];S.length;var j=h.$._.root,E=m===j.graph[d];console.STAT&&console.STAT(k,((n||a).gk=+new Date)-k,"got keys"),m&&function C(){k=+new Date;for(var O=0,B,r={},v;O<9&&(B=S[O++]);)s(r,B,e(m,B),m[B],d);S=S.slice(O),(v={})[d]=r,r=v;var _;E&&(_=function(){},_.ram=_.faith=!0),v=S.length,console.STAT&&console.STAT(k,-(k-(k=+new Date)),"got copied some"),n&&(n.ga=+new Date),j.on("in",{"@":f,"#":l,put:r,"%":v?l=c(9):u,$:j.$,_,DBG:n,FOO:1}),console.STAT&&console.STAT(k,+new Date-k,"got in"),v&&setTimeout.turn(C)}(),m||j.on("in",{"@":h["#"]})}o.on.get.ack=t}(),function(){o.chain.opt=function(t){t=t||{};var h=this,m=h._,k=t.peers||t;return Object.plain(t)||(t={}),Object.plain(m.opt)||(m.opt=t),typeof k=="string"&&(k=[k]),Object.plain(m.opt.peers)||(m.opt.peers={}),k instanceof Array&&(t.peers={},k.forEach(function(a){var n={};n.id=n.url=a,t.peers[a]=m.opt.peers[a]=m.opt.peers[a]||n})),i(t,function a(n){var f=this[n];if(this&&this.hasOwnProperty(n)||typeof f=="string"||Object.empty(f)){this[n]=f;return}f&&f.constructor!==Object&&!(f instanceof Array)||i(f,a)}),m.opt.from=t,o.on("opt",m),m.opt.uuid=m.opt.uuid||function(a){return o.state().toString(36).replace(".","")+String.random(a||12)},h}}();var i=function(t,h){Object.keys(t).forEach(h,t)},c=String.random,y=setTimeout.turn,p=o.valid,e=o.state.is,s=o.state.ify,u,g={},b;o.log=function(){return!o.log.off&&b.log.apply(b,arguments),[].slice.call(arguments).join(" ")},o.log.once=function(t,h,m){return(m=o.log.once)[t]=m[t]||0,m[t]++||o.log(h)},typeof window<"u"&&((window.GUN=window.Gun=o).window=window);try{typeof P<"u"&&(P.exports=o)}catch{}x.exports=o,(o.window||{}).console=(o.window||{}).console||{log:function(){}},(b=console).only=function(t,h){return b.only.i&&t===b.only.i&&b.only.i++&&(b.log.apply(b,arguments)||h)},o.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(w,"./root"),w(function(x){var o=w("./root");o.chain.back=function(y,p){var e;if(y=y||1,y===-1||y===1/0)return this._.root.$;if(y===1)return(this._.back||this._).$;var s=this,u=s._;if(typeof y=="string"&&(y=y.split(".")),y instanceof Array){var g=0,b=y.length,e=u;for(g;g<b;g++)e=(e||i)[y[g]];return c!==e?p?s:e:(e=u.back)?e.$.back(y,p):void 0}if(typeof y=="function"){for(var t,e={back:u};(e=e.back)&&c===(t=y(e,p)););return t}return typeof y=="number"?(u.back||u).$.back(y-1):this};var i={},c})(w,"./back"),w(function(x){var o=w("./root");o.chain.chain=function(a){var n=this,f=n._,l=new(a||n).constructor(n),S=l._,d;return S.root=d=f.root,S.id=++d.once,S.back=n._,S.on=o.on,S.on("in",o.on.in,S),S.on("out",o.on.out,S),l};function i(a){var n,f=this.as,l=f.back,S=f.root,d;if(a.$||(a.$=f.$),this.to.next(a),f.err){f.on("in",{put:f.put=u,$:f.$});return}if(n=a.get){if(S.pass&&(S.pass[f.id]=f),f.lex&&Object.keys(f.lex).forEach(function(j){d[j]=f.lex[j]},d=a.get=a.get||{}),n["#"]||f.soul){if(n["#"]=n["#"]||f.soul,a["#"]||(a["#"]=g(9)),l=S.$.get(n["#"])._,n=n["."]){if(t(l.put,n)&&(d=l.ask&&l.ask[n],(l.ask||(l.ask={}))[n]=l.$.get(n)._,l.on("in",{get:n,put:{"#":l.soul,".":n,":":l.put[n],">":m(S.graph[l.soul],n)}}),d))return}else{if(d=l.ask&&l.ask[""],(l.ask||(l.ask={}))[""]=l,u!==l.put&&(l.on("in",l),d))return;a.$=l.$}return S.ask(e,a),S.on("in",a)}if(n["."])return f.get?(a={get:{".":f.get},$:f.$},(l.ask||(l.ask={}))[f.get]=a.$._,l.on("out",a)):(a={get:f.lex?a.get:{},$:f.$},l.on("out",a));if((f.ask||(f.ask={}))[""]=f,f.get)return n["."]=f.get,(l.ask||(l.ask={}))[f.get]=a.$._,l.on("out",a)}return l.on("out",a)}o.on.out=i;function c(a,n){n=n||this.as;var f=n.root,l=a.$||(a.$=n.$),S=(l||"")._||s,d=a.put||"",j=d["#"],E=d["."],C=u!==d["="]?d["="]:d[":"],O=d[">"]||-1/0,B;if(u!==a.put&&(u===d["#"]||u===d["."]||u===d[":"]&&u===d["="]||u===d[">"])){if(!b(d)){if(!(j=((d||"")._||"")["#"])){console.log("chain not yet supported for",d,"...",a,n);return}return l=n.root.$.get(j),setTimeout.each(Object.keys(d).sort(),function(r){r=="_"||u===(O=m(d,r))||n.on("in",{$:l,put:{"#":j,".":r,"=":d[r],">":O},VIA:a})})}n.on("in",{$:S.back.$,put:{"#":j=S.back.soul,".":E=S.has||S.get,"=":d,">":m(S.back.put,E)},via:a});return}(a.seen||"")[n.id]||((a.seen||(a.seen=function(){}))[n.id]=n,n!==S&&(Object.keys(a).forEach(function(r){d[r]=a[r]},d={}),d.get=n.get||d.get,!n.soul&&!n.has?d.$$$=d.$$$||n.$:S.soul&&(d.$=n.$,d.$$=d.$$||S.$),a=d),p(a,n),(n.soul||a.$$)&&O>=m(f.graph[j],E)&&((d=f.$.get(j)._).put=k(d.put,E,O,C,j)),!S.soul&&O>=m(f.graph[j],E)&&(B=(f.$.get(j)._.next||"")[E])&&(B.put=C,typeof(d=b(C))=="string"&&(B.put=f.$.get(d)._.put||C)),this.to&&this.to.next(a),n.any&&setTimeout.each(Object.keys(n.any),function(r){(r=n.any[r])&&r(a)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(r){(r=n.echo[r])&&r.on("in",a)},0,99),((a.$$||"")._||S).soul&&(B=n.next)&&(B=B[E])&&(d={},Object.keys(a).forEach(function(r){d[r]=a[r]}),d.$=(a.$$||a.$).get(d.get=E),delete d.$$,delete d.$$$,B.on("in",d)),y(a,n))}o.on.in=c;function y(a,n){if(n=n||this.as||a.$._,!(a.$$&&this!==o.on)&&!(!a.put||n.soul)){var f=a.put||"",l=f["="]||f[":"],S,d=n.root,j=d.$.get(f["#"]).get(f["."])._;if(typeof(l=b(l))!="string"){this===o.on&&((j.echo||(j.echo={}))[n.id]=n);return}if(!((j.echo||(j.echo={}))[n.id]&&!(d.pass||"")[n.id])){if(S=d.pass){if(S[l+n.id])return;S[l+n.id]=1}(j.echo||(j.echo={}))[n.id]=n,n.has&&(n.link=l);var E=d.$.get(j.link=l)._;(E.echo||(E.echo={}))[j.id]=j;var S=n.ask||"";(S[""]||n.lex)&&E.on("out",{get:{"#":l}}),setTimeout.each(Object.keys(S),function(O,B){!O||!(B=S[O])||B.on("out",{get:{"#":l,".":O}})},0,99)}}}o.on.link=y;function p(a,n){var f=a.put||"",l=u!==f["="]?f["="]:f[":"],S=n.root,d,j;if(u===l){if(n.soul&&u!==n.put||(j=(a.$$||a.$||"")._||"",a["@"]&&(u!==j.put||u!==n.put)))return;(d=n.link||a.linked)&&delete(S.$.get(d)._.echo||"")[n.id],n.has&&(n.link=null),n.put=u,setTimeout.each(Object.keys(n.next||""),function(E,C){(C=n.next[E])&&(d&&delete(S.$.get(d).get(E)._.echo||"")[C.id],C.on("in",{get:E,put:u,$:C.$}))},0,99);return}n.soul||a.$$||(d=b(l),j=a.$._||"",!((d===j.link||n.has&&!j.link)&&!((S.pass||"")[n.id]&&typeof d!="string"))&&(delete(j.echo||"")[n.id],p({get:n.get,put:u,$:a.$,linked:a.linked=a.linked||j.link},n)))}o.on.unlink=p;function e(a,n){var f=this.as,l=f.$._;l.root;var S=f.get||"",d=(a.put||"")[S["#"]]||"";if(!a.put||typeof S["."]=="string"&&u===d[S["."]]){if(u!==l.put||!l.soul&&!l.has)return;l.ack=(l.ack||0)+1,l.on("in",{get:l.get,put:l.put=u,$:l.$,"@":a["@"]});return}(a._||{}).miss=1,o.on.put(a)}var s={},u,g=String.random,b=o.valid,t=function(a,n){return a&&Object.prototype.hasOwnProperty.call(a,n)},h=o.state,m=h.is,k=h.ify})(w,"./chain"),w(function(x){var o=w("./root");o.chain.get=function(u,g,b){var t,h;if(typeof u=="string"){if(u.length==0)return(t=this.chain())._.err={err:o.log("0 length key!",u)},g&&g.call(t,t._.err),t;var m=this,k=m._,a=k.next||p;(t=a[u])||(t=u&&i(u,m)),t=t&&t.$}else if(typeof u=="function"){let d=function(E,C,O){if(!d.stun&&!(($=f.pass)&&!$[l])){var B=E.$._,r=(E.$$||"")._,v=(r||B).put,_=!B.has&&!B.soul,A={},$;if((_||s===v)&&(v=s===(($=E.put)||"")["="]?s===($||"")[":"]?$:$[":"]:$["="]),typeof($=o.valid(v))=="string"&&(v=s===($=f.$.get($)._.put)?n.not?s:v:$),!(n.not&&s===v)){if(s===n.stun){if(($=f.stun)&&$.on&&(k.$.back(function(T){if($.on(""+T.id,A={}),(A.run||0)<d.id)return A}),!A.run&&$.on(""+B.id,A={}),!A.run&&r&&$.on(""+r.id,A={}),d.id>A.run&&((!A.stun||A.stun.end)&&(A.stun=$.on("stun"),A.stun=A.stun&&A.stun.last),A.stun&&!A.stun.end))){(A.stun.add||(A.stun.add={}))[l]=function(){d(E,C,1)};return}if(s===v&&(O=0),($=f.hatch)&&!$.end&&s===n.hatch&&!O){if(S[B.$._.id])return;S[B.$._.id]=1,$.push(function(){d(E,C,1)});return}S={}}if(f.pass){if(f.pass[l+B.id])return;f.pass[l+B.id]=1}if(n.on){n.ok.call(B.$,v,B.get,E,C||d);return}if(n.v2020){n.ok(E,C||d);return}Object.keys(E).forEach(function(T){$[T]=E[T]},$={}),E=$,E.put=v,n.ok.call(n.as,E,C||d)}}};if(g===!0)return c(this,u,g,b),this;t=this;var k=t._,n=g||{},f=k.root,l;n.at=k,n.ok=u;var S={};return d.at=k,(k.any||(k.any={}))[l=String.random(7)]=d,d.off=function(){d.stun=1,k.any&&delete k.any[l]},d.rid=y,d.id=n.run||++f.once,h=f.pass,(f.pass={})[l]=1,n.out=n.out||{get:{}},k.on("out",n.out),f.pass=h,t}else{if(typeof u=="number")return this.get(""+u,g,b);if(typeof(h=e(u))=="string")return this.get(h,g,b);(h=this.get.next)&&(t=h(this,u))}return t?(g&&typeof g=="function"&&t.get(g,b),t):((t=this.chain())._.err={err:o.log("Invalid get request!",u)},g&&g.call(t,t._.err),t)};function i(u,g){var b=g._,t=b.next,h=g.chain(),m=h._;return t||(t=b.next={}),t[m.get=u]=m,g===b.root.$?m.soul=u:(b.soul||b.has)&&(m.has=u),m}function c(u,g,b,t){var h=u._,m=0,k;return(k=h.soul||h.link)?g(k,t,h):h.jam?h.jam.push([g,t]):(h.jam=[[g,t]],u.get(function(a,n){if(!(s===a.put&&!h.root.opt.super&&(k=Object.keys(h.root.opt.peers).length)&&++m<=k)){n.rid(a);var f=(f=a.$)&&f._||{},l=0,S;for(k=h.jam,delete h.jam;S=k[l++];){var d=S[0];S=S[1],d&&d(f.link||f.soul||o.valid(a.put)||((a.put||{})._||{})["#"],S,a,n)}}},{out:{get:{".":!0}}}),u)}function y(u){var g=this.at||this.on;if(!u||g.soul||g.has)return this.off();if(u=(u=(u=u.$||u)._||u).id){g.map;var b;if((b=this.seen||(this.seen={}))[u])return!0;b[u]=!0}}var p={},e=o.valid,s})(w,"./get"),w(function(x){var o=w("./root");o.chain.put=function(t,h,m){var k=this,a=k._,n=a.root;m=m||{},m.root=a.root,m.run||(m.run=n.once),i(m,a.id),m.ack=m.ack||h,m.via=m.via||k,m.data=m.data||t,m.soul||(m.soul=a.soul||typeof h=="string"&&h);var f=m.state=m.state||o.state();return typeof t=="function"?(t(function(l){m.data=l,k.put(e,e,m)}),k):m.soul?(m.$=n.$.get(m.soul),m.todo=[{it:m.data,ref:m.$}],m.turn=m.turn||u,m.ran=m.ran||c,function l(){var S=m.todo,d=S.pop(),j=d.it;d.ref&&d.ref._.id;var E,C,O,B,r;if(i(m,d.ref),(B=d.todo)&&(C=B.pop(),j=j[C],B.length&&S.push(d)),C&&(S.path||(S.path=[])).push(C),!(E=g(j))&&!(r=o.is(j))){if(!Object.plain(j)){c.err(m,"Invalid data: "+p(j)+" at "+(m.via.back(function($){$.get&&B.push($.get)},B=[])||B.join("."))+"."+(S.path||[]).join("."));return}for(var v=m.seen||(m.seen=[]),_=v.length;_--;)if(j===(B=v[_]).it){E=j=B.link;break}}if(C&&E)d.node=b(d.node,C,f,j);else{let $=function(T,D){var N=O.link["#"];D&&(D.off(),D.rid(T));var U=N||T.soul||(B=(T.$$||T.$)._||"").soul||B.link||((B=B.put||"")._||"")["#"]||B["#"]||((B=T.put||"")&&T.$$?B["#"]:(B["="]||B[":"]||"")["#"]);if(!N&&i(m,T.$),!U&&!d.link["#"]){(d.wait||(d.wait=[])).push(function(){$(T,D)});return}U||(U=[],(T.$$||T.$).back(function(J){if(B=J.soul||J.link)return U.push(B);U.push(J.get)}),U=U.reverse().join("/")),O.link["#"]=U,!r&&(((m.graph||(m.graph={}))[U]=O.node||(O.node={_:{}}))._["#"]=U),delete m.wait[A],O.wait&&setTimeout.each(O.wait,function(J){J&&J()}),m.ran(m)};if(!m.seen){c.err(m,"Data at root of graph must be a node (an object).");return}m.seen.push(O={it:j,link:{},todo:r?[]:Object.keys(j).sort().reverse(),path:(S.path||[]).slice(),up:d}),d.node=b(d.node,C,f,O.link),!r&&O.todo.length&&S.push(O);var A=m.seen.length;(m.wait||(m.wait={}))[A]="",B=(O.ref=r?j:C?d.ref.get(C):d.ref)._,(B=j&&(j._||"")["#"]||B.soul||B.link)?$({soul:B}):O.ref.get($,{run:m.run,v2020:1,out:{get:{".":" "}}})}if(!S.length)return m.ran(m);m.turn(l)}(),k):(y(m),k)};function i(t,h){if(h){h=(h._||"").id||h;var m=t.root.stun||(t.root.stun={on:o.on}),k={},a;t.stun||(t.stun=m.on("stun",function(){})),(a=m.on(""+h))&&a.the.last.next(k),!(k.run>=t.run)&&m.on(""+h,function(n){if(t.stun.end){this.off(),this.to.next(n);return}n.run=n.run||t.run,n.stun=n.stun||t.stun})}}function c(t){if(t.err){c.end(t.stun,t.root);return}if(!(t.todo.length||t.end||!Object.empty(t.wait))){t.end=1;var h=t.$.back(-1)._,m=h.root,k=h.ask(function(l){m.on("ack",l),l.err&&!l.lack&&o.log(l),++a>(t.acks||0)&&this.off(),t.ack&&t.ack(l,this)},t.opt),a=0,n=t.stun,f;(f=function(){n&&(c.end(n,m),setTimeout.each(Object.keys(n=n.add||""),function(l){(l=n[l])&&l()}))}).hatch=f,t.ack&&!t.ok&&(t.ok=t.acks||9),t.via._.on("out",{put:t.out=t.graph,ok:t.ok&&{"@":t.ok+1},opt:t.opt,"#":k,_:f})}}c.end=function(t,h){t.end=s,t.the.to===t&&t===t.the.last&&delete h.stun,t.off()},c.err=function(t,h){(t.ack||s).call(t,t.out={err:t.err=o.log(h)}),t.ran(t)};function y(t){var h=t.via._,m;t.via=t.via.back(function(k){if(k.soul||!k.get)return k.$;m=t.data,(t.data={})[k.get]=m}),(!t.via||!t.via._.soul)&&(t.via=h.root.$.get(((t.data||"")._||"")["#"]||h.$.back("opt.uuid")())),t.via.put(t.data,t.ack,t)}function p(t,h){return t&&(h=t.constructor)&&h.name||typeof t}var e,s=function(){},u=setTimeout.turn,g=o.valid,b=o.state.ify})(w,"./put"),w(function(x){var o=w("./root");w("./chain"),w("./back"),w("./put"),w("./get"),x.exports=o})(w,"./index"),w(function(x){var o=w("./index");o.chain.on=function(y,p,e,s){var u=this,g=u._;g.root;var b;if(typeof y=="string")return p?(b=g.on(y,p,e||g,s),e&&e.$&&(e.subs||(e.subs=[])).push(b),u):g.on(y);var t=p;return(t=t===!0?{change:!0}:t||{}).not=1,t.on=1,u.get(y,t),u},o.chain.once=function(y,p){if(p=p||{},!y)return i(this);var e=this,s=e._,u=s.root;s.put;var g=String.random(7),b;return e.get(function(t,h,m,k){var a=this,n=a._,f=n.one||(n.one={});if(k.stun||f[g]==="")return;if((b=o.valid(t))===!0){l();return}if(typeof b=="string")return;clearTimeout((s.one||"")[g]),clearTimeout(f[g]),f[g]=setTimeout(l,p.wait||99);function l(S){if(!n.has&&!n.soul&&(n={put:t,get:h}),c===(b=n.put)&&(b=((m.$$||"")._||"").put),typeof o.valid(b)=="string"&&(b=u.$.get(b)._.put,b===c&&!S)){f[g]=setTimeout(function(){l(1)},p.wait||99);return}k.stun||f[g]!==""&&(f[g]="",(s.soul||s.has)&&k.off(),y.call(a,b,n.get),clearTimeout(f[g]))}},{on:1}),e};function i(y,p,e){return o.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(e=y.chain())._.nix=y.once(function(s,u){e._.on("in",this._)}),e._.lex=y._.lex,e}o.chain.off=function(){var y=this,p=y._,e,s=p.back;if(s)return p.ack=0,(e=s.next)&&e[p.get]&&delete e[p.get],(e=s.any)&&(delete s.any,s.any={}),(e=s.ask)&&delete e[p.get],(e=s.put)&&delete e[p.get],(e=p.soul)&&delete s.root.graph[e],(e=p.map)&&Object.keys(e).forEach(function(u,g){g=e[u],g.link&&s.root.$.get(g.link).off()}),(e=p.next)&&Object.keys(e).forEach(function(u,g){g=e[u],g.$.off()}),p.on("off",{}),y};var c})(w,"./on"),w(function(x){var o=w("./index"),i=o.chain.get.next;o.chain.get.next=function(e,s){var u;return Object.plain(s)?(u=((u=s["#"])||"")["="]||u)?e.get(u):((u=e.chain()._).lex=s,e.on("in",function(g){String.match(g.get||(g.put||"")["."],s["."]||s["#"]||s)&&u.on("in",g),this.to.next(g)}),u.$):(i||y)(e,s)},o.chain.map=function(e,s,u){var g=this,b=g._,t,h;return Object.plain(e)&&(t=e["."]?e:{".":e},e=p),e?(o.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),h=g.chain(),g.map().on(function(m,k,a,n){var f=(e||y).call(this,m,k,a,n);if(p!==f){if(m===f)return h._.on("in",a);if(o.is(f))return h._.on("in",f._);var l={};Object.keys(a.put).forEach(function(S){l[S]=a.put[S]},l),l["="]=f,h._.on("in",{get:k,put:l})}}),h):((h=b.each)||((b.each=h=g.chain())._.lex=t||h._.lex||b.lex,h._.nix=g.back("nix"),g.on("in",c,h._)),h)};function c(e){this.to.next(e);var s=this.as,u=e.$,g=u._,b=e.put,t;!g.soul&&!e.$$||(t=s.lex)&&!String.match(e.get||(b||"")["."],t["."]||t["#"]||t)||o.on.link(e,s)}var y=function(){},p})(w,"./map"),w(function(x){var o=w("./index");o.chain.set=function(i,c,y){var p=this,e=p.back(-1),s,u;return c=c||function(){},y=y||{},y.item=y.item||i,(s=((i||"")._||"")["#"])&&((i={})["#"]=s),typeof(u=o.valid(i))=="string"?p.get(s=u).put(i,c,y):o.is(i)?(p.put(function(g){i.get(function(b,t,h){if(!b)return c.call(p,{err:o.log('Only a node can be linked! Not "'+h.put+'"!')});(u={})[b]={"#":b},g(u)},!0)}),i):(Object.plain(i)&&(i=e.get(s=p.back("opt.uuid")()).put(i)),p.get(s||e.back("opt.uuid")(7)).put(i,c,y))}})(w,"./set"),w(function(x){w("./shim");var o=function(){},i=JSON.parseAsync||function(e,s,u){var g,b=+new Date;try{s(g,JSON.parse(e,u),c.sucks(+new Date-b))}catch(t){s(t)}},c=JSON.stringifyAsync||function(e,s,u,g){var b,t=+new Date;try{s(b,JSON.stringify(e,u,g),c.sucks(+new Date-t))}catch(h){s(h)}};c.sucks=function(e){e>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),c.sucks=o)};function y(e){var s=function(){},u=e.opt||{};u.log=u.log||console.log,u.gap=u.gap||u.wait||0,u.max=u.max||(u.memory?u.memory*999*999:3e8)*.3,u.pack=u.pack||u.max*.01*.01,u.puff=u.puff||9;var g=setTimeout.turn||setTimeout,b=e.dup,t=b.check,h=b.track,m=s.hear=function(n,f){if(n){if(u.max<=n.length)return s.say({dam:"!",err:"Message too big!"},f);s===this&&(m.d+=n.length||0,++m.c);var l=f.SH=+new Date,S=n[0],d;if(S==="["){i(n,function(j,E){if(j||!E)return s.say({dam:"!",err:"DAM JSON parse error."},f);console.STAT&&console.STAT(+new Date,E.length,"# on hear batch");var C=u.puff;(function O(){for(var B=+new Date,r=0,v;r<C&&(v=E[r++]);)s.hear(v,f);E=E.slice(r),console.STAT&&console.STAT(B,+new Date-B,"hear loop"),k(f),E.length&&g(O,0)})()}),n="";return}if(S==="{"||(n["#"]||Object.plain(n))&&(d=n)){if(d)return m.one(d,f,l);i(n,function(j,E){if(j||!E)return s.say({dam:"!",err:"DAM JSON parse error."},f);m.one(E,f,l)});return}}};m.one=function(n,f,l){var S,d,j,E,C;if(n.DBG&&(n.DBG=C={DBG:n.DBG}),C&&(C.h=l),C&&(C.hp=+new Date),(S=n["#"])||(S=n["#"]=String.random(9)),!(j=t(S))&&(d=n["##"],!(d&&(j=n["@"]||n.get&&S)&&b.check(E=j+d)))){if((n._=function(){}).via=s.leap=f,(j=n["><"])&&typeof j=="string"&&j.slice(0,99).split(",").forEach(function(B){this[B]=1},n._.yo={}),j=n.dam){(j=s.hear[j])&&j(n,f,e),h(S);return}(j=n.ok)&&(n._.near=j["/"]);var l=+new Date;C&&(C.is=l),f.SI=S,h.ed=function(B){S===B&&(h.ed=0,(B=b.s[S])&&(B.via=f,n.get&&(B.it=n)))},e.on("in",s.last=n),C&&(C.hd=+new Date),console.STAT&&console.STAT(l,+new Date-l,n.get?"msg get":n.put?"msg put":"msg"),h(S),E&&h(E),s.leap=s.last=null}},m.c=m.d=0,function(){var n=0,f;s.hash=function(d,j){var E,C,O,B=+new Date;c(d.put,function r(v,_){var A=(C||(C=O=_||"")).slice(0,32768);if(E=String.hash(A,E),C=C.slice(32768),C){g(r,0);return}console.STAT&&console.STAT(B,+new Date-B,"say json+hash"),d._.$put=O,d["##"]=E,s.say(d,j),delete d._.$put},l)};function l(d,j){var E;return j instanceof Object?(Object.keys(j).sort().forEach(S,{to:E={},on:j}),E):j}function S(d){this.to[d]=this.on[d]}s.say=function(d,j){var E;if((E=this)&&(E=E.to)&&E.next&&E.next(d),!d)return!1;var C,O,B,r=d["@"],v=d._||(d._=function(){}),_=d.DBG,A=+new Date;if(v.y=v.y||A,j||_&&(_.y=A),(C=d["#"])||(C=d["#"]=String.random(9)),!f&&h(C),!(O=d["##"])&&p!==d.put&&!v.via&&r){s.hash(d,j);return}if(!j&&r&&(j=(E=b.s[r])&&(E.via||(E=E.it)&&(E=E._)&&E.via)||(E=s.last)&&r===E["#"]&&s.leap),!j&&r)return b.s[r]?void 0:(console.STAT&&console.STAT(+new Date,++n,"total no peer to ack to"),!1);if(r&&!d.put&&!O&&((b.s[r]||"").it||"")["##"])return!1;if(!j&&s.way)return s.way(d);if(_&&(_.yh=+new Date),!(B=v.raw)){s.raw(d,j);return}if(_&&(_.yr=+new Date),!j||!j.id){if(!Object.plain(j||u.peers))return!1;var A=+new Date;u.puff;var $=u.peers,T=Object.keys(j||u.peers||{});console.STAT&&console.STAT(A,+new Date-A,"peer keys"),function U(){var J=+new Date;f=1;var G=v.raw;v.raw=B;for(var I=0,K;I<9&&(K=(T||"")[I++]);)(K=$[K]||(j||"")[K])&&s.say(d,K);v.raw=G,f=0,T=T.slice(I),console.STAT&&console.STAT(J,+new Date-J,"say loop"),T.length&&(g(U,0),r&&h(r))}();return}if(!j.wire&&s.wire&&s.wire(j),C!==j.last){if(j.last=C,j===v.via||(E=v.yo)&&(E[j.url]||E[j.pid]||E[j.id]))return!1;if(console.STAT&&console.STAT(A,((_||v).yp=+new Date)-(v.y||A),"say prep"),!f&&r&&h(r),j.batch){if(j.tail=(E=j.tail||0)+B.length,j.tail<=u.pack){j.batch+=(E?",":"")+B;return}k(j)}j.batch="[";var D=+new Date;setTimeout(function(){console.STAT&&console.STAT(D,+new Date-D,"0ms TO"),k(j)},u.gap),a(B,j),console.STAT&&r===j.SI&&console.STAT(A,+new Date-j.SH,"say ack")}},s.say.c=s.say.d=0,s.raw=function(d,j){if(!d)return"";var E=d._||{},C,O;if(O=E.raw)return O;if(typeof d=="string")return d;var B=d["##"],r=d["@"];if(B&&r){if(!E.via&&t(r+B))return!1;if(O=(b.s[r]||"").it){if(B===O["##"])return!1;O["##"]||(O["##"]=B)}}if(!d.dam&&!d["@"]){var v=0,_=[];O=u.peers;for(var A in O){var $=O[A];if(_.push($.url||$.pid||$.id),++v>6)break}v>1&&(d["><"]=_.join())}if(d.put&&(O=d.ok)&&(d.ok={"@":(O["@"]||1)-1,"/":O["/"]==d._.near?s.near:O["/"]}),C=E.$put){O={},Object.keys(d).forEach(function(D){O[D]=d[D]}),O.put=":])([:",c(O,function(D,N){if(!D){var U=+new Date;O=N.indexOf('"put":":])([:"'),T(p,N=N.slice(0,O+6)+C+N.slice(O+14)),console.STAT&&console.STAT(U,+new Date-U,"say slice")}});return}c(d,T);function T(D,N){D||(E.raw=N,s.say(d,j))}}}();function k(n){var f=n.batch,l=typeof f=="string";if(l&&(f+="]"),n.batch=n.tail=null,!!f&&!(l?3>f.length:!f.length)){if(!l)try{f=f.length===1?f[0]:JSON.stringify(f)}catch(S){return u.log("DAM JSON stringify error",S)}f&&a(f,n)}}function a(n,f){try{var l=f.wire;f.say?f.say(n):l.send&&l.send(n),s.say.d+=n.length||0,++s.say.c}catch{(f.queue=f.queue||[]).push(n)}}return s.near=0,s.hi=function(n){var f=n.wire,l;if(!f){s.wire(n.length&&{url:n,id:n}||n);return}n.id?u.peers[n.url||n.id]=n:(l=n.id=n.id||n.url||String.random(9),s.say({dam:"?",pid:e.opt.pid},u.peers[l]=n),delete b.s[n.last]),n.met||(s.near++,n.met=+new Date,e.on("hi",n)),l=n.queue,n.queue=[],setTimeout.each(l||[],function(S){a(S,n)},0,9)},s.bye=function(n){n.met&&--s.near,delete n.met,e.on("bye",n);var f=+new Date;f=f-(n.met||f),s.bye.time=((s.bye.time||f)+f)/2},s.hear["!"]=function(n,f){u.log("Error:",n.err)},s.hear["?"]=function(n,f){n.pid&&(f.pid||(f.pid=n.pid),n["@"])||(s.say({dam:"?",pid:u.pid,"@":n["#"]},f),delete b.s[f.last])},s.hear.mob=function(n,f){if(n.peers){var l=Object.keys(n.peers),S=l[Math.random()*l.length>>0];S&&(s.bye(f),s.hi(S))}},e.on("create",function(n){n.opt.pid=n.opt.pid||String.random(9),this.to.next(n),n.on("out",s.say)}),e.on("bye",function(n,f){n=u.peers[n.id||n]||n,this.to.next(n),n.bye?n.bye():(f=n.wire)&&f.close&&f.close(),delete u.peers[n.id],n.wire=null}),e.on("bye",function(n,f){this.to.next(n),(f=console.STAT)&&(f.peers=s.near),(f=n.url)&&setTimeout(function(){},u.lack||9e3)}),e.on("hi",function(n,f){if(this.to.next(n),(f=console.STAT)&&(f.peers=s.near),!u.super){var l=Object.keys(e.next||"");l.length>9999&&!console.SUBS&&console.log(console.SUBS="Warning: You have more than 10K live GETs, which might use more bandwidth than your screen can show - consider `.off()`."),setTimeout.each(l,function(S){var d=e.next[S];if(u.super||(d.ask||"")[""]){s.say({get:{"#":S}},n);return}setTimeout.each(Object.keys(d.ask||""),function(j){j&&s.say({"##":String.hash((e.graph[S]||"")[j]),get:{"#":S,".":j}},n)})})}}),s}var p;try{x.exports=y}catch{}})(w,"./mesh"),w(function(x){var o=w("./index");o.Mesh=w("./mesh"),o.on("opt",function(c){if(this.to.next(c),c.once)return;var y=c.opt;if(y.WebSocket===!1)return;var p=o.window||{},e=y.WebSocket||p.WebSocket||p.webkitWebSocket||p.mozWebSocket;if(!e)return;y.WebSocket=e;var s=y.mesh=y.mesh||o.Mesh(c);s.wire||y.wire,s.wire=y.wire=u;function u(h){try{if(!h||!h.url)return k&&k(h);var m=h.url.replace(/^http/,"ws"),k=h.wire=new y.WebSocket(m);return k.onclose=function(){b(h),y.mesh.bye(h)},k.onerror=function(a){b(h)},k.onopen=function(){y.mesh.hi(h)},k.onmessage=function(a){a&&y.mesh.hear(a.data||a,h)},k}catch{y.mesh.bye(h)}}setTimeout(function(){!y.super&&c.on("out",{dam:"hi"})},1);var g=2*999;function b(h){clearTimeout(h.defer),y.peers[h.url]&&(t&&h.retry<=0||(h.retry=(h.retry||y.retry+1||60)-(-h.tried+(h.tried=+new Date)<g*4?1:0),h.defer=setTimeout(function m(){if(t&&t.hidden)return setTimeout(m,g);u(h)},g)))}var t=""+i!=typeof document&&document});var i})(w,"./websocket"),w(function(x){if(!(typeof Gun>"u")){var o=function(){},i;try{i=(Gun.window||o).localStorage}catch{}i||(Gun.log("Warning: No localStorage exists to persist data to!"),i={setItem:function(y,p){this[y]=p},removeItem:function(y){delete this[y]},getItem:function(y){return this[y]}});var c=JSON.stringifyAsync||function(y,p,e,s){var u;try{p(u,JSON.stringify(y,e,s))}catch(g){p(g)}};Gun.on("create",function y(p){this.to.next(p);var e=p.opt;p.graph;var s=[],u,g,b,t;if(e.localStorage===!1)return;e.prefix=e.file||"gun/";try{u=y[e.prefix]=y[e.prefix]||JSON.parse(b=i.getItem(e.prefix))||{}}catch{u=y[e.prefix]={}}b=(b||"").length,p.on("get",function(m){this.to.next(m);var k=m.get,a,n,f,l;!k||!(a=k["#"])||(n=u[a]||l,n&&(f=k["."])&&!Object.plain(f)&&(n=Gun.state.ify({},f,Gun.state.is(n,f),n[f],a)),Gun.on.get.ack(m,n))}),p.on("put",function(m){this.to.next(m);var k=m.put,a=k["#"],n=k["."],f=m["#"],l=m.ok||"";if(u[a]=Gun.state.ify(u[a],n,k[">"],k[":"],a),t&&b>4999880){p.on("in",{"@":f,err:"localStorage max!"});return}!m["@"]&&(!m._.via||Math.random()<l["@"]/l["/"])&&s.push(f),!g&&(g=setTimeout(h,9+b/333))});function h(){if(!s.length&&((setTimeout.turn||"").s||"").length){setTimeout(h,99);return}var m=s;clearTimeout(g),g=!1,s=[],c(u,function(k,a){try{!k&&i.setItem(e.prefix,a)}catch(n){k=t=n||"localStorage failure"}k&&(Gun.log(k+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),p.on("localStorage:error",{err:k,get:e.prefix,put:u})),b=a.length,setTimeout.each(m,function(n){p.on("in",{"@":n,err:k,ok:0})},0,99)})}})}})(w,"./localStorage")})(),function(){var w;if(""+w!=typeof Gun){var P=function(r){console.warn("Warning! Deprecated internal utility will break in next version:",r)},x=Gun;x.fn=x.fn||{is:function(r){return P("fn"),!!r&&typeof r=="function"}},x.bi=x.bi||{is:function(r){return P("bi"),r instanceof Boolean||typeof r=="boolean"}},x.num=x.num||{is:function(r){return P("num"),!o(r)&&(r-parseFloat(r)+1>=0||r===1/0||r===-1/0)}},x.text=x.text||{is:function(r){return P("text"),typeof r=="string"}},x.text.ify=x.text.ify||function(r){return P("text.ify"),x.text.is(r)?r:typeof JSON<"u"?JSON.stringify(r):r&&r.toString?r.toString():r},x.text.random=x.text.random||function(r,v){P("text.random");var _="";for(r=r||24,v=v||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";r>0;)_+=v.charAt(Math.floor(Math.random()*v.length)),r--;return _},x.text.match=x.text.match||function(r,v){var _,A;return P("text.match"),typeof r!="string"?!1:(typeof v=="string"&&(v={"=":v}),v=v||{},_=v["="]||v["*"]||v[">"]||v["<"],r===_?!0:A!==v["="]?!1:(_=v["*"]||v[">"]||v["<"],r.slice(0,(_||"").length)===_?!0:A!==v["*"]?!1:A!==v[">"]&&A!==v["<"]?r>=v[">"]&&r<=v["<"]:A!==v[">"]&&r>=v[">"]||A!==v["<"]&&r<=v["<"]))},x.text.hash=x.text.hash||function(r,v){if(P("text.hash"),typeof r=="string"){if(v=v||0,!r.length)return v;for(var _=0,A=r.length,$;_<A;++_)$=r.charCodeAt(_),v=(v<<5)-v+$,v|=0;return v}},x.list=x.list||{is:function(r){return P("list"),r instanceof Array}},x.list.slit=x.list.slit||Array.prototype.slice,x.list.sort=x.list.sort||function(r){return P("list.sort"),function(v,_){return!v||!_?0:(v=v[r],_=_[r],v<_?-1:v>_?1:0)}},x.list.map=x.list.map||function(r,v,_){return P("list.map"),C(r,v,_)},x.list.index=1,x.obj=x.boj||{is:function(r){return P("obj"),r?r instanceof Object&&r.constructor===Object||Object.prototype.toString.call(r).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},x.obj.put=x.obj.put||function(r,v,_){return P("obj.put"),(r||{})[v]=_,r},x.obj.has=x.obj.has||function(r,v){return P("obj.has"),r&&Object.prototype.hasOwnProperty.call(r,v)},x.obj.del=x.obj.del||function(r,v){if(P("obj.del"),!!r)return r[v]=null,delete r[v],r},x.obj.as=x.obj.as||function(r,v,_,A){return P("obj.as"),r[v]=r[v]||(A===_?{}:_)},x.obj.ify=x.obj.ify||function(r){if(P("obj.ify"),l(r))return r;try{r=JSON.parse(r)}catch{r={}}return r},function(){var r;function v(_,A){d(this,A)&&r!==this[A]||(this[A]=_)}x.obj.to=x.obj.to||function(_,A){return P("obj.to"),A=A||{},C(_,v,A),A}}(),x.obj.copy=x.obj.copy||function(r){return P("obj.copy"),r&&JSON.parse(JSON.stringify(r))},function(){function r(v,_){var A=this.n,$;if(!(A&&(_===A||l(A)&&d(A,_)))&&$!==_)return!0}x.obj.empty=x.obj.empty||function(v,_){return P("obj.empty"),v?!C(v,r,{n:_}):!0}}(),function(){function r(A,$){if(arguments.length===2){r.r=r.r||{},r.r[A]=$;return}r.r=r.r||[],r.r.push(A)}var v=Object.keys,_;Object.keys=Object.keys||function(A){return _(A,function($,T,D){D(T)})},x.obj.map=_=x.obj.map||function(A,$,T){P("obj.map");var D,N=0,U,J,G,I,K=typeof $=="function";if(r.r=D,v&&l(A)&&(G=v(A),I=!0),T=T||{},o(A)||G)for(U=(G||A).length;N<U;N++){var R=N+x.list.index;if(K){if(J=I?$.call(T,A[G[N]],G[N],r):$.call(T,A[N],R,r),J!==D)return J}else if($===A[I?G[N]:N])return G?G[N]:R}else for(N in A)if(K){if(d(A,N)&&(J=T?$.call(T,A[N],N,r):$(A[N],N,r),J!==D))return J}else if($===A[N])return N;return K?r.r:x.list.index?0:-1}}(),x.time=x.time||{},x.time.is=x.time.is||function(r){return P("time"),r?r instanceof Date:+new Date().getTime()};var n=x.fn.is,o=x.list.is,f=x.obj,l=f.is,d=f.has,C=f.map,i={};i.is=function(r){return P("val.is"),r===w?!1:r===null?!0:r===1/0?!1:p(r)||y(r)||h(r)?!0:i.link.is(r)||!1},i.link=i.rel={_:"#"},function(){i.link.is=function(v){if(P("val.link.is"),v&&v[c]&&!v._&&l(v)){var _={};if(C(v,r,_),_.id)return _.id}return!1};function r(v,_){var A=this;if(A.id)return A.id=!1;if(_==c&&p(v))A.id=v;else return A.id=!1}}(),i.link.ify=function(r){return P("val.link.ify"),E({},c,r)},x.obj.has._=".";var c=i.link._,w,y=x.bi.is,h=x.num.is,p=x.text.is,f=x.obj,l=f.is,E=f.put,C=f.map;x.val=x.val||i;var e={_:"_"};e.soul=function(r,v){return P("node.soul"),r&&r._&&r._[v||g]},e.soul.ify=function(r,v){return P("node.soul.ify"),v=typeof v=="string"?{soul:v}:v||{},r=r||{},r._=r._||{},r._[g]=v.soul||r._[g]||u(),r},e.soul._=i.link._,function(){e.is=function(v,_,A){P("node.is");var $;return l(v)&&($=e.soul(v))?!C(v,r,{as:A,cb:_,s:$,n:v}):!1};function r(v,_){if(_!==e._){if(!i.is(v))return!0;this.cb&&this.cb.call(this.as,v,_,this.n,this.s)}}}(),function(){e.ify=function(v,_,A){return P("node.ify"),_?typeof _=="string"?_={soul:_}:typeof _=="function"&&(_={map:_}):_={},_.map&&(_.node=_.map.call(A,v,w,_.node||{})),(_.node=e.soul.ify(_.node||{},_))&&C(v,r,{o:_,as:A}),_.node};function r(v,_){var A=this.o,$,T;if(A.map){$=A.map.call(this.as,v,""+_,A.node),T===$?S(A.node,_):A.node&&(A.node[_]=$);return}i.is(v)&&(A.node[_]=v)}}();var f=x.obj,l=f.is,S=f.del,C=f.map,s=x.text,u=s.random,g=e.soul._,w;x.node=x.node||e;var b=x.state;b.lex=function(){return P("state.lex"),b().toString(36).replace(".","")},b.to=function(r,v,_){P("state.to");var A=(r||{})[v];return l(A)&&(A=O(A)),b.ify(_,v,b.is(r,v),A,e.soul(r))},function(){b.map=function(v,_,A){P("state.map");var $,T=l(T=v||_)?T:null;return v=n(v=v||_)?v:null,T&&!v?(_=h(_)?_:b(),T[k]=T[k]||{},C(T,r,{o:T,s:_}),T):(A=A||l(_)?_:$,_=h(_)?_:b(),function(D,N,U,J){if(!v)return r.call({o:U,s:_},D,N),D;v.call(A||this||{},D,N,U,J),!(d(U,N)&&$===U[N])&&r.call({o:U,s:_},D,N)})};function r(v,_){k!==_&&b.ify(this.o,_,this.s)}}();var f=x.obj;f.as;var d=f.has,l=f.is,C=f.map,O=f.copy,t=x.num,h=t.is,m=x.fn,n=m.is,k=e._,w,a={};(function(){a.is=function(_,A,$,T){return P("graph.is"),!_||!l(_)||j(_)?!1:!C(_,r,{cb:A,fn:$,as:T})};function r(_,A){if(!_||A!==e.soul(_)||!e.is(_,this.fn,this.as))return!0;this.cb&&(v.n=_,v.as=this.as,this.cb.call(v.as,_,A,v))}function v(_){_&&e.is(v.n,_,v.as)}})(),function(){a.ify=function(T,D,N){P("graph.ify");var U={path:[],obj:T};return D?typeof D=="string"?D={soul:D}:typeof D=="function"&&(D.map=D):D={},typeof N=="string"&&(D.soul=D.soul||N,N=w),D.soul&&(U.link=i.link.ify(D.soul)),D.shell=(N||{}).shell,D.graph=D.graph||{},D.seen=D.seen||[],D.as=D.as||N,r(D,U),D.root=U.node,D.graph};function r(T,D){var N;return(N=$(T,D))?N:(D.env=T,D.soul=_,e.ify(D.obj,v,D)&&(D.link=D.link||i.link.ify(e.soul(D.node)),D.obj!==T.shell&&(T.graph[i.link.is(D.link)]=D.node)),D)}function v(T,D,N){var U=this,J=U.env,G,I;if(e._===D&&d(T,i.link._))return N._;if(G=A(T,D,N,U,J)){if(D||(U.node=U.node||N||{},d(T,e._)&&e.soul(T)&&(U.node._=O(T._)),U.node=e.soul.ify(U.node,i.link.is(U.link)),U.link=U.link||i.link.ify(e.soul(U.node))),(I=J.map)&&(I.call(J.as||{},T,D,N,U),d(N,D))){if(T=N[D],w===T){S(N,D);return}if(!(G=A(T,D,N,U,J)))return}if(!D)return U.node;if(G===!0)return T;if(I=r(J,{obj:T,path:U.path.concat(D)}),!!I.node)return I.link}}function _(T){var D=this,N=i.link.is(D.link),U=D.env.graph;D.link=D.link||i.link.ify(T),D.link[i.link._]=T,D.node&&D.node[e._]&&(D.node[e._][i.link._]=T),d(U,N)&&(U[T]=U[N],S(U,N))}function A(T,D,N,U,J){var G;if(i.is(T))return!0;if(l(T))return 1;if(G=J.invalid)return T=G.call(J.as||{},T,D,N),A(T,D,N,U,J);J.err="Invalid value at '"+U.path.concat(D).join(".")+"'!",x.list.is(T)&&(J.err+=" Use `.set(item)` instead of an Array.")}function $(T,D){for(var N=T.seen,U=N.length,J;U--;)if(J=N[U],D.obj===J.obj)return J;N.push(D)}}(),a.node=function(r){P("graph.node");var v=e.soul(r);if(v)return E({},v,r)},function(){a.to=function(v,_,A){if(P("graph.to"),!!v){var $={};return A=A||{seen:{}},C(v[_],r,{obj:$,graph:v,opt:A}),$}};function r(v,_){var A,$;if(e._===_){if(j(v,i.link._))return;this.obj[_]=O(v);return}if(!(A=i.link.is(v))){this.obj[_]=v;return}if($=this.opt.seen[A]){this.obj[_]=$;return}this.obj[_]=this.opt.seen[A]=a.to(this.graph,A,this.opt)}}();var n=x.fn.is,f=x.obj,l=f.is,S=f.del,d=f.has,j=f.empty,E=f.put,C=f.map,O=f.copy,w;x.graph=x.graph||a}}()}(Q);var at=Q.exports,gt=at;const dt=yt(gt);var X={exports:{}};X.exports,function(M){(function(){function w(x,o){return o?it(x):x.slice?w[i(x)]:function(c,y){x(c={exports:{}}),w[i(y)]=c.exports};function i(c){return c.split("/").slice(-1).toString().replace(".js","")}}var P=M;w(function(x){typeof self<"u"&&(x.window=self),typeof window<"u"&&(x.window=window);var o=x.window||x,i,c=o.SEA||{};(c.window=x.window)&&(c.window.SEA=c);try{i+""!=typeof P&&(P.exports=c)}catch{}x.exports=c})(w,"./root"),w(function(x){var o=w("./root");try{o.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(w,"./https"),w(function(x){var o;if(o+""==typeof btoa){if(o+""==typeof Buffer)try{Y.Buffer=w("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}Y.btoa=function(i){return Buffer.from(i,"binary").toString("base64")},Y.atob=function(i){return Buffer.from(i,"base64").toString("binary")}}})(w,"./base64"),w(function(x){w("./base64");function o(){}Object.assign(o,{from:Array.from}),o.prototype=Object.create(Array.prototype),o.prototype.toString=function(i,c,y){i=i||"utf8",c=c||0;const p=this.length;if(i==="hex"){const e=new Uint8Array(this);return[...Array((y&&y+1||p)-c).keys()].map(s=>e[s+c].toString(16).padStart(2,"0")).join("")}if(i==="utf8")return Array.from({length:(y||p)-c},(e,s)=>String.fromCharCode(this[s+c])).join("");if(i==="base64")return btoa(this)},x.exports=o})(w,"./array"),w(function(x){w("./base64");var o=w("./array");function i(...c){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),i.from(...c)}i.prototype=Object.create(Array.prototype),Object.assign(i,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const c=arguments[0];let y;if(typeof c=="string"){const p=arguments[1]||"utf8";if(p==="hex"){const e=c.match(/([\da-fA-F]{2})/g).map(s=>parseInt(s,16));if(!e||!e.length)throw new TypeError("Invalid first argument for type 'hex'.");y=o.from(e)}else if(p==="utf8"||p==="binary"){const e=c.length,s=new Uint16Array(e);Array.from({length:e},(u,g)=>s[g]=c.charCodeAt(g)),y=o.from(s)}else if(p==="base64"){const e=atob(c),s=e.length,u=new Uint8Array(s);Array.from({length:s},(g,b)=>u[b]=e.charCodeAt(b)),y=o.from(u)}else p==="binary"?y=o.from(c):console.info("SafeBuffer.from unknown encoding: "+p);return y}if(c.byteLength,c.byteLength?c.byteLength:c.length){let p;return c instanceof ArrayBuffer&&(p=new Uint8Array(c)),o.from(p||c)}},alloc(c,y=0){return o.from(new Uint8Array(Array.from({length:c},()=>y)))},allocUnsafe(c){return o.from(new Uint8Array(Array.from({length:c})))},concat(c){if(!Array.isArray(c))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return o.from(c.reduce((y,p)=>y.concat(Array.from(p)),[]))}}),i.prototype.from=i.from,i.prototype.toString=o.prototype.toString,x.exports=i})(w,"./buffer"),w(function(x){const o=w("./root"),i={Buffer:w("./buffer")};var c={},y;if(JSON.parseAsync=JSON.parseAsync||function(e,s,u){var g;try{s(g,JSON.parse(e,u))}catch(b){s(b)}},JSON.stringifyAsync=JSON.stringifyAsync||function(e,s,u,g){var b;try{s(b,JSON.stringify(e,u,g))}catch(t){s(t)}},i.parse=function(e,s){return new Promise(function(u,g){JSON.parseAsync(e,function(b,t){b?g(b):u(t)},s)})},i.stringify=function(e,s,u){return new Promise(function(g,b){JSON.stringifyAsync(e,function(t,h){t?b(t):g(h)},s,u)})},o.window&&(i.crypto=o.window.crypto||o.window.msCrypto,i.subtle=(i.crypto||c).subtle||(i.crypto||c).webkitSubtle,i.TextEncoder=o.window.TextEncoder,i.TextDecoder=o.window.TextDecoder,i.random=e=>i.Buffer.from(i.crypto.getRandomValues(new Uint8Array(i.Buffer.alloc(e))))),!i.TextDecoder){const{TextEncoder:e,TextDecoder:s}=w((y+""==typeof P?".":"")+"./lib/text-encoding",1);i.TextDecoder=s,i.TextEncoder=e}if(!i.crypto)try{var p=w("crypto",1);Object.assign(i,{crypto:p,random:s=>i.Buffer.from(p.randomBytes(s))});const{Crypto:e}=w("@peculiar/webcrypto",1);i.ossl=i.subtle=new e({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}x.exports=i})(w,"./shim"),w(function(x){var o=w("./root"),i=w("./shim"),c={};c.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},c.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},c.ecdh={name:"ECDH",namedCurve:"P-256"},c.jwk=function(y,p){y=y.split(".");var e=y[0],s=y[1],u={kty:"EC",crv:"P-256",x:e,y:s,ext:!0};return u.key_ops=p?["sign"]:["verify"],p&&(u.d=p),u},c.keyToJwk=function(y){return{kty:"oct",k:y.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,""),ext:!1,alg:"A256GCM"}},c.recall={validity:12*60*60,hook:function(y){return y}},c.check=function(y){return typeof y=="string"&&y.slice(0,4)==="SEA{"},c.parse=async function(y){try{var p=typeof y=="string";return p&&y.slice(0,4)==="SEA{"&&(y=y.slice(3)),p?await i.parse(y):y}catch{}return y},o.opt=c,x.exports=c})(w,"./settings"),w(function(x){var o=w("./shim");x.exports=async function(i,c){var y=typeof i=="string"?i:await o.stringify(i),p=await o.subtle.digest({name:c||"SHA-256"},new o.TextEncoder().encode(y));return o.Buffer.from(p)}})(w,"./sha256"),w(function(x){const o=w("./shim"),i=o.subtle,c=o.ossl?o.ossl:i,y=p=>c.digest({name:"SHA-1"},new ArrayBuffer(p));x.exports=y})(w,"./sha1"),w(function(x){var o=w("./root"),i=w("./shim"),c=w("./settings"),y=w("./sha256"),p;o.work=o.work||(async(e,s,u,g)=>{try{var b=(s||{}).epub||s;if(g=g||{},b instanceof Function&&(u=b,b=p),e=typeof e=="string"?e:await i.stringify(e),(g.name||"").toLowerCase().slice(0,3)==="sha"){var t=i.Buffer.from(await y(e,g.name),"binary").toString(g.encode||"base64");if(u)try{u(t)}catch(a){console.log(a)}return t}b=b||i.random(9);var h=await(i.ossl||i.subtle).importKey("raw",new i.TextEncoder().encode(e),{name:g.name||"PBKDF2"},!1,["deriveBits"]),m=await(i.ossl||i.subtle).deriveBits({name:g.name||"PBKDF2",iterations:g.iterations||c.pbkdf2.iter,salt:new i.TextEncoder().encode(g.salt||b),hash:g.hash||c.pbkdf2.hash},h,g.length||c.pbkdf2.ks*8);e=i.random(e.length);var k=i.Buffer.from(m,"binary").toString(g.encode||"base64");if(u)try{u(k)}catch(a){console.log(a)}return k}catch(a){if(console.log(a),o.err=a,o.throw)throw a;u&&u();return}}),x.exports=o.work})(w,"./work"),w(function(x){var o=w("./root"),i=w("./shim");w("./settings"),o.name=o.name||(async(c,y)=>{try{if(c)try{c()}catch(p){console.log(p)}return}catch(p){if(console.log(p),o.err=p,o.throw)throw p;c&&c();return}}),o.pair=o.pair||(async(c,y)=>{try{var p=i.ossl||i.subtle,e=await i.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async g=>{var b={};b.priv=(await i.subtle.exportKey("jwk",g.privateKey)).d;var t=await i.subtle.exportKey("jwk",g.publicKey);return b.pub=t.x+"."+t.y,b});try{var s=await p.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async g=>{var b={};b.epriv=(await p.exportKey("jwk",g.privateKey)).d;var t=await p.exportKey("jwk",g.publicKey);return b.epub=t.x+"."+t.y,b})}catch(g){if(o.window)throw g;if(g=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw g}s=s||{};var u={pub:e.pub,priv:e.priv,epub:s.epub,epriv:s.epriv};if(c)try{c(u)}catch(g){console.log(g)}return u}catch(g){if(console.log(g),o.err=g,o.throw)throw g;c&&c();return}}),x.exports=o.pair})(w,"./pair"),w(function(x){var o=w("./root"),i=w("./shim"),c=w("./settings"),y=w("./sha256"),p;o.sign=o.sign||(async(e,s,u,g)=>{try{if(g=g||{},!(s||g).priv){if(!o.I)throw"No signing key.";s=await o.I(null,{what:e,how:"sign",why:g.why})}if(p===e)throw"`undefined` not allowed.";var b=await c.parse(e),t=g.check=g.check||b;if(o.verify&&(o.opt.check(t)||t&&t.s&&t.m)&&p!==await o.verify(t,s)){var f=await c.parse(t);if(g.raw||(f="SEA"+await i.stringify(f)),u)try{u(f)}catch(S){console.log(S)}return f}var h=s.pub,m=s.priv,k=c.jwk(h,m),a=await y(b),n=await(i.ossl||i.subtle).importKey("jwk",k,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(l=>(i.ossl||i.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},l,new Uint8Array(a))),f={m:b,s:i.Buffer.from(n,"binary").toString(g.encode||"base64")};if(g.raw||(f="SEA"+await i.stringify(f)),u)try{u(f)}catch(l){console.log(l)}return f}catch(l){if(console.log(l),o.err=l,o.throw)throw l;u&&u();return}}),x.exports=o.sign})(w,"./sign"),w(function(x){var o=w("./root"),i=w("./shim"),c=w("./settings"),y=w("./sha256"),p;o.verify=o.verify||(async(u,g,b,t)=>{try{var h=await c.parse(u);if(g===!1){var m=await c.parse(h.m);if(b)try{b(m)}catch(E){console.log(E)}return m}t=t||{};var k=g.pub||g,a=o.opt.slow_leak?await o.opt.slow_leak(k):await(i.ossl||i.subtle).importKey("jwk",c.jwk(k),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),n=await y(h.m),f,l,S,d;try{if(f=i.Buffer.from(h.s,t.encode||"base64"),l=new Uint8Array(f),S=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},a,l,new Uint8Array(n)),!S)throw"Signature did not match."}catch{if(o.opt.fallback)return await o.opt.fall_verify(u,g,b,t)}var j=S?await c.parse(h.m):p;if(b)try{b(j)}catch(E){console.log(E)}return j}catch(E){if(console.log(E),o.err=E,o.throw)throw E;b&&b();return}}),x.exports=o.verify;var e={};o.opt.slow_leak=u=>{if(e[u])return e[u];var g=c.jwk(u);return e[u]=(i.ossl||i.subtle).importKey("jwk",g,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),e[u]};var s=o.opt;o.opt.fall_verify=async function(u,g,b,t,h){if(h===o.opt.fallback)throw"Signature did not match";h=h||1;var m=u||"";u=o.opt.unpack(u)||u;var k=await c.parse(u),a=g.pub||g,n=await o.opt.slow_leak(a),f=h<=o.opt.fallback?i.Buffer.from(await i.subtle.digest({name:"SHA-256"},new i.TextEncoder().encode(await c.parse(k.m)))):await y(k.m),l,S,d;try{if(l=i.Buffer.from(k.s,t.encode||"base64"),S=new Uint8Array(l),d=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,S,new Uint8Array(f)),!d)throw"Signature did not match."}catch{try{l=i.Buffer.from(k.s,"utf8"),S=new Uint8Array(l),d=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},n,S,new Uint8Array(f))}catch{if(!d)throw"Signature did not match."}}var j=d?await c.parse(k.m):p;if(s.fall_soul=m["#"],s.fall_key=m["."],s.fall_val=u,s.fall_state=m[">"],b)try{b(j)}catch(E){console.log(E)}return j},o.opt.fallback=2})(w,"./verify"),w(function(x){var o=w("./shim"),i=w("./settings"),c=w("./sha256");const y=async(p,e,s)=>{const u=p+(e||o.random(8)).toString("utf8"),g=o.Buffer.from(await c(u),"binary"),b=i.keyToJwk(g);return await o.subtle.importKey("jwk",b,{name:"AES-GCM"},!1,["encrypt","decrypt"])};x.exports=y})(w,"./aeskey"),w(function(x){var o=w("./root"),i=w("./shim");w("./settings");var c=w("./aeskey"),y;o.encrypt=o.encrypt||(async(p,e,s,u)=>{try{u=u||{};var g=(e||u).epriv||e;if(y===p)throw"`undefined` not allowed.";if(!g){if(!o.I)throw"No encryption key.";e=await o.I(null,{what:p,how:"encrypt",why:u.why}),g=e.epriv||e}var b=typeof p=="string"?p:await i.stringify(p),t={s:i.random(9),iv:i.random(15)},h=await c(g,t.s,u).then(k=>i.subtle.encrypt({name:u.name||"AES-GCM",iv:new Uint8Array(t.iv)},k,new i.TextEncoder().encode(b))),m={ct:i.Buffer.from(h,"binary").toString(u.encode||"base64"),iv:t.iv.toString(u.encode||"base64"),s:t.s.toString(u.encode||"base64")};if(u.raw||(m="SEA"+await i.stringify(m)),s)try{s(m)}catch(k){console.log(k)}return m}catch(k){if(console.log(k),o.err=k,o.throw)throw k;s&&s();return}}),x.exports=o.encrypt})(w,"./encrypt"),w(function(x){var o=w("./root"),i=w("./shim"),c=w("./settings"),y=w("./aeskey");o.decrypt=o.decrypt||(async(p,e,s,u)=>{try{u=u||{};var g=(e||u).epriv||e;if(!g){if(!o.I)throw"No decryption key.";e=await o.I(null,{what:p,how:"decrypt",why:u.why}),g=e.epriv||e}var b=await c.parse(p),t,h,m;try{t=i.Buffer.from(b.s,u.encode||"base64"),h=i.Buffer.from(b.iv,u.encode||"base64"),m=i.Buffer.from(b.ct,u.encode||"base64");var k=await y(g,t,u).then(n=>i.subtle.decrypt({name:u.name||"AES-GCM",iv:new Uint8Array(h),tagLength:128},n,new Uint8Array(m)))}catch{if(u.encode==="utf8")throw"Could not decrypt";if(o.opt.fallback)return u.encode="utf8",await o.decrypt(p,e,s,u)}var a=await c.parse(new i.TextDecoder("utf8").decode(k));if(s)try{s(a)}catch(n){console.log(n)}return a}catch(n){if(console.log(n),o.err=n,o.throw)throw n;s&&s();return}}),x.exports=o.decrypt})(w,"./decrypt"),w(function(x){var o=w("./root"),i=w("./shim");w("./settings"),o.secret=o.secret||(async(y,p,e,s)=>{try{if(s=s||{},!p||!p.epriv||!p.epub){if(!o.I)throw"No secret mix.";p=await o.I(null,{what:y,how:"secret",why:s.why})}var u=y.epub||y,g=p.epub,b=p.epriv,t=i.ossl||i.subtle,h=c(u),m=Object.assign({public:await t.importKey(...h,!0,[])},{name:"ECDH",namedCurve:"P-256"}),k=c(g,b),a=await t.importKey(...k,!1,["deriveBits"]).then(async f=>{var l=await t.deriveBits(m,f,256),S=new Uint8Array(l),d=await t.importKey("raw",S,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return t.exportKey("jwk",d).then(({k:j})=>j)}),n=a;if(e)try{e(n)}catch(f){console.log(f)}return n}catch(f){if(console.log(f),o.err=f,o.throw)throw f;e&&e();return}});var c=(y,p)=>{var[e,s]=y.split("."),u=p?{d:p}:{};return["jwk",Object.assign(u,{x:e,y:s,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};x.exports=o.secret})(w,"./secret"),w(function(x){var o=w("./root");o.certify=o.certify||(async(i,c={},y,p,e={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),i=(()=>{var a=[];if(i){if((typeof i=="string"||Array.isArray(i))&&i.indexOf("*")>-1)return"*";if(typeof i=="string")return i;if(Array.isArray(i)){if(i.length===1&&i[0])return typeof i[0]=="object"&&i[0].pub?i[0].pub:typeof i[0]=="string"?i[0]:null;i.map(n=>{typeof n=="string"?a.push(n):typeof n=="object"&&n.pub&&a.push(n.pub)})}return typeof i=="object"&&i.pub?i.pub:a.length>0?a:null}})(),!i)return console.log("No certificant found.");const u=e.expiry&&(typeof e.expiry=="number"||typeof e.expiry=="string")?parseFloat(e.expiry):null,g=(c||{}).read?c.read:null,b=(c||{}).write?c.write:typeof c=="string"||Array.isArray(c)||c["+"]||c["#"]||c["."]||c["="]||c["*"]||c[">"]||c["<"]?c:null,t=(e||{}).block||(e||{}).blacklist||(e||{}).ban||{},h=t.read&&(typeof t.read=="string"||(t.read||{})["#"])?t.read:null,m=typeof t=="string"?t:t.write&&(typeof t.write=="string"||t.write["#"])?t.write:null;if(!g&&!b)return console.log("No policy found.");const k=JSON.stringify({c:i,...u?{e:u}:{},...g?{r:g}:{},...b?{w:b}:{},...h?{rb:h}:{},...m?{wb:m}:{}});var s=await o.sign(k,y,null,{raw:1});if(e.raw||(s="SEA"+JSON.stringify(s)),p)try{p(s)}catch(a){console.log(a)}return s}catch(u){if(o.err=u,o.throw)throw u;p&&p();return}}),x.exports=o.certify})(w,"./certify"),w(function(x){var o=w("./shim"),i=w("./root");i.work=w("./work"),i.sign=w("./sign"),i.verify=w("./verify"),i.encrypt=w("./encrypt"),i.decrypt=w("./decrypt"),i.certify=w("./certify"),i.random=i.random||o.random,i.Buffer=i.Buffer||w("./buffer"),i.keyid=i.keyid||(async c=>{try{const y=o.Buffer.concat(c.replace(/-/g,"+").replace(/_/g,"/").split(".").map(u=>o.Buffer.from(u,"base64"))),p=o.Buffer.concat([o.Buffer.from([153,y.length/256,y.length%256]),y]),e=await sha1hash(p),s=o.Buffer.from(e,"binary");return s.toString("hex",s.length-8)}catch(y){throw console.log(y),y}}),((i.window||{}).GUN||{}).SEA=i,x.exports=i})(w,"./sea"),w(function(x){var o=w("./sea"),i,c;o.window?i=o.window.GUN||{chain:{}}:i=w((c+""==typeof P?".":"")+"./gun",1),o.GUN=i;function y(e){this._={$:this}}y.prototype=function(){function e(){}return e.prototype=i.chain,new e}(),y.prototype.constructor=y,i.chain.user=function(e){var s=this,g=s.back(-1),u;if(e)return e=o.opt.pub((e._||"")["#"])||e,g.get("~"+e);if(u=g.back("user"))return u;var g=g._,b=g,t=b.opt.uuid||p;return(b=(u=b.user=s.chain(new y))._).opt={},b.opt.uuid=function(h){var m=t(),k=g.user;return!k||!(k=k.is)||!(k=k.pub)||(m="~"+k+"/"+m,h&&h.call&&h(null,m)),m},u};function p(){return i.state().toString(36).replace(".","")}i.User=y,y.GUN=i,y.SEA=i.SEA=o,x.exports=y})(w,"./user"),w(function(x){var o,i=""+o!=typeof GUN?GUN||{chain:{}}:w((""+o==typeof P?".":"")+"./gun",1);i.chain.then=function(c,y){var p=this,e=new Promise(function(s,u){p.once(s,y)});return c?e.then(c):e}})(w,"./then"),w(function(x){var o=w("./user"),i=o.SEA,c=o.GUN,y=function(){};o.prototype.create=function(...p){var e=typeof p[0]=="object"&&(p[0].pub||p[0].epub)?p[0]:typeof p[1]=="object"&&(p[1].pub||p[1].epub)?p[1]:null,s=e&&(e.pub||e.epub)?e.pub:typeof p[0]=="string"?p[0]:null,u=e&&(e.pub||e.epub)?e:s&&typeof p[1]=="string"?p[1]:null,g=p.filter(n=>typeof n=="function")[0]||null,b=p&&p.length>1&&typeof p[p.length-1]=="object"?p[p.length-1]:{},t=this,h=t._,m=t.back(-1);if(g=g||y,b=b||{},b.check!==!1){var k;if(s||(k="No user."),(u||"").length<8&&(k="Password too short!"),k)return g({err:c.log(k)}),t}if(h.ing)return(g||y)({err:c.log("User is already being created or authenticated!"),wait:!0}),t;h.ing=!0;var a={};return a.a=function(n){if(a.pubs=n,n&&!b.already){var f={err:c.log("User already created!")};h.ing=!1,(g||y)(f),t.leave();return}a.salt=String.random(64),i.work(u,a.salt,a.b)},a.b=function(n){a.proof=n,e?a.c(e):i.pair(a.c)},a.c=function(n){var f;a.pair=n||{},(f=h.root.user)&&(f._.sea=n,f.is={pub:n.pub,epub:n.epub,alias:s}),a.data={pub:n.pub},a.d()},a.d=function(){a.data.alias=s,a.e()},a.e=function(){a.data.epub=a.pair.epub,i.encrypt({priv:a.pair.priv,epriv:a.pair.epriv},a.proof,a.f,{raw:1})},a.f=function(n){a.data.auth=JSON.stringify({ek:n,s:a.salt}),a.g(a.data.auth)},a.g=function(n){var f;a.data.auth=a.data.auth||n,m.get(f="~"+a.pair.pub).put(a.data).on(a.h);var l={};l[f]={"#":f},m.get("~@"+s).put(l).get(f).on(a.i)},a.h=function(n,f,l,S){S.off(),a.h.ok=1,a.i()},a.i=function(n,f,l,S){S&&(a.i.ok=1,S.off()),!(!a.h.ok||!a.i.ok)&&(h.ing=!1,g({ok:0,pub:a.pair.pub}),y===g&&(e?t.auth(e):t.auth(s,u)))},m.get("~@"+s).once(a.a),t},o.prototype.leave=function(p,e){var s=this,u=s.back(-1)._.user;if(u&&(delete u.is,delete u._.is,delete u._.sea),i.window)try{var g={};g=i.window.sessionStorage,delete g.recall,delete g.pair}catch{}return s}})(w,"./create"),w(function(x){var o=w("./user"),i=o.SEA,c=o.GUN,y=function(){};o.prototype.auth=function(...e){var s=typeof e[0]=="object"&&(e[0].pub||e[0].epub)?e[0]:typeof e[1]=="object"&&(e[1].pub||e[1].epub)?e[1]:null,u=!s&&typeof e[0]=="string"?e[0]:null,g=(u||s&&!(s.priv&&s.epriv))&&typeof e[1]=="string"?e[1]:null,b=e.filter(l=>typeof l=="function")[0]||null,t=e&&e.length>1&&typeof e[e.length-1]=="object"?e[e.length-1]:{},h=this,m=h._,k=h.back(-1);if(m.ing)return(b||y)({err:c.log("User is already being created or authenticated!"),wait:!0}),h;m.ing=!0;var a={},n,f=9;return a.a=function(l){if(!l)return a.b();if(!l.pub){var S=[];return Object.keys(l).forEach(function(d){d!="_"&&S.push(l[d])}),a.b(S)}if(a.name)return a.f(l);a.c((a.data=l).auth)},a.b=function(l){var S=(a.list=(a.list||[]).concat(l||[])).shift();if(n===S){if(a.name)return a.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.");if(u&&f--){k.get("~@"+u).once(a.a);return}return a.err("Wrong user or password.")}k.get(S).once(a.a)},a.c=function(l){if(n===l)return a.b();if(typeof l=="string")return a.c(p(l));i.work(g,(a.auth=l).s,a.d,a.enc)},a.d=function(l){i.decrypt(a.auth.ek,l,a.e,a.enc)},a.e=function(l){if(n===l)return a.enc?(a.enc=null,a.b()):(a.enc={encode:"utf8"},a.c(a.auth));a.half=l,a.f(a.data)},a.f=function(l){var S=a.half||{},d=a.data||{};a.g(a.lol={pub:l.pub||d.pub,epub:l.epub||d.epub,priv:l.priv||S.priv,epriv:l.epriv||S.epriv})},a.g=function(l){if(!l||!l.pub||!l.epub)return a.b();a.pair=l;var S=k._.user,d=S._;d.tag;var j=d.opt;d=S._=k.get("~"+l.pub)._,d.opt=j,S.is={pub:l.pub,epub:l.epub,alias:u||l.pub},d.sea=a.pair,m.ing=!1;try{g&&n==(p(m.root.graph["~"+l.pub].auth)||"")[":"]&&(t.shuffle=t.change=g)}catch{}if(t.change?a.z():(b||y)(d),i.window&&(h.back("user")._.opt||t).remember)try{var E={};E=i.window.sessionStorage,E.recall=!0,E.pair=JSON.stringify(l)}catch{}try{k._.tag.auth?k._.on("auth",d):setTimeout(function(){k._.on("auth",d)},1)}catch(C){c.log("Your 'auth' callback crashed with:",C)}},a.h=function(l){if(!l)return a.b();if(u=l.alias,u||(u=l.alias="~"+s.pub),!l.auth)return a.g(s);s=null,a.c((a.data=l).auth)},a.z=function(){a.salt=String.random(64),i.work(t.change,a.salt,a.y)},a.y=function(l){i.encrypt({priv:a.pair.priv,epriv:a.pair.epriv},l,a.x,{raw:1})},a.x=function(l){a.w(JSON.stringify({ek:l,s:a.salt}))},a.w=function(l){if(t.shuffle){console.log("migrate core account from UTF8 & shuffle");var S={};Object.keys(a.data).forEach(function(d){S[d]=a.data[d]}),delete S._,S.auth=l,k.get("~"+a.pair.pub).put(S)}k.get("~"+a.pair.pub).get("auth").put(l,b||y)},a.err=function(l){var S={err:c.log(l||"User cannot be found!")};m.ing=!1,(b||y)(S)},a.plugin=function(l){if(!(a.name=l))return a.err();var S=[l];l[0]!=="~"&&(S[1]="~"+l,S[2]="~@"+l),a.b(S)},s?s.priv&&s.epriv?a.g(s):k.get("~"+s.pub).once(a.h):u?k.get("~@"+u).once(a.a):!u&&!g&&i.name(a.plugin),h};function p(e){if(typeof e!="string")return e;try{e=JSON.parse(e)}catch{e={}}return e}})(w,"./auth"),w(function(x){var o=w("./user"),i=o.SEA;o.GUN,o.prototype.recall=function(c,y){var p=this,e=p.back(-1);if(c=c||{},c&&c.sessionStorage){if(i.window)try{var s={};s=i.window.sessionStorage,s&&(e._.opt.remember=!0,(p.back("user")._.opt||c).remember=!0,(s.recall||s.pair)&&e.user().auth(JSON.parse(s.pair),y))}catch{}return p}return p}})(w,"./recall"),w(function(x){var o=w("./user"),i=o.SEA,c=o.GUN,y=function(){};o.prototype.pair=function(){var p=this,e;try{e=new Proxy({DANGER:"\u2620"},{get:function(s,u,g){if(!(!p.is||!(p._||"").sea))return p._.sea[u]}})}catch{}return e},o.prototype.delete=async function(p,e,s){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var u=this;u.back(-1);var g=u.back("user");try{g.auth(p,e,function(b){var t=(g.is||{}).pub;g.map().once(function(){this.put(null)}),g.leave(),(s||y)({ok:0})})}catch(b){c.log("User.delete failed! Error:",b)}return u},o.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const p=this.back(-1);try{return await authRecall(p),p._.user._}catch{const e="No session!";throw c.log(e),{err:e}}},o.prototype.trust=async function(p){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),c.is(p)&&p.get("pub").get((e,s)=>{console.log(e,s)}),p.get("trust").get(path).put(theirPubkey)},o.prototype.grant=function(p,e){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var s=this,u=s.back(-1).user(),g=u._.sea,b="";return s.back(function(t){t.is||(b+=t.get||"")}),async function(){var t,h=await u.get("grant").get(g.pub).get(b).then();h=await i.decrypt(h,g),h||(h=i.random(16).toString(),t=await i.encrypt(h,g),u.get("grant").get(g.pub).get(b).put(t));var m=p.get("pub").then(),k=p.get("epub").then();m=await m,k=await k;var a=await i.secret(k,g);t=await i.encrypt(h,a),u.get("grant").get(m).get(b).put(t,e)}(),s},o.prototype.secret=function(p,e){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var s=this,u=s.back(-1).user(),g=u.pair(),b="";return s.back(function(t){t.is||(b+=t.get||"")}),async function(){var t,h=await u.get("trust").get(g.pub).get(b).then();h=await i.decrypt(h,g),h||(h=i.random(16).toString(),t=await i.encrypt(h,g),u.get("trust").get(g.pub).get(b).put(t)),t=await i.encrypt(p,h),s.put(t,e)}(),s},x.exports=o})(w,"./share"),w(function(x){var o=w("./sea"),i=w("./settings"),c,y=(o.window||"").GUN||w((""+c==typeof P?".":"")+"./gun",1);y.on("opt",function(t){t.sea||(t.sea={own:{}},t.on("put",p,t)),this.to.next(t)});function p(t){var h=this,m=h.as,k=t.put,a=k["#"],n=k["."],f=k[":"],l=k[">"],S=t["#"],d;if(!(!a||!n)){if((t._||"").faith&&(m.opt||"").faith&&typeof t._=="function"){o.opt.pack(k,function(E){o.verify(E,!1,function(C){k["="]=o.opt.unpack(C),h.to.next(t)})});return}var j=function(E){m.on("in",{"@":S,err:t.err=E})};if((t._||"").DBG&&((t._||"").DBG.c=+new Date),0<=a.indexOf("<?")&&(d=parseFloat(a.split("<?")[1]||""),d&&l<y.state()-d*1e3)){(d=t._)&&d.stun&&d.stun--;return}if(a==="~@"){p.alias(h,t,f,n,a,m,j);return}if(a.slice(0,2)==="~@"){p.pubs(h,t,f,n,a,m,j);return}if(d=o.opt.pub(a)){p.pub(h,t,f,n,a,m,j,m.user||"",d);return}if(0<=a.indexOf("#")){p.hash(h,t,f,n,a,m,j);return}p.any(h,t,f,n,a,m,j,m.user||"")}}p.hash=function(t,h,m,k,a,n,f){o.work(m,null,function(l){function S(d){let j="";for(let E=0;E<d.length;E++)j+=E-1&1?"":String.fromCharCode(parseInt(d.substring(E-1,E+1),16));return btoa(j)}if(l&&l===k.split("#").slice(-1)[0]||l&&l===S(k.split("#").slice(-1)[0]))return t.to.next(h);f("Data hash not same as hash!")},{name:"SHA-256"})},p.alias=function(t,h,m,k,a,n,f){if(!m)return f("Data must exist!");if("~@"+k===s(m))return t.to.next(h);f("Alias not same!")},p.pubs=function(t,h,m,k,a,n,f){if(!m)return f("Alias must exist!");if(k===s(m))return t.to.next(h);f("Alias not same!")},p.pub=async function(t,h,m,k,a,n,f,l,S){var d;const j=await i.parse(m)||{},E=(C,O,B)=>{if(C.m&&C.s&&O&&S)return o.verify(C,S,r=>{if(c!==r&&c!==r.e&&h.put[">"]&&h.put[">"]>parseFloat(r.e))return f("Certificate expired.");if(c!==r&&r.c&&r.w&&(r.c===O||r.c.indexOf("*")>-1)){let _=a.indexOf("/")>-1?a.replace(a.substring(0,a.indexOf("/")+1),""):"";String.match=String.match||y.text.match;const A=Array.isArray(r.w)?r.w:typeof r.w=="object"||typeof r.w=="string"?[r.w]:[];for(const $ of A)if(String.match(_,$["#"])&&String.match(k,$["."])||!$["."]&&String.match(_,$["#"])||!$["#"]&&String.match(k,$["."])||String.match(_?_+"/"+k:k,$["#"]||$)){if($["+"]&&$["+"].indexOf("*")>-1&&_&&_.indexOf(O)==-1&&k.indexOf(O)==-1)return f(`Path "${_}" or key "${k}" must contain string "${O}".`);if(r.wb&&(typeof r.wb=="string"||(r.wb||{})["#"])){var v=t.as.root.$.back(-1);return typeof r.wb=="string"&&r.wb.slice(0,1)!=="~"&&(v=v.get("~"+S)),v.get(r.wb).get(O).once(T=>T&&(T===1||T===!0)?f(`Certificant ${O} blocked.`):B(r))}return B(r)}return f("Certificate verification fail.")}})};if(k==="pub"&&"~"+S===a)return m===S?t.to.next(h):f("Account not same!");if((d=l.is)&&d.pub&&!j["*"]&&!j["+"]&&(S===d.pub||S!==d.pub&&((h._.msg||{}).opt||{}).cert)){o.opt.pack(h.put,C=>{o.sign(C,l._.sea,async function(O){if(c===O)return f(o.err||"Signature fail.");if(h.put[":"]={":":d=o.opt.unpack(O.m),"~":O.s},h.put["="]=d,S===l.is.pub){(d=s(m))&&((n.sea.own[d]=n.sea.own[d]||{})[S]=1),JSON.stringifyAsync(h.put[":"],function(B,r){return B?f(B||"Stringify error."):(h.put[":"]=r,t.to.next(h))});return}if(S!==l.is.pub&&((h._.msg||{}).opt||{}).cert){const B=await i.parse(h._.msg.opt.cert);B&&B.m&&B.s&&E(B,l.is.pub,r=>{h.put[":"]["+"]=B,h.put[":"]["*"]=l.is.pub,JSON.stringifyAsync(h.put[":"],function(v,_){return v?f(v||"Stringify error."):(h.put[":"]=_,t.to.next(h))})})}},{raw:1})});return}o.opt.pack(h.put,C=>{o.verify(C,j["*"]||S,function(O){var B;if(O=o.opt.unpack(O),c===O)return f("Unverified data.");if((B=s(O))&&S===o.opt.pub(B)&&((n.sea.own[B]=n.sea.own[B]||{})[S]=1),j["+"]&&j["+"].m&&j["+"].s&&j["*"])E(j["+"],j["*"],r=>(h.put["="]=O,t.to.next(h)));else return h.put["="]=O,t.to.next(h)})})},p.any=function(t,h,m,k,a,n,f,l){if(n.opt.secure)return f("Soul missing public key at '"+k+"'.");n.on("secure",function(S){if(this.off(),!n.opt.secure)return t.to.next(S);f("Data cannot be changed.")}).on.on("secure",h)};var e=y.valid,s=function(t,h){return typeof(h=e(t))=="string"&&h};(y.state||"").ify;var u=/[^\w_-]/;o.opt.pub=function(t){if(t&&(t=t.split("~"),!(!t||!(t=t[1]))&&(t=t.split(u).slice(0,2),!(!t||t.length!=2)&&(t[0]||"")[0]!=="@")))return t=t.slice(0,2).join("."),t},o.opt.stringy=function(t){},o.opt.pack=function(t,h,m,k,a){var n,f;if(o.opt.check(t))return h(t);t&&t["#"]&&t["."]&&t[">"]&&(n=t[":"],f=1),JSON.parseAsync(f?n:t,function(l,S){var d=c!==(S||"")[":"]&&(S||"")["~"];if(!d){h(t);return}h({m:{"#":a||t["#"],".":m||t["."],":":(S||"")[":"],">":t[">"]||y.state.is(k,m)},s:d})})};var g=o.opt;o.opt.unpack=function(t,h,m){var k;if(c!==t){if(t&&c!==(k=t[":"]))return k;if(h=h||g.fall_key,!m&&g.fall_val&&(m={},m[h]=g.fall_val),!(!h||!m)){if(t===m[h]||!o.opt.check(m[h]))return t;var a=m&&m._&&m._["#"]||g.fall_soul,n=y.state.is(m,h)||g.fall_state;if(t&&t.length===4&&a===t[0]&&h===t[1]&&b(n)===b(t[3]))return t[2];if(n<o.opt.shuffle_attack)return t}}},o.opt.shuffle_attack=15463296e5;var b=Math.floor})(w,"./index")})()}(X),X.exports;var mt=typeof window<"u"?window.Gun:at;const st="#",W="_";mt.chain.unset=function(M){return this&&M&&M[W]&&M[W].put&&M[W].put[W]&&M[W].put[W][st]&&this.put({[M[W].put[W][st]]:null}),this},H=dt(["http://localhost:3000/gun"]),H.clear=function(){localStorage.clear(),sessionStorage.clear(),indexedDB.databases().then(M=>{for(let w of M)indexedDB.deleteDatabase(w.name)}),console.log("Local data cleared")},H.lookup=async function(M,w){var i;const P=await H.get(M).get(w).then(),x=((i=P==null?void 0:P._)==null?void 0:i[">"])&&Object.keys(P._[">"])[0];if(!x)return null;const o=await H.get(x).then();return o?{id:w,...o}:null};const{ref:ut,inject:vt,provide:wt,computed:bt,onMounted:kt,onUnmounted:_t}=await Z("vue");ht=function(M){const w=ut(null),P=ut([]);bt(()=>P.value.length);const x=async y=>{const p=crypto.randomUUID(),e=Object.fromEntries(y.entries());e.id=p,P.value.push(e);const s=H.get(`wiki-plugin/${M}/${p}`).put(e);return H.get("wikis").get(M).set(s),w.value=e,s},o=async y=>(w.value=P.value.find(p=>p.id===y),w.value),i=async y=>{var e;const p=(e=w.value)==null?void 0:e.id;return P.value=P.value.filter(s=>s.id!==p),await c(p),await x(y)},c=async y=>{const p=H.get(`wiki-plugin/${M}/${y}`);p.then(()=>{H.get("wikis").get(M).unset(p)}),w.value=null};kt(()=>{H.get("wikis").get(M).map().once(y=>{y&&(P.value.some(p=>p.id===y.id)||P.value.push(y))})}),_t(()=>{H.get("wikis").get(M).map().off()}),wt("wiki",{wiki:w,pages:P,createPage:x,setPage:o,editPage:i,removePage:c})},pt=function(){const M=vt("wiki");if(!M)throw new Error("Composable must have an wiki provider.");return M}});export{lt as _,xt as __tla,H as g,pt as u,ht as w};
